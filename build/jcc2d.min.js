!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.JC=t.JC||{})}(this,function(t){"use strict";function i(t,i){this.x=t||0,this.y=i||0}function e(){this.global=new i((-1e5),(-1e5)),this.target=null,this.originalEvent=null,this.cancleBubble=!1,this.ratio=1,this.type=""}function s(){this.listeners={}}function o(t){return Object.prototype.toString.call(t)}function n(t){this.element=t.element||{},this.duration=t.duration||300,this.living=!0,this.onCompelete=t.onCompelete||null,this.onUpdate=t.onUpdate||null,this.infinity=t.infinity||!1,this.alternate=t.alternate||!1,this.ease=t.ease||"easeBoth",this.repeats=t.repeats||0,this.delay=t.delay||0,this.wait=t.wait||0,this.delayCut=this.delay,this.progress=0,this.direction=1,this.timeScale=t.timeScale||1,this.totalTime=0,this.paused=!1}function h(t){n.call(this,t),this.from=t.from,this.to=t.to}function r(t){n.call(this,t),this.points=t.points,this.attachTangent=t.attachTangent||!1,this._cacheRotate=this.element.rotation;var i=this._cacheRotate*O.DTR;this._cacheVector={x:10*Math.cos(i),y:10*Math.sin(i)}}function a(t){n.call(this,t),this._keyframes=t.keys,this._keyIndex=0,this._cursor=1,this._keyConfig=t.keyConfig,this.configKey()}function c(t){this.element=t,this.animates=[]}function u(t){s.call(this),this.texture=null,this.width=0,this.height=0,this.loaded=!1,this.load(t)}function p(){s.call(this),this.textures={},this._total=0,this._failed=0,this._received=0}function d(t,i,e,s){this.x=t||0,this.y=i||0,this.width=e||0,this.height=s||0}function l(t){var e=t;if(!O.isArray(e)){e=new Array(arguments.length);for(var s=0;s<e.length;++s)e[s]=arguments[s]}if(e[0]instanceof i){for(var o=[],n=0,h=e.length;n<h;n++)o.push(e[n].x,e[n].y);e=o}this.closed=!0,this.points=e}function f(t,i,e){this.x=t||0,this.y=i||0,this.radius=e||0}function y(t,i,e,s){this.x=t||0,this.y=i||0,this.width=e||0,this.height=s||0}function v(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}function m(){s.call(this),this._ready=!0,this.visible=!0,this.worldAlpha=1,this.alpha=1,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.rotation=0,this.rotationCache=0,this._sr=0,this._cr=1,this.x=0,this.y=0,this.pivotX=0,this.pivotY=0,this.mask=null,this.parent=null,this.worldTransform=new v,this.passEvent=!1,this.bound=null,this.Animation=new c(this),this._touchstarted=!1,this._mousedowned=!1,this.buttonMode=!1,this.cursor="pointer"}function x(){m.call(this),this.childs=[],this.timeScale=1,this.paused=!1,this._zIndex=0,this.souldSort=!1}function g(t,i){this.element=t,this.living=!1,this.onCompelete=null,this.infinity=!1,this.alternate=!1,this.repeats=0,this.animations=i.animations||{},this.index=0,this.direction=1,this.frames=[],this.sy=i.sy||0,this.sx=i.sx||0,this.fillMode=0,this.fps=16,this.paused=!1,this.pt=0,this.nt=0}function w(t){if(x.call(this),this.texture=t.texture,this.texture.loaded)this.upTexture(t);else{var i=this;this._ready=!1,this.texture.on("load",function(){i.upTexture(t),i._ready=!0})}this.MovieClip=new g(this,t)}function M(){x.call(this),this.cacheCanvas=null}function b(t,i,e){x.call(this),this.text=t.toString(),this.font=i||"bold 12px Arial",this.color=e||"#000000",this.textAlign="center",this.textBaseline="middle",this.outline=0,this.lineWidth=1,this.US=!1,this.UF=!0}function _(t){s.call(this),this.stage=t,this.canvas=this.stage.canvas,this.autoPreventDefault=!0,this.strictMode=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.processClick=this.processClick.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.defaultCursorStyle="inherit",this.currentCursorStyle="inherit"}function T(t,i){x.call(this),this.canvas=O.isString(t)?document.getElementById(t):t,this.ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor=i||"transparent",this.autoClear=!0,this.autoUpdate=!0,this.autoStyle=!1,this.width=this.canvas.width,this.height=this.canvas.height,this.pt=null,this.snippet=0,this.averageSnippet=0,this.fps=0,this.averageFps=0,this._takeTime=0,this._renderTimes=0,this.enableFPS=!0,this.interactionManager=new _(this),this._interactive=!1,this.interactiveOnChange=function(){this.interactive?this.interactionManager.addEvents():this.interactionManager.removeEvents()},this.interactive=!0,this.proxyOn()}!function(){for(var t=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),s=Math.max(0,16-(e-t)),o=window.setTimeout(function(){i(e+s)},s);return t=e+s,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.RAF=window.requestAnimationFrame,window.CAF=window.cancelAnimationFrame}(),i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copy=function(t){this.set(t.x,t.y)},i.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},i.prototype.set=function(t,i){this.x=t||0,this.y=i||(0!==i?this.x:0)},e.prototype.clone=function(){var t=new e;if(t.originalEvent=this.originalEvent,t.ratio=this.ratio,this.touches){if(t.touches=[],this.touches.length>0){for(var i=0;i<this.touches.length;i++)t.touches[i]={},t.touches[i].global=this.touches[i].global.clone();t.global=t.touches[0].global}}else t.global=this.global.clone();return t},s.prototype.on=function(t,i){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(i)},s.prototype.off=function(t,i){var e=this.listeners,s=e[t],o=e[t].length;if(s&&o>0)if(i)for(;o--;)s[o]===i&&s.splice(o,1);else s.length=0},s.prototype.once=function(t,i){var e=this,s=function(o){i&&i(o),e.off(t,s)};this.on(t,s)},s.prototype.emit=function(t,i){if(void 0!==this.listeners){var e=this.listeners,s=e[t];if(void 0!==s){var o,n=s.length;for(o=0;o<n;o++)s[o].call(this,i)}}};var C={linear:function(t,i,e,s){return e*t/s+i},easeIn:function(t,i,e,s){return e*(t/=s)*t+i},easeOut:function(t,i,e,s){return-e*(t/=s)*(t-2)+i},easeBoth:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i},extend:function(t){if(t)for(var i in t)"extend"!==i&&t[i]&&(this[i]=t[i])}},O={copyJSON:function(t){return JSON.parse(JSON.stringify(t))},DTR:Math.PI/180,RTD:180/Math.PI,isArray:function(){var t=o([]);return function(i){return Object.prototype.toString.call(i)===t}}(),isObject:function(){var t=o({});return function(i){return Object.prototype.toString.call(i)===t}}(),isString:function(){var t=o("s");return function(i){return Object.prototype.toString.call(i)===t}}(),isNumber:function(){var t=o(1);return function(i){return Object.prototype.toString.call(i)===t}}(),isFunction:function(){var t=o(function(){});return function(i){return Object.prototype.toString.call(i)===t}}(),random:function(t,i){return this.isArray(t)?t[~~(Math.random()*t.length)]:(this.isNumber(i)||(i=t||1,t=0),t+Math.random()*(i-t))},euclideanModulo:function(t,i){return(t%i+i)%i},clamp:function(t,i,e){return t<i?i:t>e?e:t}};n.prototype._swapEase=function(){var t=this.ease;t.indexOf("In")>0?t=t.replace("In","Out"):t.indexOf("Out")>0&&(t=t.replace("Out","In")),this.ease=t},n.prototype.update=function(t){if(this.wait>0)return void(this.wait-=Math.abs(t));if(this.paused||!this.living||this.delayCut>0)return void(this.delayCut>0&&(this.delayCut-=Math.abs(t)));var i=this.direction*this.timeScale*t;this.progress=O.clamp(this.progress+i,0,this.duration),this.totalTime+=Math.abs(i);var e=this.nextPose();this.onUpdate&&this.onUpdate(e,this.progress/this.duration),this.totalTime>=this.duration&&(this.repeats>0||this.infinity?(this.repeats>0&&--this.repeats,this.delayCut=this.delay,this.totalTime=0,this.alternate?(this.direction*=-1,this._swapEase()):(this.direction=1,this.progress=0)):(this.living=!1,this.onCompelete&&this.onCompelete(e)))},n.prototype.nextPose=function(){var t={};for(var i in this.to)t[i]=C[this.ease](this.progress,this.from[i],this.to[i]-this.from[i],this.duration),void 0!==this.element[i]&&(this.element[i]=t[i]);return t},n.prototype.pause=function(){this.paused=!0},n.prototype.start=function(){this.paused=!1},n.prototype.stop=function(){this.progress=this.duration},n.prototype.cancle=function(){this.living=!1},h.prototype=Object.create(n.prototype),r.prototype=Object.create(n.prototype),r.prototype.nextPose=function(){var t={},i=0,e=C[this.ease](this.progress,0,1,this.duration),s=this.getPoint(e,this.points);return t.x=s.x,t.y=s.y,this.attachTangent&&(i=this.decomposeRotate(e,s),t.rotation=i===!1?this.preDegree:i,t.rotation+=this._cacheRotate,i!==!1&&(this.preDegree=i)),this.element.setVal(t),t},r.prototype.getPoint=function(t,i){var e=i,s=e.length,o=1-t,n=e.slice(0,s-1),h=e.slice(1),r={};if(s>3){var a=this.getPoint(t,n),c=this.getPoint(t,h);return r.x=o*a.x+t*c.x,r.y=o*a.y+t*c.y,r}return r.x=o*o*i[0].x+2*t*o*i[1].x+t*t*i[2].x,r.y=o*o*i[0].y+2*t*o*i[1].y+t*t*i[2].y,r},r.prototype.decomposeRotate=function(t,i){var e=i||this.getPoint(t,this.points),s=this.getPoint(t+.01,this.points),o={x:s.x-e.x,y:s.y-e.y},n=this._cacheVector.x*o.y-o.x*this._cacheVector.y,h=n>0?1:-1,r=(o.x*this._cacheVector.x+o.y*this._cacheVector.y)/(Math.sqrt(o.x*o.x+o.y*o.y)*Math.sqrt(this._cacheVector.x*this._cacheVector.x+this._cacheVector.y*this._cacheVector.y));return!isNaN(r)&&h*Math.acos(r)*O.RTD},a.prototype=Object.create(n.prototype),a.prototype.configKey=function(){this.from=this._keyframes[this._keyIndex],this._keyIndex+=this._cursor,this.to=this._keyframes[this._keyIndex];var t=this._keyConfig[Math.min(this._keyIndex,this._keyIndex-this._cursor)]||{};this.ease=t.ease||this.ease,this.duration=t.duration||this.duration,this.progress=0},a.prototype.update=function(t){if(this.wait>0)return void(this.wait-=Math.abs(t));if(this.paused||!this.living||this.delayCut>0)return void(this.delayCut>0&&(this.delayCut-=Math.abs(t)));var i=this.direction*this.timeScale*t;this.progress=O.clamp(this.progress+i,0,this.duration),this.totalTime+=Math.abs(i);var e=this.nextPose();this.onUpdate&&this.onUpdate(e,this.progress/this.duration,this._keyIndex),this.totalTime>=this.duration&&(this.totalTime=0,this._keyIndex<this._keyframes.length-1&&this._keyIndex>0?this.configKey():this.repeats>0||this.infinity?(this.repeats>0&&--this.repeats,this.delayCut=this.delay,this.alternate?this._cursor*=-1:(this._cursor=1,this._keyIndex=0),this.configKey()):(this.living=!1,this.onCompelete&&this.onCompelete()))},c.prototype.update=function(t){for(var i=0;i<this.animates.length;i++)this.animates[i].living||this.animates.splice(i,1),this.animates[i]&&this.animates[i].update(t)},c.prototype.fromTo=function(t,i){return this.element.setVal(t.from),t.element=this.element,this._addMove(new h(t),i)},c.prototype.to=function(t,i){t.from={};for(var e in t.to)t.from[e]=this.element[e];return t.element=this.element,this._addMove(new h(t),i)},c.prototype.motion=function(t,i){return t.element=this.element,this._addMove(new r(t),i)},c.prototype.keyFrames=function(t,i){return t.element=this.element,this._addMove(new a(t),i)},c.prototype._addMove=function(t,i){return i&&this.clear(),this.animates.push(t),t},c.prototype.clear=function(){this.animates.length=0},u.prototype=Object.create(s.prototype),u.prototype.load=function(t){var i=this;"string"==typeof t&&(this.texture=new Image,this.texture.crossOrigin="",this.texture.src=t,this.texture.onload=function(){i.loaded=!0,i.emit("load")},this.texture.onerror=function(){i.emit("error")},this.on("load",function(){i.width=i.texture.width,i.height=i.texture.height})),t instanceof Image&&t.width*t.height>0&&(this.texture=t,this.width=t.width,this.height=t.height)},p.prototype=Object.create(s.prototype),p.prototype.load=function(t){function i(t){t.on("load",function(){e._received++,e.emit("update"),e._received+e._failed>=e._total&&e.emit("compelete")}),t.on("error",function(){e._failed++,e.emit("update"),e._received+e._failed>=e._total&&e.emit("compelete")})}var e=this;this._total=0,this._failed=0,this._received=0;for(var s in t)this._total++,this.textures[s]=new u(t[s]),i(this.textures[s]);return this},p.prototype.getById=function(t){return this.textures[t]},Object.defineProperty(u.prototype,"progress",{get:function(){return 0===this._total?1:(this._received+this._failed)/this._total}});var k=function(t){return(new p).load(t)};d.EMPTY=new d(0,0,0,0),d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(t,i){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height)},l.prototype.clone=function(){return new l(this.points.slice())},l.prototype.contains=function(t,i){for(var e=!1,s=this.points.length/2,o=0,n=s-1;o<s;n=o++){var h=this.points[2*o],r=this.points[2*o+1],a=this.points[2*n],c=this.points[2*n+1],u=r>i!=c>i&&t<(a-h)*(i-r)/(c-r)+h;u&&(e=!e)}return e},f.prototype.clone=function(){return new f(this.x,this.y,this.radius)},f.prototype.contains=function(t,i){if(this.radius<=0)return!1;var e=this.x-t,s=this.y-i,o=this.radius*this.radius;return e*=e,s*=s,e+s<=o},f.prototype.getBounds=function(){return new d(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},y.prototype.clone=function(){return new y(this.x,this.y,this.width,this.height)},y.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;var e=(t-this.x)/this.width,s=(i-this.y)/this.height;return e*=e,s*=s,e+s<=1},y.prototype.getBounds=function(){return new d(this.x-this.width,this.y-this.height,this.width,this.height)},v.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},v.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},v.prototype.apply=function(t,i){return i=i||{},i.x=this.a*t.x+this.c*t.y+this.tx,i.y=this.b*t.x+this.d*t.y+this.ty,i},v.prototype.applyInverse=function(t,i){var e=1/(this.a*this.d+this.c*-this.b);return i.x=this.d*e*t.x+-this.c*e*t.y+(this.ty*this.c-this.tx*this.d)*e,i.y=this.a*e*t.y+-this.b*e*t.x+(-this.ty*this.a+this.tx*this.b)*e,i},v.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},v.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},v.prototype.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),s=this.a,o=this.c,n=this.tx;return this.a=s*i-this.b*e,this.b=s*e+this.b*i,this.c=o*i-this.d*e,this.d=o*e+this.d*i,this.tx=n*i-this.ty*e,this.ty=n*e+this.ty*i,this},v.prototype.append=function(t){var i=this.a,e=this.b,s=this.c,o=this.d;return this.a=t.a*i+t.b*s,this.b=t.a*e+t.b*o,this.c=t.c*i+t.d*s,this.d=t.c*e+t.d*o,this.tx=t.tx*i+t.ty*s+this.tx,this.ty=t.tx*e+t.ty*o+this.ty,this},v.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},v.prototype.setTransform=function(t,i,e,s,o,n,h,r,a){var c,u,p,d,l,f,y,v;return l=Math.sin(h),f=Math.cos(h),y=Math.tan(a),v=Math.tan(r),c=f*o,u=l*o,p=-l*n,d=f*n,this.a=c+y*p,this.b=u+y*d,this.c=v*c+p,this.d=v*u+d,this.tx=t+(e*c+s*p),this.ty=i+(e*u+s*d),this};var E=new v,S=new v;m.prototype=Object.create(s.prototype),Object.defineProperty(m.prototype,"scale",{get:function(){return this.scaleX},set:function(t){this.scaleX=this.scaleY=t}}),m.prototype.fromTo=function(t,i){return this.Animation.fromTo(t,i)},m.prototype.to=function(t,i){return this.Animation.to(t,i)},m.prototype.motion=function(t,i){return this.Animation.motion(t,i)},m.prototype.keyFrames=function(t,i){return this.Animation.keyFrames(t,i)},m.prototype.isVisible=function(){return!!(this.visible&&this.alpha>0&&this.scaleX*this.scaleY!==0)},m.prototype.removeMask=function(){this.mask=null},m.prototype.setVal=function(t){if(void 0!==t)for(var i in t)void 0!==this[i]&&(this[i]=t[i])},m.prototype.updateTransform=function(){var t,i,e,s,o,n,h=this.parent.worldTransform,r=this.worldTransform;this.skewX||this.skewY?(S.setTransform(this.x,this.y,this.pivotX,this.pivotY,this.scaleX,this.scaleY,this.rotation*O.DTR,this.skewX*O.DTR,this.skewY*O.DTR),r.a=S.a*h.a+S.b*h.c,r.b=S.a*h.b+S.b*h.d,r.c=S.c*h.a+S.d*h.c,r.d=S.c*h.b+S.d*h.d,r.tx=S.tx*h.a+S.ty*h.c+h.tx,r.ty=S.tx*h.b+S.ty*h.d+h.ty):this.rotation%360?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation*O.DTR),this._cr=Math.cos(this.rotation*O.DTR)),t=this._cr*this.scaleX,i=this._sr*this.scaleX,e=-this._sr*this.scaleY,s=this._cr*this.scaleY,o=this.x,n=this.y,(this.pivotX||this.pivotY)&&(o-=this.pivotX*t+this.pivotY*e,n-=this.pivotX*i+this.pivotY*s),r.a=t*h.a+i*h.c,r.b=t*h.b+i*h.d,r.c=e*h.a+s*h.c,r.d=e*h.b+s*h.d,r.tx=o*h.a+n*h.c+h.tx,r.ty=o*h.b+n*h.d+h.ty):(t=this.scaleX,s=this.scaleY,o=this.x-this.pivotX*t,n=this.y-this.pivotY*s,r.a=t*h.a,r.b=t*h.b,r.c=s*h.c,r.d=s*h.d,r.tx=o*h.a+n*h.c+h.tx,r.ty=o*h.b+n*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},m.prototype.updateAnimation=function(t){this.Animation.update(t)},m.prototype.setTransform=function(t){var i=this.worldTransform;t.globalAlpha=this.worldAlpha,t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty)},m.prototype.getGlobalPos=function(){return{x:this.worldTransform.tx,y:this.worldTransform.ty}},m.prototype.setBound=function(t,i){null!==this.bound&&i||(this.bound=t)},m.prototype.contains=function(t){if(null===this.bound)return!1;var e=new i;return this.worldTransform.applyInverse(t,e),this.bound&&this.bound.contains(e.x,e.y)},x.prototype=Object.create(m.prototype),Object.defineProperty(x.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.souldSort=!0))}}),x.prototype._sortList=function(){this.childs.sort(function(t,i){return t.zIndex>i.zIndex?1:t.zIndex<i.zIndex?-1:0}),this.souldSort=!1},x.prototype.adds=function(t){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.adds(arguments[i]);return this}return t===this?(console.error("adds: object can't be added as a child of itself.",t),this):(t&&t instanceof x?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.childs.push(t),this.souldSort=!0):console.error("adds: object not an instance of Container",t),this)},x.prototype.remove=function(t){if(arguments.length>1)for(var i=0;i<arguments.length;i++)this.remove(arguments[i]);var e=this.childs.indexOf(t);e!==-1&&(t.parent=null,this.childs.splice(e,1))},x.prototype.updatePosture=function(t){if(this._ready){this.souldSort&&this._sortList(),t=this.timeScale*t,this.paused||this.updateAnimation(t),this.updateTransform();for(var i=0,e=this.childs.length;i<e;i++){var s=this.childs[i];s.updatePosture(t)}}},x.prototype.render=function(t){t.save(),this.setTransform(t),this.mask&&this.mask.render(t),this.renderMe(t);for(var i=0,e=this.childs.length;i<e;i++){var s=this.childs[i];s.isVisible()&&s._ready&&s.render(t)}t.restore()},x.prototype.renderMe=function(){return!0},x.prototype.pause=function(){this.paused=!0},x.prototype.start=function(){this.paused=!1},x.prototype.cancle=function(){this.Animator.clear()},g.prototype.update=function(t){if(!this.paused&&this.living&&(this.nt+=t,!(this.nt-this.pt<this.interval))){this.pt=this.nt;var i=this.index+this.direction;i<this.frames.length&&i>=0?this.index=i:this.repeats>0||this.infinity?(this.repeats>0&&--this.repeats,this.alternate?(this.direction*=-1,this.index+=this.direction):(this.direction=1,this.index=0)):(this.living=!1,this.index=this.fillMode,this.onCompelete&&this.onCompelete(),this.next&&this.next())}},g.prototype.getFramePos=function(){var t={x:this.sx,y:this.sy},i=this.frames[this.index];if(i>0){var e=this.element._textureW/this.element.width>>0,s=this.sx/this.element.width>>0,o=this.sy/this.element.height>>0,n=o+(s+i)/e>>0,h=(s+i)%e;t.x=h*this.element.width,t.y=n*this.element.height}return t},g.prototype.playMovie=function(t){this.next=null;var i=this.format(t.movie);O.isArray(i)&&(this.frames=i,this.index=0,this.direction=1,this.fillMode=t.fillMode||0,this.fps=t.fps||this.fps,this.infinity=t.infinity||!1,this.alternate=t.alternate||!1,this.repeats=t.repeats||0,this.living=!0,this.onCompelete=t.onCompelete||null)},g.prototype.format=function(t){if(O.isString(t)){var i=this.animations[t];return i?this.format(i):(console.warn("%c JC.MovieClip warn %c: you didn`t config %c"+t+"%c in animations ","color: #f98165; background: #80a89e","color: #80a89e; background: #cad9d5;","color: #f98165; background: #cad9d5","color: #80a89e; background: #cad9d5"),!1)}if(O.isArray(t))return t;if(O.isObject(t)){for(var e=[],s=t.start;s<=t.end;s++)e.push(s);if(t.next&&this.animations[t.next]){var o=this,n={};O.isString(t.next)&&this.animations[t.next]?(n.movie=t.next,n.infinity=!0):O.isObject(t.next)&&(n=t.next),O.isString(n.movie)&&(this.next=function(){o.playMovie(n)})}return e}},g.prototype.pause=function(){this.paused=!0},g.prototype.start=function(){this.paused=!1},g.prototype.cancle=function(){this.living=!1},Object.defineProperty(g.prototype,"interval",{get:function(){return this.fps>0?1e3/this.fps>>0:16}}),w.prototype=Object.create(x.prototype),w.prototype.upTexture=function(t){this._textureW=t.texture.width,this._textureH=t.texture.height,this.width=t.width||this._textureW,this.height=t.height||this._textureH,this.regX=this.width>>1,this.regY=this.height>>1,this.setBound(new d((-this.regX),(-this.regY),this.width,this.height),!0)},w.prototype.updateAnimation=function(t){this.Animation.update(t),this.MovieClip.update(t)},w.prototype.playMovie=function(t){this.MovieClip.playMovie(t)},w.prototype.renderMe=function(t){if(this._ready){var i=this.MovieClip.getFramePos();t.drawImage(this.texture.texture,i.x,i.y,this.width,this.height,-this.regX,-this.regY,this.width,this.height)}},M.prototype=Object.create(x.prototype),M.prototype.renderMe=function(t){this.draw&&(this.cached||this.cache?(this.cache&&(this.cacheCanvas=this.cacheCanvas||document.createElement("canvas"),this.width=this.cacheCanvas.width=this.session.width,this.height=this.cacheCanvas.height=this.session.height,this._ctx=this.cacheCanvas.getContext("2d"),this._ctx.clearRect(0,0,this.width,this.height),this._ctx.save(),this._ctx.setTransform(1,0,0,1,this.session.center.x,this.session.center.y),this._drawBack(this._ctx),this._ctx.restore(),this.cached=!0,this.cache=!1),this.cacheCanvas&&t.drawImage(this.cacheCanvas,0,0,this.width,this.height,-this.session.center.x,-this.session.center.x,this.width,this.height)):this._drawBack(t))},M.prototype._drawBack=function(t){"function"==typeof this.draw?this.draw(t):"object"==typeof this.draw&&"function"==typeof this.draw.render&&this.draw.render(t)},M.prototype.drawCall=function(t,i){void 0!==t&&(i=i||{},this.cache=i.cache||!1,this.cached=!1,this.session=i.session||{center:{x:0,y:0},width:100,height:100},this.draw=t||null)},b.prototype=Object.create(x.prototype),b.prototype.renderMe=function(t){t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,this.UF&&(t.fillStyle=this.color,t.fillText(this.text,0,0)),this.US&&(t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.strokeText(this.text,0,0))},_.prototype=Object.create(s.prototype),_.prototype.addEvents=function(){this.canvas&&!this.eventsAdded&&(window.document.addEventListener("mousemove",this.onMouseMove,!0),this.canvas.addEventListener("mousedown",this.onMouseDown,!0),this.canvas.addEventListener("click",this.onClick,!0),this.canvas.addEventListener("mouseout",this.onMouseOut,!0),this.canvas.addEventListener("mouseover",this.onMouseOver,!0),this.canvas.addEventListener("touchstart",this.onTouchStart,!0),this.canvas.addEventListener("touchend",this.onTouchEnd,!0),this.canvas.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},_.prototype.removeEvents=function(){this.canvas&&(window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.canvas.removeEventListener("mousedown",this.onMouseDown,!0),this.canvas.removeEventListener("click",this.onClick,!0),this.canvas.removeEventListener("mouseout",this.onMouseOut,!0),this.canvas.removeEventListener("mouseover",this.onMouseOver,!0),this.canvas.removeEventListener("touchstart",this.onTouchStart,!0),this.canvas.removeEventListener("touchend",this.onTouchEnd,!0),this.canvas.removeEventListener("touchmove",this.onTouchMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},_.prototype.onMouseMove=function(t){var i=this.fixCoord(t);this.cursor=this.defaultCursorStyle,this.processInteractive(this.stage,i,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.canvas.style.cursor=this.cursor),this.emit("mousemove",i)},_.prototype.processMouseMove=function(t,i,e){this.processMouseOverOut(t,i,e),e&&this.dispatchEvent(t,"mousemove",i)},_.prototype.processMouseOverOut=function(t,i,e){var s=i.clone();e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",s)),t.buttonMode&&(this.cursor=t.cursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",s))},_.prototype.onMouseDown=function(t){this.autoPreventDefault&&t.preventDefault();var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processMouseDown,!0),this.emit("mousedown",i)},_.prototype.processMouseDown=function(t,i,e){e&&this.dispatchEvent(t,i.type,i)},_.prototype.onClick=function(t){this.autoPreventDefault&&t.preventDefault();var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processClick,!0),this.emit("click",i)},_.prototype.processClick=function(t,i,e){e&&this.dispatchEvent(t,i.type,i)},_.prototype.onMouseUp=function(t){var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processMouseUp,!0),this.emit("mouseup",i)},_.prototype.processMouseUp=function(t,i,e){e&&this.dispatchEvent(t,i.type,i)},_.prototype.onMouseOut=function(t){var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processMouseOverOut,!1),this.emit("mouseout",t)},_.prototype.onMouseOver=function(t){this.emit("mouseover",t)},_.prototype.onTouchStart=function(t){var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processTouchStart,!0),this.emit("touchstart",i)},_.prototype.processTouchStart=function(t,i,e){e&&(t._touchstarted=!0,this.dispatchEvent(t,"touchstart",i))},_.prototype.onTouchEnd=function(t){var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processTouchEnd,this.strictMode),this.emit("touchend",i)},_.prototype.processTouchEnd=function(t,i){t._touchstarted&&(t._touchstarted=!1,this.dispatchEvent(t,"touchend",i))},_.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();var i=this.fixCoord(t);this.processInteractive(this.stage,i,this.processTouchMove,this.strictMode),this.emit("touchmove",i)},_.prototype.processTouchMove=function(t,i,e){(!this.strictMode&&t._touchstarted||e)&&this.dispatchEvent(t,"touchmove",i)},_.prototype.processInteractive=function(t,i,e,s){function o(t,i,e,s){for(var n=t.childs,h=!1,r=n.length-1;r>=0;){var a=n[r--];h=!1,a.passEvent||(a.childs.length>0&&o(a,i,e,s)&&(s=!1,h=!0),s&&!h&&(h=a.contains(i.global),h&&(i.target=a,s=!1)),e(a,i,h))}return h}o(t,i,e,s)},_.prototype.dispatchEvent=function(t,i,e){if(!e.cancleBubble){e.target=t,e.type=i,t.emit(i,e);var s="on"+i;t[s]&&t[s](e)}},_.prototype.fixCoord=function(t){var s=new e,o=this.getPos(this.canvas);if(s.originalEvent=t,s.type=t.type,s.ratio=this.canvas.width/this.canvas.offsetWidth,t.touches){if(s.touches=[],t.touches.length>0){for(var n=0;n<t.touches.length;n++)s.touches[n]={},s.touches[n].global=new i((t.touches[n].pageX-o.x)*s.ratio,(t.touches[n].pageY-o.y)*s.ratio);s.global=s.touches[0].global}}else s.global.x=(t.pageX-o.x)*s.ratio,s.global.y=(t.pageY-o.y)*s.ratio;return s},_.prototype.getPos=function(t){var e=new i;if(t.offsetParent){var s=this.getPos(t.offsetParent);e.x=t.offsetLeft+s.x,e.y=t.offsetTop+s.y}else e.x=t.offsetLeft,e.y=t.offsetTop;return e},T.prototype=Object.create(x.prototype),T.prototype.proxyOn=function(){var t=this;this.interactionManager.on("click",function(i){t.emit("click",i)}),this.interactionManager.on("mousemove",function(i){t.emit("mousemove",i)}),this.interactionManager.on("mousedown",function(i){t.emit("mousedown",i)}),this.interactionManager.on("mouseout",function(i){t.emit("mouseout",i)}),this.interactionManager.on("mouseover",function(i){t.emit("mouseover",i)}),this.interactionManager.on("touchstart",function(i){t.emit("touchstart",i)}),this.interactionManager.on("touchend",function(i){t.emit("touchend",i)}),this.interactionManager.on("touchmove",function(i){t.emit("touchmove",i)}),this.interactionManager.on("mouseup",function(i){t.emit("mouseup",i)})},Object.defineProperty(T.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive!==t&&(this._interactive=t,this.interactiveOnChange())}}),T.prototype.resize=function(t,i,e,s){this.width=this.canvas.width=t,this.height=this.canvas.height=i,this.autoStyle&&e&&s&&(this.canvas.style.width=e+"px",this.canvas.style.height=s+"px")},T.prototype.render=function(){this.emit("prerender"),this.timeline(),this.autoUpdate&&this.update(),this.ctx.setTransform(1,0,0,1,0,0),this.autoClear&&this.ctx.clearRect(0,0,this.width,this.height);for(var t=0,i=this.childs.length;t<i;t++){var e=this.childs[t];e.isVisible()&&e._ready&&e.render(this.ctx)}this.emit("postrender")},T.prototype.update=function(){this.updatePosture(this.timeScale*this.snippet)},T.prototype.timeline=function(){this.snippet=Date.now()-this.pt,(null===this.pt||this.snippet>200)&&(this.pt=Date.now(),this.snippet=Date.now()-this.pt),this.enableFPS&&(this._renderTimes++,this._takeTime+=Math.max(15,this.snippet),this.fps=1e3/Math.max(15,this.snippet)>>0,this.averageFps=this._takeTime/this._renderTimes>>0),this.pt+=this.snippet},T.prototype.updatePosture=function(t){for(var i=0,e=this.childs.length;i<e;i++){var s=this.childs[i];s.updatePosture(t)}},t.TWEEN=C,t.UTILS=O,t.Texture=u,t.Loader=p,t.loaderUtil=k,t.Point=i,t.Rectangle=d,t.Polygon=l,t.Circle=f,t.Ellipse=y,t.Matrix=v,t.IDENTITY=E,t.TEMP_MATRIX=S,t.DisplayObject=m,t.Container=x,t.Sprite=w,t.Graphics=M,t.Text=b,t.Stage=T,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=jcc2d.min.js.map
