{"version":3,"sources":["jcc2d.min.js"],"names":["global","factory","exports","module","define","amd","JC","this","InteractionData","x","y","target","originalEvent","cancleBubble","ratio","type","Eventer","touchstarted","mouseDowned","listeners","Animate","opts","element","duration","living","onCompelete","onUpdate","infinity","alternate","ease","repeats","delay","wait","delayCut","progress","direction","timeScale","paused","_rt","val","Object","prototype","toString","call","Transition","from","to","PathMotion","points","attachTangent","_cacheRotate","rotation","radian","UTILS","DTR","_cacheVector","Math","cos","sin","KeyFrames","_keyframes","keys","_keyIndex","_direction","_keyConfig","keyConfig","configKey","Animation","animates","Texture","img","texture","width","height","loaded","load","Loader","textures","_total","_failed","_received","Point","Rectangle","Polygon","points_","isArray","Array","arguments","length","a","p","i","il","push","closed","Circle","radius","Ellipse","Matrix","b","c","d","tx","ty","DisplayObject","_ready","visible","worldAlpha","alpha","scaleX","scaleY","skewX","skewY","rotationCache","_sr","_cr","pivotX","pivotY","mask","parent","worldTransform","event","passEvent","bound","Container","cds","MovieClip","animations","index","frames","sy","sx","fillMode","fps","pt","nt","Sprite","upTexture","This","on","Graphics","cacheCanvas","Text","text","font","color","textAlign","textBaseline","outline","lineWidth","US","UF","Stage","canvas","bgColor","isString","document","getElementById","ctx","getContext","style","backgroundColor","autoClear","setStyle","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","initEvent","lastTime","vendors","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout","RAF","CAF","fn","off","ears","cbs","splice","once","cb","ev","emit","undefined","TWEEN","linear","t","easeIn","easeOut","easeBoth","extend","key","_swapEase","indexOf","replace","nextPose","cache","pause","start","stop","cancle","copyJSON","json","JSON","parse","stringify","PI","RTD","ks","object","isObject","isNumber","isFunction","random","min","euclideanModulo","n","m","clamp","create","update","snippet","abs","pose","_rotate","pos","getPoint","decomposeRotate","preDegree","setVal","len","rT","l","slice","r","oP","oL","oR","p1","p2","vector","nor","pi","sqrt","isNaN","acos","config","fromTo","clear","_addMove","motion","keyFrames","animate","Image","crossOrigin","src","onload","onerror","srcMap","bind","getById","defineProperty","get","loaderUtil","clone","copy","set","equals","EMPTY","contains","inside","j","xi","yi","xj","yj","intersect","dx","dy","r2","getBounds","normx","normy","fromArray","array","toArray","transpose","Float32Array","apply","newPos","applyInverse","translate","scale","rotate","angle","a1","c1","tx1","append","matrix","b1","d1","identity","setTransform","sr","cr","nsx","tan","IDENTITY","TEMP_MATRIX","isVisible","removeMask","vals","updateMe","wt","upAnimation","globalAlpha","getGlobalPos","setBound","shape","needless","addChilds","cd","removeChilds","updateTransform","updateChilds","render","save","renderMe","renderChilds","restore","noticeEvent","child","upEvent","hitTest","re","hitTestMe","point","Animator","interval","next","getFramePos","cf","row","_textureW","lintRow","lintCol","mCol","mRow","playMovie","movie","format","console","warn","arr","end","conf","_textureH","regX","regY","drawImage","draw","cached","createElement","session","_ctx","clearRect","center","_drawBack","drawCall","fillStyle","fillText","strokeStyle","strokeText","resize","w","h","sw","sh","now","addEventListener","eventProxy","preventDefault","evd","fixCoord","offset","getPos","offsetWidth","touches","pageX","pageY","obj","offsetParent","offsetLeft","offsetTop","value"],"mappings":"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","file":"jcc2d.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.JC = global.JC || {})));\n}(this, (function (exports) { 'use strict';\n\n(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function(callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n\n    window.RAF = window.requestAnimationFrame;\n    window.CAF = window.cancelAnimationFrame;\n})();\n\n/**\n * 事件系统的事件消息对象的基本类型\n *\n * @class\n * @memberof JC\n */\nfunction InteractionData(){\n    /**\n     * 转换到canvas坐标系统的事件触发点\n     *\n     * @member {JC.Point}\n     */\n    this.global = {x:-100000,y:-100000};\n\n    /**\n     * 事件源\n     *\n     * @member {JC.DisplayObject}\n     */\n    this.target = null;\n\n    /**\n     * 浏览器的原始事件对象\n     *\n     * @member {Event}\n     */\n    this.originalEvent = null;\n\n    /**\n     * 在canvas内阻止事件冒泡\n     *\n     * @member {Boolean}\n     */\n    this.cancleBubble = false;\n\n    /**\n     * canvas视窗和页面坐标的兑换比例\n     *\n     * @member {Number}\n     */\n    this.ratio = 1;\n\n    /**\n     * 事件类型\n     *\n     * @member {String}\n     */\n    this.type = '';\n}\n\n/**\n * jcc2d的事件对象的类\n *\n * @class\n * @memberof JC\n */\nfunction Eventer(){\n    /**\n     * 标记当前对象是否为touchstart触发状态\n     *\n     * @member {Boolean}\n     * @private\n     */\n    this.touchstarted = false;\n\n    /**\n     * 标记当前对象是否为mousedown触发状态\n     *\n     * @member {Boolean}\n     * @private\n     */\n    this.mouseDowned = false;\n\n    /**\n     * 事件监听列表\n     *\n     * @member {Object}\n     * @private\n     */\n    this.listeners = {};\n}\n\n/**\n * 事件对象的事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nEventer.prototype.on = function(type,fn){\n    this.listeners[type] = this.listeners[type]||[];\n    this.listeners[type].push(fn);\n};\n\n/**\n * 事件对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n */\nEventer.prototype.off = function(type,fn){\n    var ears = this.listeners;\n    var cbs = ears[ type ];\n    var i = ears[type].length;\n    if (cbs&&i>0) {\n        if(fn){\n            while (i--) {\n                if (cbs[i] === fn) {\n                    cbs.splice(i, 1);\n                }\n            }\n        }else{\n            cbs.length = 0;\n        }\n    }\n};\n\n/**\n * 事件对象的一次性事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nEventer.prototype.once = function(type,fn){\n    var This = this,\n        cb = function(ev){\n            if (fn) fn(ev);\n            This.off(type,cb);\n        };\n    this.on(type,cb);\n};\n\n/**\n * 事件对象的触发事件函数\n *\n * @param ev {JC.InteractionData} 事件类型\n */\nEventer.prototype.emit = function(ev){\n    if ( this.listeners === undefined ) return;\n    var ears = this.listeners;\n    var cbs = ears[ ev.type ];\n    if ( cbs !== undefined ) {\n        var length = cbs.length;\n        var i;\n        for ( i = 0; i < length; i ++ ) {\n            cbs[ i ].call( this, ev );\n        }\n    }\n};\n\n/* eslint no-cond-assign: \"off\" */\n\n\n/**\n * TWEEN 缓动时间运动函数集合\n *\n * ```js\n * dispay.fromTo({\n *   from: {x: 100},\n *   to: {x: 200},\n *   ease: 'linear' // 配置要调用的运动函数\n * })\n * ```\n * @namespace JC.TWEEN\n */\n\nvar TWEEN = {\n    /**\n     * 匀速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    linear: function (t, b, c, d){\n        return c*t/d + b;\n    },\n\n    /**\n     * 加速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    easeIn: function(t, b, c, d){\n        return c*(t/=d)*t + b;\n    },\n\n    /**\n     * 减速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    easeOut: function(t, b, c, d){\n        return -c *(t/=d)*(t-2) + b;\n    },\n\n    /**\n     * 先加速再减速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    easeBoth: function(t, b, c, d){\n        if ((t/=d/2) < 1) {\n            return c/2*t*t + b;\n        }\n        return -c/2 * ((--t)*(t-2) - 1) + b;\n    },\n\n    /**\n     * 扩展运动函数\n     *\n     * ```js\n     * JC.TWEEN.extend({\n     *   elasticIn: function(t, b, c, d){....},\n     *   elasticOut: function(t, b, c, d){....},\n     *   ......\n     * })\n     * ```\n     * @static\n     * @memberof JC.TWEEN\n     */\n    extend: function(opts){\n        if(!opts)return;\n        for(var key in opts){\n            if(key!=='extend'&&opts[key])this[key]=opts[key];\n        }\n    }\n};\n\n/**\n * 动画对象的基本类型\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画配置信息\n */\n\nfunction Animate(opts) {\n    this.element = opts.element || {};\n    this.duration = opts.duration || 300;\n    this.living = true;\n\n    this.onCompelete = opts.onCompelete || null;\n    this.onUpdate = opts.onUpdate || null;\n\n    this.infinity = opts.infinity || false;\n    this.alternate = opts.alternate || false;\n    this.ease = opts.ease || 'easeBoth';\n    this.repeats = opts.repeats || 0;\n    this.delay = opts.delay || 0;\n    this.wait = opts.wait || 0;\n    this.delayCut = this.delay;\n    this.progress = 0;\n    this.direction = 1;\n\n    this.timeScale = opts.timeScale || 1;\n\n    this.paused = false;\n}\nAnimate.prototype._swapEase = function() {\n    var ease = this.ease;\n    if (ease.indexOf('In') > 0) {\n        ease = ease.replace('In', 'Out');\n    } else if (ease.indexOf('Out') > 0) {\n        ease = ease.replace('Out', 'In');\n    }\n    this.ease = ease;\n};\nAnimate.prototype.nextPose = function() {\n    var cache = {};\n    for (var i in this.to) {\n        cache[i] = TWEEN[this.ease](this.progress, this.from[i], this.to[i] - this.from[i], this.duration);\n        if (this.element[i] !== undefined) this.element[i] = cache[i];\n    }\n    return cache; //this.onUpdate\n};\nAnimate.prototype.pause = function() {\n    this.paused = true;\n};\nAnimate.prototype.start = function() {\n    this.paused = false;\n};\nAnimate.prototype.stop = function() {\n    this.progress = this.duration;\n};\nAnimate.prototype.cancle = function() {\n    this.living = false;\n};\n\nfunction _rt(val){\n    return Object.prototype.toString.call(val);\n}\n\n/**\n * UTILS 引擎工具箱\n *\n * @namespace JC.UTILS\n */\nvar UTILS = {\n    /**\n     * 简单拷贝纯数据的JSON对象\n     *\n     * @static\n     * @memberof JC.UTILS\n     * @param {JSON} json 待拷贝的纯数据JSON\n     * @return {JSON} 拷贝后的纯数据JSON\n     */\n    copyJSON: function(json){\n        return JSON.parse(JSON.stringify(json));\n    },\n\n    /**\n     * 将角度转化成弧度的乘法因子\n     *\n     * @static\n     * @memberof JC.UTILS\n     * @type {number}\n     */\n    DTR: Math.PI/180,\n\n    /**\n     * 将弧度转化成角度的乘法因子\n     *\n     * @static\n     * @memberof JC.UTILS\n     * @type {number}\n     */\n    RTD: 180/Math.PI,\n\n    /**\n     * 判断变量是否为数组类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Array} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isArray: (function(){\n        var ks = _rt([]);\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为对象类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Object} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isObject: (function(){\n        var ks = _rt({});\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为字符串类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {String} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isString: (function(){\n        var ks = _rt('s');\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为数字类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Number} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isNumber: (function(){\n        var ks = _rt(1);\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为函数类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Function} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isFunction: (function(){\n        var ks = _rt(function(){});\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 强化的随机数，可以随机产生给定区间内的数字、随机输出数字内的项\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Array | Number} min 当只传入一个变量时变量应该为数字，否则为所给定区间较小的数字\n     * @param {Number} max 所给定区间较大的数字\n     * @return {ArrayItem | Number} 返回数组中大一项或者给定区间内的数字\n     */\n    random: function(min, max){\n        if (this.isArray(min))\n            return min[~~(Math.random() * min.length)];\n        if (!this.isNumber(max))\n            max = min || 1, min = 0;\n        return min + Math.random() * (max - min);\n    },\n\n    /**\n     * 阿基米德求模\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Number} n 索引\n     * @param {Number} m 模\n     * @return {Number} 映射到模长内到索引\n     */\n    euclideanModulo: function(n, m){\n        return ((n % m) + m) % m;\n    },\n\n    /**\n     * 数字区间闭合，避免超出区间\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Number} x 待闭合到值\n     * @param {Number} a 闭合区间左边界\n     * @param {Number} b 闭合区间右边界\n     * @return {Number} 闭合后的值\n     */\n    clamp: function(x, a, b) {\n        return (x < a) ? a : ((x > b) ? b : x);\n    },\n};\n\n/**\n * Transition类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画所具备的特性\n */\n\nfunction Transition(opts) {\n    Animate.call(this, opts);\n\n    this.from = opts.from;\n    this.to = opts.to;\n\n}\nTransition.prototype = Object.create(Animate.prototype);\nTransition.prototype.update = function(snippet) {\n    if(this.wait>0){\n        this.wait -= Math.abs(snippet);\n        return;\n    }\n    if (this.paused || !this.living || this.delayCut>0){\n        if (this.delayCut>0) this.delayCut -= Math.abs(snippet);\n        return;\n    }\n\n    var progress = this.progress += this.direction * this.timeScale * snippet;\n    this.progress = UTILS.clamp(progress,0,this.duration);\n\n    var pose = this.nextPose();\n\n    if (this.onUpdate) this.onUpdate(pose, this.progress / this.duration);\n\n    if ((this.direction === -1 && progress <= 0) || (this.direction === 1 && progress >= this.duration)) {\n        if (this.repeats > 0 || this.infinity) {\n            if (this.repeats > 0) --this.repeats;\n            this.delayCut = this.delay;\n            if (this.alternate) {\n                this.direction *= -1;\n                this._swapEase();\n            } else {\n                this.progress = 0;\n            }\n        } else {\n            this.living = false;\n            if(this.onCompelete) this.onCompelete(pose);\n        }\n    }\n};\n\n/**\n * PathMotion类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画所具备的特性\n */\n\nfunction PathMotion(opts) {\n    Animate.call(this, opts);\n\n    this.points = opts.points;\n    this.attachTangent = opts.attachTangent || false;\n    this._cacheRotate = this.element.rotation;\n    var radian = this._cacheRotate * UTILS.DTR;\n    this._cacheVector = { x: 10 * Math.cos(radian), y: 10 * Math.sin(radian) };\n}\nPathMotion.prototype = Object.create(Animate.prototype);\nPathMotion.prototype.update = function(snippet) {\n    if(this.wait>0){\n        this.wait -= Math.abs(snippet);\n        return;\n    }\n    if (this.paused || !this.living || this.delayCut>0){\n        if (this.delayCut>0) this.delayCut -= Math.abs(snippet);\n        return;\n    }\n\n    this.progress += this.direction * this.timeScale * snippet;\n\n    var pose = this.nextPose();\n    if (this.onUpdate) this.onUpdate(pose, this.progress / this.duration);\n\n    if ((this.direction === -1 && this.progress <= 0) || (this.direction === 1 && this.progress >= this.duration)) {\n        if (this.repeats > 0 || this.infinity) {\n            if (this.repeats > 0) --this.repeats;\n            this.delayCut = this.delay;\n            if (this.alternate) {\n                this.direction *= -1;\n                this._swapEase();\n            } else {\n                this.progress = 0;\n            }\n        } else {\n            this.living = false;\n            if (this.onCompelete) this.onCompelete();\n        }\n    }\n};\nPathMotion.prototype.nextPose = function() {\n    var cache = {},\n        _rotate = 0,\n        t = TWEEN[this.ease](this.progress, 0, 1, this.duration),\n        pos = this.getPoint(t, this.points);\n\n    cache.x = pos.x;\n    cache.y = pos.y;\n    if (this.attachTangent) {\n        _rotate = this.decomposeRotate(t, pos);\n        cache.rotation = _rotate === false ? this.preDegree : _rotate;\n        cache.rotation += this._cacheRotate;\n        if (_rotate !== false) this.preDegree = _rotate;\n    }\n    this.element.setVal(cache);\n    return cache;\n};\nPathMotion.prototype.getPoint = function(t, points) {\n    var a = points,\n        len = a.length,\n        rT = 1 - t,\n        l = a.slice(0, len - 1),\n        r = a.slice(1),\n        oP = {};\n    if (len > 3) {\n        var oL = this.getPoint(t, l),\n            oR = this.getPoint(t, r);\n        oP.x = rT * oL.x + t * oR.x;\n        oP.y = rT * oL.y + t * oR.y;\n        return oP;\n    } else {\n        oP.x = rT * rT * points[0].x + 2 * t * rT * points[1].x + t * t * points[2].x;\n        oP.y = rT * rT * points[0].y + 2 * t * rT * points[1].y + t * t * points[2].y;\n        return oP;\n    }\n};\nPathMotion.prototype.decomposeRotate = function(t, pos) {\n    var p1 = pos || this.getPoint(t, this.points);\n    var p2 = this.getPoint(t + 0.01, this.points);\n    var vector = { x: p2.x - p1.x, y: p2.y - p1.y };\n\n    var nor = this._cacheVector.x * vector.y - vector.x * this._cacheVector.y;\n    var pi = nor > 0 ? 1 : -1;\n    var cos = (vector.x * this._cacheVector.x + vector.y * this._cacheVector.y) / (Math.sqrt(vector.x * vector.x + vector.y * vector.y) * Math.sqrt(this._cacheVector.x * this._cacheVector.x + this._cacheVector.y * this._cacheVector.y));\n    if (isNaN(cos)) return false;\n    return pi * Math.acos(cos) * UTILS.RTD;\n};\n\n/**\n * KeyFrames类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画配置信息\n */\nfunction KeyFrames(opts) {\n    Animate.call(this, opts);\n\n    this._keyframes = opts.keys;\n    this._keyIndex = 0;\n    this._direction = 1;\n    this._keyConfig = opts.keyConfig;\n\n    this.configKey();\n}\nKeyFrames.prototype = Object.create(Animate.prototype);\nKeyFrames.prototype.configKey = function() {\n    this.from = this._keyframes[this._keyIndex];\n    this._keyIndex += this._direction;\n    this.to = this._keyframes[this._keyIndex];\n    var config = this._keyConfig[Math.min(this._keyIndex, this._keyIndex - this._direction)] || {};\n    this.ease = config.ease || this.ease;\n    this.duration = config.duration || this.duration;\n    this.progress = 0;\n};\nKeyFrames.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.progress += this.timeScale * snippet;\n\n    if (this.progress < this.duration) {\n        if (this.progress < 0) return;\n        var pose = this.nextPose();\n        if (this.onUpdate) this.onUpdate(pose, this.progress / this.duration, this._keyIndex);\n    } else {\n        this.element.setVal(this.to);\n        if (this.onUpdate) this.onUpdate(this.to, 1, this._keyIndex);\n        if (this._keyIndex < this._keyframes.length - 1 && this._keyIndex > 0) {\n            this.configKey();\n        } else {\n            if (this.repeats > 0 || this.infinity) {\n                if (this.repeats > 0) --this.repeats;\n                if (this.alternate) {\n                    this._direction *= -1;\n                } else {\n                    this._keyIndex = 0;\n                }\n                this.configKey();\n            } else {\n                this.living = false;\n                if (this.onCompelete) this.onCompelete();\n            }\n        }\n    }\n};\n\n/**\n * Animation类型动画对象\n *\n * @class\n * @memberof JC\n */\nfunction Animation(element) {\n    this.element = element;\n    // this.start = false;\n    this.animates = [];\n}\nAnimation.prototype.update = function(snippet) {\n    for (var i = 0; i < this.animates.length; i++) {\n        if (!this.animates[i].living) this.animates.splice(i, 1);\n        if (this.animates[i]) this.animates[i].update(snippet);\n    }\n};\nAnimation.prototype.fromTo = function(opts, clear) {\n    this.element.setVal(opts.from);\n    opts.element = this.element;\n    return this._addMove(new Transition(opts), clear);\n};\nAnimation.prototype.to = function(opts, clear) {\n    opts.from = {};\n    for (var i in opts.to) {\n        opts.from[i] = this.element[i];\n    }\n    opts.element = this.element;\n    return this._addMove(new Transition(opts), clear);\n};\nAnimation.prototype.motion = function(opts, clear) {\n    opts.element = this.element;\n    return this._addMove(new PathMotion(opts), clear);\n};\nAnimation.prototype.keyFrames = function(opts, clear) {\n    opts.element = this.element;\n    return this._addMove(new KeyFrames(opts), clear);\n};\nAnimation.prototype._addMove = function(animate, clear) {\n    if (clear) this.clear();\n    this.animates.push(animate);\n    return animate;\n};\nAnimation.prototype.clear = function() {\n    this.animates.length = 0;\n};\n\n/**\n * 图片纹理类\n *\n * @class\n * @memberof JC\n * @param {string | Image} img 图片url或者图片对象.\n * @extends JC.Eventer\n */\nfunction Texture(img){\n    Eventer.call( this );\n    this.texture = null;\n    this.width = 0;\n    this.height = 0;\n    this.loaded = false;\n\n    this.load(img);\n\n}\nTexture.prototype = Object.create( Eventer.prototype );\n\n/**\n * 尝试加载图片\n *\n * @static\n * @param {string | Image} img 图片url或者图片对象.\n * @private\n */\nTexture.prototype.load = function(img){\n    var This = this;\n    if(typeof img === 'string'){\n        this.texture = new Image();\n        this.texture.crossOrigin = '';\n        this.texture.src = img;\n        this.texture.onload = function(){\n            This.loaded = true;\n            This.emit({type: 'load'});\n        };\n        this.texture.onerror = function(){\n            This.emit({type: 'error'});\n        };\n        this.on('load',function(){\n            This.width = This.texture.width;\n            This.height = This.texture.height;\n        });\n    }\n    if(img instanceof Image && img.width*img.height>0){\n        this.texture = img;\n        this.width = img.width;\n        this.height = img.height;\n    }\n};\n\n\n\n\n/**\n * 图片资源加载器\n *\n * @class\n * @namespace JC.Loader\n * @extends JC.Eventer\n */\nfunction Loader(){\n    Eventer.call( this );\n    this.textures = {};\n    this._total = 0;\n    this._failed = 0;\n    this._received = 0;\n}\nLoader.prototype = Object.create( Eventer.prototype );\n\n/**\n * 开始加载资源\n *\n * ```js\n * var loadBox = new JC.Loader();\n * loadBox.load({\n *     aaa: 'img/xxx.png',\n *     bbb: 'img/yyy.png',\n *     ccc: 'img/zzz.png'\n * });\n * ```\n *\n * @memberof JC.Loader\n * @param {object} srcMap 配置了key－value的json格式数据\n * @return {JC.Loader} 返回本实例对象\n */\nLoader.prototype.load = function (srcMap){\n    var This = this;\n    this._total = 0;\n    this._failed = 0;\n    this._received = 0;\n    for (var src in srcMap) {\n        this._total++;\n        this.textures[src] = new Texture(srcMap[src]);\n        bind(this.textures[src]);\n    }\n\n    function bind(texture){\n        texture.on('load',function(){\n            This._received++;\n            This.emit({type: 'update'});\n            if(This._received+This._failed>=This._total)This.emit({type: 'compelete'});\n        });\n        texture.on('error',function(){\n            This._failed++;\n            This.emit({type: 'update'});\n            if(This._received+This._failed>=This._total)This.emit({type: 'compelete'});\n        });\n    }\n    return this;\n};\n\n/**\n * 从纹理图片盒子里面通过id获取纹理图片\n *\n * ```js\n * var texture = loadBox.getById('id');\n * ```\n *\n * @memberof JC.Loader\n * @param {string} id 之前加载时配置的key值\n * @return {JC.Texture} 包装出来的JC.Texture对象\n */\nLoader.prototype.getById = function (id){\n    return this.textures[id];\n};\n\n/**\n * 获取资源加载的进度\n *\n * @member progress\n * @property progress {number} 0至1之间的值\n * @memberof JC.Loader\n */\nObject.defineProperty(Texture.prototype, 'progress', {\n    get: function() {\n        return this._total===0?1:(this._received+this._failed)/this._total;\n    }\n});\n\n\n\n/**\n * 资源加载工具\n *\n * @function\n * @memberof JC\n * @param srcMap {object} key-src map\n * @return {JC.Loader}\n */\nvar loaderUtil = function(srcMap){\n    return new Loader().load(srcMap);\n};\n\n/**\n * 二维空间内坐标点类\n *\n * @class\n * @memberof JC\n * @param [x=0] {number} x轴的位置\n * @param [y=0] {number} y轴的位置\n */\nfunction Point(x, y)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n}\n\n/**\n * 克隆一这个坐标点\n *\n * @return {JC.Point} 克隆的坐标点\n */\nPoint.prototype.clone = function ()\n{\n    return new Point(this.x, this.y);\n};\n\n/**\n * 拷贝传入的坐标点来设置当前坐标点\n *\n * @param p {JC.Point}\n */\nPoint.prototype.copy = function (p) {\n    this.set(p.x, p.y);\n};\n\n/**\n * 判断坐标点是否相等\n *\n * @param p {JC.Point}\n * @returns {boolean}\n */\nPoint.prototype.equals = function (p) {\n    return (p.x === this.x) && (p.y === this.y);\n};\n\n/**\n * 设置坐标点\n *\n * @param [x=0] {number} x轴的位置\n * @param [y=0] {number} y轴的位置\n */\nPoint.prototype.set = function (x, y)\n{\n    this.x = x || 0;\n    this.y = y || ( (y !== 0) ? this.x : 0 ) ;\n};\n\n/**\n * 矩形类\n *\n * @class\n * @memberof JC\n * @param x {number} 左上角的x坐标\n * @param y {number} 左上角的y坐标\n * @param width {number} 矩形的宽度\n * @param height {number} 矩形的高度\n */\nfunction Rectangle(x, y, width, height)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.width = width || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.height = height || 0;\n}\n\n/**\n * 空矩形对象\n *\n * @static\n * @constant\n */\nRectangle.EMPTY = new Rectangle(0, 0, 0, 0);\n\n\n/**\n * 克隆一个与该举行对象同样属性的矩形\n *\n * @return {PIXI.Rectangle} 克隆出的矩形\n */\nRectangle.prototype.clone = function ()\n{\n    return new Rectangle(this.x, this.y, this.width, this.height);\n};\n\n/**\n * 检查坐标点是否在矩形区域内\n *\n * @param x {number} 坐标点的x轴位置\n * @param y {number} 坐标点的y轴位置\n * @return {boolean} 坐标点是否在矩形区域内\n */\nRectangle.prototype.contains = function (x, y)\n{\n    if (this.width <= 0 || this.height <= 0)\n    {\n        return false;\n    }\n\n    if (x >= this.x && x < this.x + this.width)\n    {\n        if (y >= this.y && y < this.y + this.height)\n        {\n            return true;\n        }\n    }\n\n    return false;\n};\n\n/**\n * @class\n * @memberof JC\n * @param points {JC.Point[]|number[]|...JC.Point|...number} 坐标点数组，可以是JC.Point类型的数组项数组，也可以是连续两个数分别代表x、y坐标的数组。\n *\n *\n *\n *\n */\nfunction Polygon(points_) {\n    var points = points_;\n\n    if (!UTILS.isArray(points)) {\n        points = new Array(arguments.length);\n\n        for (var a = 0; a < points.length; ++a) {\n            points[a] = arguments[a];\n        }\n    }\n\n    if (points[0] instanceof Point) {\n        var p = [];\n        for (var i = 0, il = points.length; i < il; i++) {\n            p.push(points[i].x, points[i].y);\n        }\n\n        points = p;\n    }\n\n    this.closed = true;\n\n    this.points = points;\n}\n\n/**\n * 克隆一个属性相同的多边型对象\n *\n * @return {PIXI.Polygon} 克隆的对象\n */\nPolygon.prototype.clone = function ()\n{\n    return new Polygon(this.points.slice());\n};\n\n/**\n * 检查坐标点是否在多边形内部\n *\n * @param x {number} 坐标点的x轴坐标\n * @param y {number} 坐标点的y轴坐标\n * @return {boolean} 是否在多边形内部\n */\nPolygon.prototype.contains = function (x, y)\n{\n    var inside = false;\n\n    var length = this.points.length / 2;\n\n    for (var i = 0, j = length - 1; i < length; j = i++)\n    {\n        var xi = this.points[i * 2], yi = this.points[i * 2 + 1],\n            xj = this.points[j * 2], yj = this.points[j * 2 + 1],\n            intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n\n        if (intersect)\n        {\n            inside = !inside;\n        }\n    }\n\n    return inside;\n};\n\n/**\n * 圆形对象\n *\n * @class\n * @memberof JC\n * @param x {number} x轴的坐标\n * @param y {number} y轴的坐标\n * @param radius {number} 圆的半径\n */\nfunction Circle(x, y, radius)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.radius = radius || 0;\n}\n\n/**\n * 克隆一个该圆对象\n *\n * @return {PIXI.Circle} 克隆出来的圆对象\n */\nCircle.prototype.clone = function ()\n{\n    return new Circle(this.x, this.y, this.radius);\n};\n\n/**\n * 检测坐标点是否在园内\n *\n * @param x {number} 坐标点的x轴坐标\n * @param y {number} 坐标点的y轴坐标\n * @return {boolean} 坐标点是否在园内\n */\nCircle.prototype.contains = function (x, y)\n{\n    if (this.radius <= 0)\n    {\n        return false;\n    }\n\n    var dx = (this.x - x),\n        dy = (this.y - y),\n        r2 = this.radius * this.radius;\n\n    dx *= dx;\n    dy *= dy;\n\n    return (dx + dy <= r2);\n};\n\n/**\n* 返回对象所占的矩形区域\n*\n* @return {PIXI.Rectangle} 矩形对象\n*/\nCircle.prototype.getBounds = function ()\n{\n    return new Rectangle(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);\n};\n\n/**\n * 椭圆对象\n *\n * @class\n * @memberof JC\n * @param x {number} x轴的坐标\n * @param y {number} y轴的坐标\n * @param width {number} 椭圆的宽度\n * @param height {number} 椭圆的高度\n */\nfunction Ellipse(x, y, width, height)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.width = width || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.height = height || 0;\n}\n\n/**\n * 克隆一个该椭圆对象\n *\n * @return {PIXI.Ellipse} 克隆出来的椭圆对象\n */\nEllipse.prototype.clone = function ()\n{\n    return new Ellipse(this.x, this.y, this.width, this.height);\n};\n\n/**\n * 检测坐标点是否在椭园内\n *\n * @param x {number} 坐标点的x轴坐标\n * @param y {number} 坐标点的y轴坐标\n * @return {boolean} 坐标点是否在椭园内\n */\nEllipse.prototype.contains = function (x, y)\n{\n    if (this.width <= 0 || this.height <= 0)\n    {\n        return false;\n    }\n\n    //normalize the coords to an ellipse with center 0,0\n    var normx = ((x - this.x) / this.width),\n        normy = ((y - this.y) / this.height);\n\n    normx *= normx;\n    normy *= normy;\n\n    return (normx + normy <= 1);\n};\n\n/**\n * 返回对象所占的矩形区域\n *\n * @return {PIXI.Rectangle} 矩形对象\n */\nEllipse.prototype.getBounds = function ()\n{\n    return new Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);\n};\n\n/**\n * 矩阵对象，用来描述和记录对象的tansform 状态信息\n *\n * @class\n * @memberof JC\n */\nfunction Matrix(){\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n}\n\n/**\n * 从数组设置一个矩阵\n *\n * @param array {number[]}\n */\nMatrix.prototype.fromArray = function(array){\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n};\n\n/**\n * 将对象的数据以数组的形式导出\n *\n * @param transpose {boolean} 是否对矩阵进行转置\n * @return {number[]} 返回数组\n */\nMatrix.prototype.toArray = function(transpose){\n    if(!this.array) this.array = new Float32Array(9);\n    var array = this.array;\n\n    if(transpose){\n        array[0] = this.a;\n        array[1] = this.b;\n        array[2] = 0;\n        array[3] = this.c;\n        array[4] = this.d;\n        array[5] = 0;\n        array[6] = this.tx;\n        array[7] = this.ty;\n        array[8] = 1;\n    }else{\n        array[0] = this.a;\n        array[1] = this.c;\n        array[2] = this.tx;\n        array[3] = this.b;\n        array[4] = this.d;\n        array[5] = this.ty;\n        array[6] = 0;\n        array[7] = 0;\n        array[8] = 1;\n    }\n    return array;\n};\n\n/**\n * 将坐标点与矩阵左乘\n *\n * @param pos {object} 原始点\n * @param newPos {object} 变换之后的点\n * @return {object} 返回数组\n */\nMatrix.prototype.apply = function(pos, newPos){\n    newPos = newPos || {};\n    newPos.x = this.a * pos.x + this.c * pos.y + this.tx;\n    newPos.y = this.b * pos.x + this.d * pos.y + this.ty;\n    return newPos;\n};\n/**\n * 将坐标点与转置矩阵左乘\n *\n * @param pos {object} 原始点\n * @param newPos {object} 变换之后的点\n * @return {object} 变换之后的点\n */\nMatrix.prototype.applyInverse = function(pos, newPos){\n    var id = 1 / (this.a * this.d + this.c * -this.b);\n    newPos.x = this.d * id * pos.x + -this.c * id * pos.y + (this.ty * this.c - this.tx * this.d) * id;\n    newPos.y = this.a * id * pos.y + -this.b * id * pos.x + (-this.ty * this.a + this.tx * this.b) * id;\n    return newPos;\n};\n/**\n * 位移操作\n *\n * @return {this}\n */\nMatrix.prototype.translate = function(x, y){\n    this.tx += x;\n    this.ty += y;\n    return this;\n};\n/**\n * 缩放操作\n *\n * @return {this}\n */\nMatrix.prototype.scale = function(x, y){\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n};\n/**\n * 旋转操作\n *\n * @return {this}\n */\nMatrix.prototype.rotate = function(angle){\n    var cos = Math.cos( angle );\n    var sin = Math.sin( angle );\n    var a1 = this.a;\n    var c1 = this.c;\n    var tx1 = this.tx;\n    this.a = a1 * cos-this.b * sin;\n    this.b = a1 * sin+this.b * cos;\n    this.c = c1 * cos-this.d * sin;\n    this.d = c1 * sin+this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n};\n/**\n * 矩阵相乘\n *\n * @return {this}\n */\nMatrix.prototype.append = function(matrix){\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n    this.a  = matrix.a * a1 + matrix.b * c1;\n    this.b  = matrix.a * b1 + matrix.b * d1;\n    this.c  = matrix.c * a1 + matrix.d * c1;\n    this.d  = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n};\n/**\n * 单位矩阵\n *\n * @return {this}\n */\nMatrix.prototype.identity = function(){\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n};\n/**\n * 快速设置矩阵各个分量\n *\n * @return {this}\n */\nMatrix.prototype.setTransform = function (x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY)\n{\n    var a, b, c, d, sr, cr, sy, nsx; // cy, cx,\n\n    sr  = Math.sin(rotation);\n    cr  = Math.cos(rotation);\n    // cy  = Math.cos(skewY);\n    sy  = Math.tan(skewY);\n    nsx = Math.tan(skewX);\n    // cx  =  Math.cos(skewX);\n\n    a  =  cr * scaleX;\n    b  =  sr * scaleX;\n    c  = -sr * scaleY;\n    d  =  cr * scaleY;\n\n    this.a  = a + sy * c;\n    this.b  = b + sy * d;\n    this.c  = nsx * a + c;\n    this.d  = nsx * b + d;\n\n    this.tx = x + ( pivotX * a + pivotY * c );\n    this.ty = y + ( pivotX * b + pivotY * d );\n\n    return this;\n};\nvar IDENTITY = new Matrix();\nvar TEMP_MATRIX = new Matrix();\n\n/**\n * 显示对象的基类\n *\n * @class\n * @memberof JC\n */\nfunction DisplayObject(){\n    /**\n     * 标记渲染对象是否就绪\n     *\n     * @member {Boolean}\n     * @private\n     */\n    this._ready = true;\n\n    /**\n     * 控制渲染对象是否显示\n     *\n     * @member {Boolean}\n     */\n    this.visible = true;\n\n    /**\n     * 世界透明度\n     *\n     * @member {Number}\n     * @private\n     */\n    this.worldAlpha = 1;\n\n    /**\n     * 控制渲染对象的透明度\n     *\n     * @member {Number}\n     */\n    this.alpha = 1;\n\n    /**\n     * 控制渲染对象的x轴的缩放\n     *\n     * @member {Number}\n     */\n    this.scaleX = 1;\n\n    /**\n     * 控制渲染对象的y轴的缩放\n     *\n     * @member {Number}\n     */\n    this.scaleY = 1;\n\n    /**\n     * 控制渲染对象的x轴的斜切\n     *\n     * @member {Number}\n     */\n    this.skewX = 0;\n\n    /**\n     * 控制渲染对象的y轴的斜切\n     *\n     * @member {Number}\n     */\n    this.skewY = 0;\n\n    /**\n     * 控制渲染对象的旋转角度\n     *\n     * @member {Number}\n     */\n    this.rotation = 0;\n    this.rotationCache = 0;\n    this._sr = 0;\n    this._cr = 1;\n\n    /**\n     * 控制渲染对象的x位置\n     *\n     * @member {Number}\n     */\n    this.x = 0;\n\n    /**\n     * 控制渲染对象的y位置\n     *\n     * @member {Number}\n     */\n    this.y = 0;\n\n    /**\n     * 控制渲染对象的相对本身x轴位置的进一步偏移，将会影响旋转中心点\n     *\n     * @member {Number}\n     */\n    this.pivotX = 0;\n\n    /**\n     * 控制渲染对象的相对本身y轴位置的进一步偏移，将会影响旋转中心点\n     *\n     * @member {Number}\n     */\n    this.pivotY = 0;\n\n    /**\n     * 对象的遮罩层\n     *\n     * @member {JC.Graphics}\n     */\n    this.mask = null;\n\n    /**\n     * 当前对象的直接父级\n     *\n     * @member {JC.Container}\n     * @private\n     */\n    this.parent = null;\n\n    /**\n     * 当前对象所应用的矩阵状态\n     *\n     * @member {JC.Matrix}\n     * @private\n     */\n    this.worldTransform = new Matrix();\n\n    /**\n     * 当前对象的事件管家\n     *\n     * @member {JC.Eventer}\n     * @private\n     */\n    this.event = new Eventer();\n\n    /**\n     * 当前对象是否穿透自身的事件监测\n     *\n     * @member {Boolean}\n     */\n    this.passEvent = false;\n\n    /**\n     * 当前对象的事件监测边界\n     *\n     * @member {JC.Shape}\n     * @private\n     */\n    this.bound = null;\n\n\n    /**\n     * 当前对象的动画管家\n     *\n     * @member {Array}\n     * @private\n     */\n    this.Animation = new Animation(this);\n}\n\n/**\n * 对渲染对象进行x、y轴同时缩放\n *\n * @member {number}\n * @name scale\n * @memberof JC.DisplayObject#\n */\nObject.defineProperty(DisplayObject.prototype, 'scale', {\n    get: function() {\n        return this.scaleX;\n    },\n    set: function(scale) {\n        this.scaleX = this.scaleY = scale;\n    }\n});\n\n/**\n * fromTo动画，指定动画的启始位置和结束位置\n *\n * ```js\n * dispay.fromTo({\n *   from: {x: 100},\n *   to: {x: 200},\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param [opts] {object} 动画配置参数\n * @param [opts.from] {json} json格式，设置对象的起始位置和起始姿态等\n * @param [opts.to] {json} json格式，设置对象的结束位置和结束姿态等\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.fromTo = function(opts,clear){\n    return this.Animation.fromTo(opts,clear);\n};\n\n/**\n * to动画，物体当前位置为动画的启始位置，只需制定动画的结束位置\n *\n * ```js\n * dispay.to({\n *   to: {x: 200},\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param [opts] {object} 动画配置参数\n * @param [opts.to] {json} json格式，设置对象的结束位置和结束姿态等\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.to = function(opts,clear){\n    return this.Animation.to(opts,clear);\n};\n\n/**\n * motion动画，让物体按照设定好的曲线运动\n *\n * ```js\n * dispay.motion({\n *   points: [{x: 0,y: 0}, {x: 30,y: 20}, {x: -50,y: -40}, {x: 50,y: 90}], // path路径，数组首尾的分别为贝塞尔曲线的起始点和结束点，其余为控制点\n *   attachTangent: true, // 物体是否捕获切线方向\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){}, // 动画更新回调\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n * @param [opts] {object} 动画配置参数\n * @param [opts.points] {Array} path路径，数组首尾的分别为贝塞尔曲线的起始点和结束点，其余为控制点\n * @param [opts.attachTangent] {Boolean} 物体是否捕获切线方向\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.motion = function(opts,clear){\n    return this.Animation.motion(opts,clear);\n};\n\n/**\n * keyFrames动画，设置物体动画的keyframe，可以为相邻的两个keyFrames之前配置差值时间及时间函数\n *\n * ```js\n * dispay.keyFrames({\n *   keys: [{x:-100,y:-200,rotation:0},{x:100,y:-200,rotation:-180},{x:-100,y:200,rotation:90}],\n *   keyConfig: [{ease:'elasticIn',duration: 1000},{ease:'backIn',duration: 1000}],\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param [opts] {object} 动画配置参数\n * @param [opts.keys] {json} 配置关键帧的位置、姿态\n * @param [opts.keyConfig] {json} 相邻两个关键帧之间的动画运动配置\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.keyFrames = function(opts,clear){\n    return this.Animation.keyFrames(opts,clear);\n};\n\n/**\n * 检查对象是否可见\n *\n * @method isVisible\n * @private\n */\nDisplayObject.prototype.isVisible = function(){\n    return !!(this.visible && this.alpha>0 && this.scaleX*this.scaleY!==0);\n};\n\n/**\n * 移除对象上的遮罩\n *\n */\nDisplayObject.prototype.removeMask = function(){\n    this.mask = null;\n};\n\n/**\n * 设置对象上的属性值\n *\n * @method setVal\n * @private\n */\nDisplayObject.prototype.setVal = function(vals){\n    if(vals===undefined)return;\n    for(var key in vals){\n        if(this[key]===undefined){\n            continue;\n        }else{\n            this[key] = vals[key];\n        }\n    }\n};\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nDisplayObject.prototype.updateMe = function(){\n    var pt = this.parent.worldTransform;\n    var wt = this.worldTransform;\n\n    var a, b, c, d, tx, ty;\n\n    if(this.skewX || this.skewY){\n\n        TEMP_MATRIX.setTransform(\n            this.x,\n            this.y,\n            this.pivotX,\n            this.pivotY,\n            this.scaleX,\n            this.scaleY,\n            this.rotation * UTILS.DTR,\n            this.skewX * UTILS.DTR,\n            this.skewY * UTILS.DTR\n        );\n\n        wt.a  = TEMP_MATRIX.a  * pt.a + TEMP_MATRIX.b  * pt.c;\n        wt.b  = TEMP_MATRIX.a  * pt.b + TEMP_MATRIX.b  * pt.d;\n        wt.c  = TEMP_MATRIX.c  * pt.a + TEMP_MATRIX.d  * pt.c;\n        wt.d  = TEMP_MATRIX.c  * pt.b + TEMP_MATRIX.d  * pt.d;\n        wt.tx = TEMP_MATRIX.tx * pt.a + TEMP_MATRIX.ty * pt.c + pt.tx;\n        wt.ty = TEMP_MATRIX.tx * pt.b + TEMP_MATRIX.ty * pt.d + pt.ty;\n    }else{\n        if(this.rotation % 360){\n            if(this.rotation !== this.rotationCache){\n                this.rotationCache = this.rotation;\n                this._sr = Math.sin(this.rotation * UTILS.DTR);\n                this._cr = Math.cos(this.rotation * UTILS.DTR);\n            }\n\n            a  =  this._cr * this.scaleX;\n            b  =  this._sr * this.scaleX;\n            c  = -this._sr * this.scaleY;\n            d  =  this._cr * this.scaleY;\n            tx =  this.x;\n            ty =  this.y;\n\n            if(this.pivotX || this.pivotY){\n                tx -= this.pivotX * a + this.pivotY * c;\n                ty -= this.pivotX * b + this.pivotY * d;\n            }\n            wt.a  = a  * pt.a + b  * pt.c;\n            wt.b  = a  * pt.b + b  * pt.d;\n            wt.c  = c  * pt.a + d  * pt.c;\n            wt.d  = c  * pt.b + d  * pt.d;\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n        }else{\n            a  = this.scaleX;\n            d  = this.scaleY;\n\n            tx = this.x - this.pivotX * a;\n            ty = this.y - this.pivotY * d;\n\n            wt.a  = a  * pt.a;\n            wt.b  = a  * pt.b;\n            wt.c  = d  * pt.c;\n            wt.d  = d  * pt.d;\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n        }\n    }\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n};\n\n/**\n * 更新对象本身的动画\n *\n * @method upAnimation\n * @private\n */\nDisplayObject.prototype.upAnimation = function(snippet){\n    this.Animation.update(snippet);\n};\n\n/**\n * 设置矩阵和透明度到当前绘图上下文\n *\n * @method setTransform\n * @private\n */\nDisplayObject.prototype.setTransform = function(ctx){\n    var matrix = this.worldTransform;\n    ctx.globalAlpha = this.worldAlpha;\n    ctx.setTransform(matrix.a,matrix.b,matrix.c,matrix.d,matrix.tx,matrix.ty);\n};\n\n/**\n * 获取物体相对于canvas世界坐标系的坐标位置\n *\n * @return {object}\n */\nDisplayObject.prototype.getGlobalPos = function(){\n    return {x: this.worldTransform.tx,y: this.worldTransform.ty};\n};\n\n/**\n * 显示对象的事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nDisplayObject.prototype.on = function(type,fn){\n    this.event.on(type,fn);\n};\n\n/**\n * 显示对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n */\nDisplayObject.prototype.off = function(type,fn){\n    this.event.off(type,fn);\n};\n\n/**\n * 显示对象的一次性事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nDisplayObject.prototype.once = function(type,fn){\n    this.event.once(type,fn);\n};\n\n/**\n * 设置显示对象的监测区域\n *\n * @param shape {JC.Polygon|JC.Rectangle} JC内置形状类型的实例\n * @param needless {boolean} 当该值为true，当且仅当this.bound为空时才会更新点击区域。默认为false，总是更新点击区域。\n * @return {Array}\n */\nDisplayObject.prototype.setBound = function (shape,needless){\n    if(this.bound !== null && needless)return;\n    this.bound = shape;\n};\n\n/**\n * 显示对象容器，继承至DisplayObject\n *\n * ```js\n * var container = new JC.Container();\n * container.addChilds(sprite);\n * ```\n *\n * @class\n * @extends JC.DisplayObject\n * @memberof JC\n */\nfunction Container(){\n    DisplayObject.call( this );\n\n    /**\n     * 渲染对象的列表\n     *\n     * @member {Array}\n     */\n    this.cds = [];\n\n    /**\n     * 自身及后代动画的缩放比例\n     *\n     * @member {Number}\n     */\n    this.timeScale = 1;\n\n    /**\n     * 是否暂停自身的动画\n     *\n     * @member {Boolean}\n     */\n    this.paused = false;\n}\nContainer.prototype = Object.create( DisplayObject.prototype );\n\n/**\n * 向容器添加一个物体\n *\n * ```js\n * container.addChilds(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param child {JC.Container}\n * @return {JC.Container}\n */\nContainer.prototype.addChilds = function (cd){\n    if(cd === undefined)return cd;\n    var l = arguments.length;\n    if(l > 1){\n        for (var i=0; i<l; i++) { this.addChilds(arguments[i]); }\n        return arguments[l-1];\n    }\n    if(cd.parent){ cd.parent.removeChilds(cd); }\n    cd.parent = this;\n    this.cds.push(cd);\n    return cd;\n};\n/**\n * 从容器移除一个物体\n *\n * ```js\n * container.removeChilds(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param child {JC.Container}\n * @return {JC.Container}\n */\nContainer.prototype.removeChilds = function (){\n    var l = arguments.length;\n    if(l > 1){\n        for (var i=0; i<l; i++) { this.removeChilds(arguments[i]); }\n    }else if(l===1){\n        for(var a=0;a<this.cds.length;a++){\n            if(this.cds[a]===arguments[0]){\n                this.cds.splice(a,1);\n                this.cds[a].parent = null;\n                a--;\n            }\n        }\n    }\n};\n\n/**\n * 更新自身的透明度可矩阵姿态更新，并触发后代同步更新\n *\n * @method updateTransform\n * @private\n */\nContainer.prototype.updateTransform = function (snippet){\n    if (!this._ready) return;\n    snippet = this.timeScale * snippet;\n    if (!this.paused) this.upAnimation(snippet);\n    this.updateMe();\n    if (this.cds.length > 0) this.updateChilds(snippet);\n};\n\n/**\n * 调用后代的姿态更新函数\n *\n * @method updateChilds\n * @private\n */\nContainer.prototype.updateChilds = function (snippet){\n    for (var i = 0,l = this.cds.length; i < l; i++) {\n        var cd = this.cds[i];\n        cd.updateTransform(snippet);\n    }\n};\n\n/**\n * 渲染自己并触发后代渲染\n *\n * @method render\n * @private\n */\nContainer.prototype.render = function (ctx){\n    ctx.save();\n    this.setTransform(ctx);\n    if (this.mask) this.mask.render(ctx);\n    this.renderMe(ctx);\n    if (this.cds.length > 0) this.renderChilds(ctx);\n    ctx.restore();\n};\n\n/**\n * 渲染自己\n *\n * @method renderMe\n * @private\n */\nContainer.prototype.renderMe = function (){\n    return true;\n};\n\n/**\n * 调用后代的渲染\n *\n * @method renderChilds\n * @private\n */\nContainer.prototype.renderChilds = function (ctx){\n    for (var i = 0,l = this.cds.length; i < l; i++) {\n        var cd = this.cds[i];\n        if (!cd.isVisible() || !cd._ready)continue;\n        cd.render(ctx);\n    }\n};\n\n/**\n * 通知分发事件到自身及后代\n *\n * @method noticeEvent\n * @private\n */\nContainer.prototype.noticeEvent = function (ev){\n    var i = this.cds.length-1;\n    while(i>=0){\n        var child = this.cds[i];\n        if(child.visible){\n            child.noticeEvent(ev);\n            if(ev.target)break;\n        }\n        i--;\n    }\n    this.upEvent(ev);\n};\n\n/**\n * 分发事件到自身后对自身做事件检查\n *\n * @method upEvent\n * @private\n */\nContainer.prototype.upEvent = function(ev){\n    if(!this._ready)return;\n    if(ev.target||(!this.passEvent&&this.hitTest(ev))){\n        if(!ev.cancleBubble||ev.target===this){\n            if(!(this.event.listeners[ev.type]&&this.event.listeners[ev.type].length>0))return;\n            this.event.emit(ev);\n        }\n    }\n};\n\n/**\n * 碰撞监测及事件处理\n *\n * @method hitTest\n * @private\n */\nContainer.prototype.hitTest = function(ev){\n    if (ev.type==='touchmove'||ev.type==='touchend'||ev.type==='mousemove'||ev.type==='mouseup'){\n        var re = this.event.touchstarted;\n        if(re)ev.target = this;\n        if(ev.type==='touchend'||ev.type==='mouseup')this.event.touchstarted = false;\n        return re;\n    }\n    if(this.hitTestMe(ev)){\n        ev.target = this;\n        if(ev.type==='touchstart'||ev.type==='mousedown')this.event.touchstarted = true;\n        return true;\n    }\n    return false;\n};\n\n/**\n * 对自身的事件监测区域做碰撞监测\n *\n * @method hitTest\n * @private\n */\nContainer.prototype.hitTestMe = function(ev){\n    if (this.bound === null) return false;\n    var point = new Point();\n    this.worldTransform.applyInverse(ev.global, point);\n    return this.bound.contains(point.x, point.y);\n};\n\n/**\n * 暂停自身的动画进度\n *\n *\n */\nContainer.prototype.pause = function(){\n    this.paused = true;\n};\n\n/**\n * 恢复自身的动画进度\n *\n *\n */\nContainer.prototype.start = function(){\n    this.paused = false;\n};\n\n/**\n * 取消自身的所有动画\n *\n *\n */\nContainer.prototype.cancle = function(){\n    this.Animator.clear();\n};\n\n/**\n * MovieClip类型动画对象\n *\n * @class\n * @memberof JC\n * @param [element] {object} 动画对象 内部传入\n * @param [opts] {object} 动画配置信息 内部传入\n */\nfunction MovieClip(element, opts) {\n    this.element = element;\n    this.living = false;\n\n    this.onCompelete = null;\n    // this.onUpdate = null;\n\n    this.infinity = false;\n    this.alternate = false;\n    this.repeats = 0;\n\n    this.animations = opts.animations || {};\n\n    this.index = 0;\n    this.direction = 1;\n    this.frames = [];\n    this.sy = opts.sy || 0;\n    this.sx = opts.sx || 0;\n    this.fillMode = 0;\n    this.fps = 16;\n\n    this.paused = false;\n\n    this.pt = 0;\n    this.nt = 0;\n}\nMovieClip.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.nt += snippet;\n    if (this.nt - this.pt < this.interval) return;\n    this.pt = this.nt;\n    var i = this.index + this.direction;\n    if (i < this.frames.length && i >= 0) {\n        this.index = i;\n        // Do you need this handler???\n        // this.onUpdate&&this.onUpdate(this.index);\n    } else {\n        if (this.repeats > 0 || this.infinity) {\n            if (this.repeats > 0) --this.repeats;\n            if (this.alternate) {\n                this.direction *= -1;\n                this.index += this.direction;\n            } else {\n                this.direction = 1;\n                this.index = 0;\n            }\n            // Do you need this handler???\n            // this.onUpdate&&this.onUpdate(this.index);\n        } else {\n            this.living = false;\n            this.index = this.fillMode;\n            if (this.onCompelete) this.onCompelete();\n            if (this.next) this.next();\n        }\n    }\n};\nMovieClip.prototype.getFramePos = function() {\n    var pos = {\n        x: this.sx,\n        y: this.sy\n    };\n    var cf = this.frames[this.index];\n    if (cf > 0) {\n        var row = this.element._textureW / this.element.width >> 0;\n        var lintRow = this.sx / this.element.width >> 0;\n        var lintCol = this.sy / this.element.height >> 0;\n        var mCol = lintCol + (lintRow + cf) / row >> 0;\n        var mRow = (lintRow + cf) % row;\n        pos.x = mRow * this.element.width;\n        pos.y = mCol * this.element.height;\n    }\n    return pos;\n};\nMovieClip.prototype.playMovie = function(opts) {\n    this.next = null;\n    var movie = this.format(opts.movie);\n    if (!UTILS.isArray(movie)) return;\n    this.frames = movie;\n    this.index = 0;\n    this.direction = 1;\n    this.fillMode = opts.fillMode || 0;\n    this.fps = opts.fps || this.fps;\n    this.infinity = opts.infinity || false;\n    this.alternate = opts.alternate || false;\n    this.repeats = opts.repeats || 0;\n    this.living = true;\n    this.onCompelete = opts.onCompelete || null;\n};\nMovieClip.prototype.format = function(movie) {\n    if (UTILS.isString(movie)) {\n        var config = this.animations[movie];\n        if (config) {\n            return this.format(config);\n        } else {\n            console.warn(\n                '%c JC.MovieClip warn %c: you didn\\`t config %c' + movie + '%c in animations ',\n                'color: #f98165; background: #80a89e',\n                'color: #80a89e; background: #cad9d5;',\n                'color: #f98165; background: #cad9d5',\n                'color: #80a89e; background: #cad9d5'\n            );\n            return false;\n        }\n    } else if (UTILS.isArray(movie)) {\n        return movie;\n    } else if (UTILS.isObject(movie)) {\n        var arr = [];\n        for (var i = movie.start; i <= movie.end; i++) {\n            arr.push(i);\n        }\n        if (movie.next && this.animations[movie.next]) {\n            var This = this;\n            var conf = {};\n            if(UTILS.isString(movie.next) && this.animations[movie.next]){\n                conf.movie = movie.next;\n                conf.infinity = true;\n            } else if(UTILS.isObject(movie.next)) {\n                conf = movie.next;\n            }\n            if (UTILS.isString(conf.movie)) {\n                this.next = function() {\n                    This.playMovie(conf);\n                };\n            }\n        }\n        return arr;\n    }\n};\nMovieClip.prototype.pause = function() {\n    this.paused = true;\n};\nMovieClip.prototype.start = function() {\n    this.paused = false;\n};\nMovieClip.prototype.cancle = function() {\n    this.living = false;\n};\nObject.defineProperty(MovieClip.prototype, 'interval', {\n    get: function() {\n        return this.fps > 0 ? 1000 / this.fps >> 0 : 16;\n    }\n});\n\n/**\n * 位图精灵图，继承至Container\n *\n * ```js\n * var loadBox = JC.loaderUtil({\n *    frames: './images/frames.png'\n * });\n * var sprite = new JC.Sprite({\n *      texture: loadBox.getById('frames'),\n *      width: 165,\n *      height: 292,\n *      count: 38,\n *      sx: 0,\n *      sy: 0,\n *      animations: {\n *          fall: {start: 0,end: 4,next: 'stand'},\n *          fly: {start: 5,end: 9,next: 'stand'},\n *          stand: {start: 10,end: 39},\n *          walk: {start: 40,end: 59,next: 'stand'}\n *      }\n * });\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Sprite(opts){\n    Container.call( this );\n\n    this.texture = opts.texture;\n    if(this.texture.loaded){\n        this.upTexture(opts);\n    }else{\n        var This = this;\n        this._ready = false;\n        this.texture.on('load',function(){\n            This.upTexture(opts);\n            This._ready = true;\n        });\n    }\n\n    this.MovieClip = new MovieClip(this,opts);\n\n}\nSprite.prototype = Object.create( Container.prototype );\n\n/**\n * 更新纹理对象\n *\n * @method upTexture\n * @private\n */\nSprite.prototype.upTexture = function(opts){\n    this._textureW = opts.texture.width;\n    this._textureH = opts.texture.height;\n    this.width = opts.width||this._textureW;\n    this.height = opts.height||this._textureH;\n    this.regX = this.width>>1;\n    this.regY = this.height>>1;\n    this.setBound(new Rectangle(-this.regX, -this.regY, this.width, this.height),true);\n};\n\n/**\n * 更新对象的动画姿态\n *\n * @method upAnimation\n * @private\n */\nSprite.prototype.upAnimation = function(snippet){\n    this.Animation.update(snippet);\n    this.MovieClip.update(snippet);\n};\n\n/**\n * 播放逐帧动画\n *\n */\nSprite.prototype.playMovie = function(opts){\n    this.MovieClip.playMovie(opts);\n};\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nSprite.prototype.renderMe = function (ctx){\n    if (!this._ready) return;\n    var pos = this.MovieClip.getFramePos();\n    ctx.drawImage(this.texture.texture, pos.x, pos.y, this.width, this.height, -this.regX, -this.regY, this.width, this.height);\n};\n\n/**\n * 形状对象，继承至Container\n *\n *\n * ```js\n * var graphics = new JC.Graphics();\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Graphics(){\n    Container.call( this );\n    this.cacheCanvas = null;\n}\nGraphics.prototype = Object.create( Container.prototype );\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nGraphics.prototype.renderMe = function (ctx){\n    if(!this.draw)return;\n    if(this.cached||this.cache){\n        if(this.cache){\n            this.cacheCanvas = this.cacheCanvas||document.createElement('canvas');\n            this.width = this.cacheCanvas.width = this.session.width;\n            this.height = this.cacheCanvas.height = this.session.height;\n            this._ctx = this.cacheCanvas.getContext('2d');\n            this._ctx.clearRect(0,0,this.width,this.height);\n            this._ctx.save();\n            this._ctx.setTransform(1,0,0,1,this.session.center.x,this.session.center.y);\n            this._drawBack(this._ctx);\n            this._ctx.restore();\n            this.cached = true;\n            this.cache = false;\n        }\n        this.cacheCanvas&&ctx.drawImage(this.cacheCanvas, 0, 0, this.width, this.height, -this.session.center.x, -this.session.center.x, this.width, this.height);\n    }else{\n        this._drawBack(ctx);\n    }\n};\nGraphics.prototype._drawBack = function (ctx){\n    if(typeof this.draw === 'function'){\n        this.draw(ctx);\n    }else if(typeof this.draw === 'object' && typeof this.draw.render === 'function'){\n        this.draw.render(ctx);\n    }\n};\n/**\n * 图形绘制挂载函数\n *\n *```js\n *  var cacheMap = new JC.Graphics();  // 创建形状绘制对象\n *\n *  cacheMap.drawCall(function(ctx){\n *      for(var i = 50;i>0;i--){\n *          ctx.strokeStyle = COLOURS[i%COLOURS.length];\n *          ctx.beginPath();\n *          ctx.arc( 0, 0, i, 0, Math.PI*2 );\n *          ctx.stroke();\n *      }\n *  },{\n *      cache: true,\n *      session: {center: {x: 50,y: 50},width:100,height:100}\n *  });\n * ```\n *\n * @param fn {function}\n * @param opts {object}\n */\nGraphics.prototype.drawCall = function(fn,opts){\n    if(fn===undefined)return;\n    opts = opts||{};\n    this.cache = opts.cache||false;\n    this.cached = false;\n    this.session = opts.session||{center: {x: 0,y: 0},width:100,height:100};\n    this.draw = fn||null;\n};\n\n/**\n * 文本，继承至Container\n *\n *\n * ```js\n * var text = new JC.Text('JC jcc2d canvas renderer','bold 36px Arial','#f00');\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Text(text,font,color){\n    Container.call( this );\n    this.text = text.toString();\n    this.font = font || 'bold 12px Arial';\n    this.color = color || '#000000';\n\n    this.textAlign = 'center'; // start left center end right\n    this.textBaseline = 'middle'; // top bottom middle alphabetic hanging\n\n\n    this.outline = 0;\n    this.lineWidth = 1;\n\n    this.US = false; // use stroke\n    this.UF = true; // use fill\n\n    // ctx.measureText(str) 返回指定文本的宽度\n}\nText.prototype = Object.create( Container.prototype );\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nText.prototype.renderMe = function(ctx){\n    ctx.font = this.font;\n    ctx.textAlign = this.textAlign;\n    ctx.textBaseline = this.textBaseline;\n    if(this.UF){\n        ctx.fillStyle = this.color;\n        ctx.fillText(this.text,0,0);\n    }\n    if(this.US){\n        ctx.lineWidth = this.lineWidth;\n        ctx.strokeStyle = this.color;\n        ctx.strokeText(this.text,0,0);\n    }\n};\n\n/**\n * 舞台对象，继承至Container\n *\n *\n * ```js\n * var stage = new JC.Stage('demo_canvas','#fff');\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Stage(canvas,bgColor){\n    Container.call( this );\n    this.type = 'stage';\n\n    /**\n     * 场景的canvas的dom\n     *\n     * @member {CANVAS}\n     */\n    this.canvas = UTILS.isString(canvas) ? document.getElementById(canvas) : canvas;\n\n    /**\n     * 场景的canvas的绘图环境\n     *\n     * @member {context2d}\n     */\n    this.ctx = this.canvas.getContext('2d');\n    this.canvas.style.backgroundColor = bgColor || 'transparent';\n\n    /**\n     * 场景是否自动清除上一帧的像素内容\n     *\n     * @member {Boolean}\n     */\n    this.autoClear = true;\n\n    /**\n     * 场景是否应用style控制宽高\n     *\n     * @member {Boolean}\n     */\n    this.setStyle = false;\n\n    /**\n     * canvas的宽度\n     *\n     * @member {Number}\n     */\n    this.width = this.canvas.width;\n\n    /**\n     * canvas的高度\n     *\n     * @member {Number}\n     */\n    this.height = this.canvas.height;\n\n    if('imageSmoothingEnabled' in this.ctx)\n        this.ctx.imageSmoothingEnabled = true;\n    else if('webkitImageSmoothingEnabled' in this.ctx)\n        this.ctx.webkitImageSmoothingEnabled = true;\n    else if('mozImageSmoothingEnabled' in this.ctx)\n        this.ctx.mozImageSmoothingEnabled = true;\n    else if('oImageSmoothingEnabled' in this.ctx)\n        this.ctx.oImageSmoothingEnabled = true;\n\n    this.initEvent();\n\n    /**\n     * 上一次绘制的时间点\n     *\n     * @member {Number}\n     * @private\n     */\n    this.pt = null;\n\n}\nStage.prototype = Object.create( Container.prototype );\n\n/**\n * 舞台尺寸设置\n *\n *\n * @param w {number} canvas的width值\n * @param h {number} canvas的height值\n * @param sw {number} canvas的style.width值，需将舞台属性setStyle设置为true\n * @param sh {number} canvas的style.height值，需将舞台属性setStyle设置为true\n */\nStage.prototype.resize = function (w,h,sw,sh){\n    this.width = this.canvas.width = w;\n    this.height = this.canvas.height = h;\n    if(this.setStyle&&sw&&sh){\n        this.canvas.style.width = sw+'px';\n        this.canvas.style.height = sh+'px';\n    }\n};\n\n/**\n * 渲染舞台内的所有可见渲染对象\n *\n *\n */\nStage.prototype.render = function (){\n    if(this.pt===null||Date.now()-this.pt>200)this.pt = Date.now();\n    var snippet = Date.now()-this.pt;\n    snippet = snippet <= 0 ? 10: snippet;\n    this.pt += snippet;\n    this.updateChilds(this.timeScale*snippet);\n\n    this.ctx.setTransform(1,0,0,1,0,0);\n    if(this.autoClear)this.ctx.clearRect(0,0,this.width,this.height);\n    this.renderChilds(this.ctx);\n};\n\n/**\n * 初始化事件接管\n *\n *\n * @method initEvent\n * @private\n */\nStage.prototype.initEvent = function (){\n    var This = this;\n    this.canvas.addEventListener('click',function(ev){\n        This.eventProxy(ev);\n    },false);\n    this.canvas.addEventListener('touchstart',function(ev){\n        // ev.preventDefault();\n        This.eventProxy(ev);\n    },false);\n    this.canvas.addEventListener('touchmove',function(ev){\n        ev.preventDefault();\n        This.eventProxy(ev);\n    },false);\n    this.canvas.addEventListener('touchend',function(ev){\n        // ev.preventDefault();\n        This.eventProxy(ev);\n    },false);\n    this.canvas.addEventListener('mousedown',function(ev){\n        // ev.preventDefault();\n        This.eventProxy(ev);\n    },false);\n    this.canvas.addEventListener('mousemove',function(ev){\n        ev.preventDefault();\n        This.eventProxy(ev);\n    },false);\n    this.canvas.addEventListener('mouseup',function(ev){\n        // ev.preventDefault();\n        This.eventProxy(ev);\n    },false);\n};\n\n/**\n * 代理事件，并对事件做分发\n *\n *\n * @method eventProxy\n * @private\n */\nStage.prototype.eventProxy = function (ev){\n    var evd = this.fixCoord(ev);\n    var i = this.cds.length-1;\n    while(i>=0){\n        var child = this.cds[i];\n        if(child.visible){\n            child.noticeEvent(evd);\n            if(evd.target)break;\n        }\n        i--;\n    }\n};\n\n/**\n * 将全局的事件坐标点转换到canvas的坐标系\n *\n *\n * @method fixCoord\n * @private\n */\nStage.prototype.fixCoord = function (ev){\n    var evd = new InteractionData(),\n        offset = this.getPos(this.canvas);\n    evd.originalEvent = ev;\n    evd.type = ev.type;\n\n    evd.ratio = this.width/this.canvas.offsetWidth;\n    if(ev.touches){\n        evd.touches = [];\n        if(ev.touches.length>0){\n            for(var i=0;i<ev.touches.length;i++){\n                evd.touches[i] = {};\n                evd.touches[i].global = {};\n                evd.touches[i].global.x = (ev.touches[i].pageX-offset.x)*evd.ratio;\n                evd.touches[i].global.y = (ev.touches[i].pageY-offset.y)*evd.ratio;\n            }\n            evd.global = evd.touches[0].global;\n        }\n    }else{\n        evd.global.x = (ev.pageX-offset.x)*evd.ratio;\n        evd.global.y = (ev.pageY-offset.y)*evd.ratio;\n    }\n    return evd;\n};\n\n/**\n * 获取canvas相对于页面的偏移量\n *\n *\n * @method getPos\n * @private\n */\nStage.prototype.getPos = function (obj){\n    var pos={};\n    if(obj.offsetParent){\n        var p = this.getPos(obj.offsetParent);\n        pos.x = obj.offsetLeft+p.x;\n        pos.y = obj.offsetTop+p.y;\n    }else{\n        pos.x = obj.offsetLeft;\n        pos.y = obj.offsetTop;\n    }\n    return pos;\n};\n\nexports.TWEEN = TWEEN;\nexports.UTILS = UTILS;\nexports.Texture = Texture;\nexports.Loader = Loader;\nexports.loaderUtil = loaderUtil;\nexports.Point = Point;\nexports.Rectangle = Rectangle;\nexports.Polygon = Polygon;\nexports.Circle = Circle;\nexports.Ellipse = Ellipse;\nexports.Matrix = Matrix;\nexports.IDENTITY = IDENTITY;\nexports.TEMP_MATRIX = TEMP_MATRIX;\nexports.DisplayObject = DisplayObject;\nexports.Container = Container;\nexports.Sprite = Sprite;\nexports.Graphics = Graphics;\nexports.Text = Text;\nexports.Stage = Stage;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=jcc2d.js.map\n"]}