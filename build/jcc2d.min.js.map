{"version":3,"sources":["jcc2d.min.js"],"names":["global","factory","exports","module","define","amd","JC","this","Point","x","y","InteractionData","target","originalEvent","cancleBubble","ratio","type","Eventer","listeners","Animate","opts","element","duration","living","onCompelete","onUpdate","infinity","alternate","ease","repeats","delay","wait","delayCut","progress","direction","timeScale","paused","_rt","val","Object","prototype","toString","call","Transition","from","to","PathMotion","points","attachTangent","_cacheRotate","rotation","radian","UTILS","DTR","_cacheVector","Math","cos","sin","KeyFrames","_keyframes","keys","_keyIndex","_direction","_keyConfig","keyConfig","configKey","Animation","animates","Texture","img","texture","width","height","loaded","load","Loader","textures","_total","_failed","_received","Rectangle","Polygon","points_","isArray","Array","arguments","length","a","p","i","il","push","closed","Circle","radius","Ellipse","Matrix","b","c","d","tx","ty","DisplayObject","_ready","visible","worldAlpha","alpha","scaleX","scaleY","skewX","skewY","rotationCache","_sr","_cr","pivotX","pivotY","mask","parent","worldTransform","passEvent","bound","_touchstarted","_mousedowned","buttonMode","cursor","Container","childs","MovieClip","animations","index","frames","sy","sx","fillMode","fps","pt","nt","Sprite","upTexture","This","on","Graphics","cacheCanvas","Text","text","font","color","textAlign","textBaseline","outline","lineWidth","US","UF","InteractionManager","stage","canvas","autoPreventDefault","strictMode","onMouseUp","bind","processMouseUp","onMouseMove","processMouseMove","onMouseDown","processMouseDown","onTouchStart","processTouchStart","onTouchEnd","processTouchEnd","onTouchMove","processTouchMove","onMouseOut","processMouseOverOut","onMouseOver","defaultCursorStyle","currentCursorStyle","Stage","bgColor","isString","document","getElementById","ctx","getContext","style","backgroundColor","autoClear","autoUpdate","autoStyle","snippet","averageSnippet","averageFps","_takeTime","_renderTimes","enableFPS","interactionManager","_interactive","interactiveOnChange","interactive","addEvents","removeEvents","lastTime","vendors","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout","RAF","CAF","clone","copy","set","equals","evd","touches","fn","off","ears","cbs","splice","once","cb","ev","emit","undefined","TWEEN","linear","t","easeIn","easeOut","easeBoth","extend","key","_swapEase","indexOf","replace","nextPose","cache","pause","start","stop","cancle","copyJSON","json","JSON","parse","stringify","PI","RTD","ks","object","isObject","isNumber","isFunction","random","min","euclideanModulo","n","m","clamp","create","update","abs","pose","_rotate","pos","getPoint","decomposeRotate","preDegree","setVal","len","rT","l","slice","r","oP","oL","oR","p1","p2","vector","nor","pi","sqrt","isNaN","acos","config","fromTo","clear","_addMove","motion","keyFrames","animate","Image","crossOrigin","src","onload","onerror","srcMap","getById","defineProperty","get","loaderUtil","EMPTY","contains","inside","j","xi","yi","xj","yj","intersect","dx","dy","r2","getBounds","normx","normy","fromArray","array","toArray","transpose","Float32Array","apply","newPos","applyInverse","translate","scale","rotate","angle","a1","c1","tx1","append","matrix","b1","d1","identity","setTransform","sr","cr","nsx","tan","IDENTITY","TEMP_MATRIX","isVisible","removeMask","vals","updateTransform","wt","updateAnimation","globalAlpha","getGlobalPos","setBound","shape","needless","point","adds","console","error","remove","updatePosture","child","render","save","renderMe","restore","Animator","interval","next","getFramePos","cf","row","_textureW","lintRow","lintCol","mCol","mRow","playMovie","movie","format","warn","arr","end","conf","_textureH","regX","regY","drawImage","draw","cached","createElement","session","_ctx","clearRect","center","_drawBack","drawCall","fillStyle","fillText","strokeStyle","strokeText","eventsAdded","addEventListener","removeEventListener","event","eventd","fixCoord","processInteractive","displayObject","hit","dispatchEvent","_over","preventDefault","func","hitTest","process","shouldHit","cchilds","eventString","offset","getPos","offsetWidth","pageX","pageY","obj","offsetParent","offsetLeft","offsetTop","value","resize","w","h","sw","sh","timeline","now"],"mappings":"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","file":"jcc2d.min.js","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.JC = global.JC || {})));\n}(this, (function (exports) { 'use strict';\n\n(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function(callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n\n    window.RAF = window.requestAnimationFrame;\n    window.CAF = window.cancelAnimationFrame;\n})();\n\n/**\n * 二维空间内坐标点类\n *\n * @class\n * @memberof JC\n * @param [x=0] {number} x轴的位置\n * @param [y=0] {number} y轴的位置\n */\nfunction Point(x, y)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n}\n\n/**\n * 克隆一这个坐标点\n *\n * @return {JC.Point} 克隆的坐标点\n */\nPoint.prototype.clone = function ()\n{\n    return new Point(this.x, this.y);\n};\n\n/**\n * 拷贝传入的坐标点来设置当前坐标点\n *\n * @param p {JC.Point}\n */\nPoint.prototype.copy = function (p) {\n    this.set(p.x, p.y);\n};\n\n/**\n * 判断坐标点是否相等\n *\n * @param p {JC.Point}\n * @returns {boolean}\n */\nPoint.prototype.equals = function (p) {\n    return (p.x === this.x) && (p.y === this.y);\n};\n\n/**\n * 设置坐标点\n *\n * @param [x=0] {number} x轴的位置\n * @param [y=0] {number} y轴的位置\n */\nPoint.prototype.set = function (x, y)\n{\n    this.x = x || 0;\n    this.y = y || ( (y !== 0) ? this.x : 0 ) ;\n};\n\n/**\n * 事件系统的事件消息对象的基本类型\n *\n * @class\n * @memberof JC\n */\nfunction InteractionData(){\n    /**\n     * 转换到canvas坐标系统的事件触发点\n     *\n     * @member {JC.Point}\n     */\n    this.global = new Point(-100000, -100000);\n\n    /**\n     * 事件源\n     *\n     * @member {JC.DisplayObject}\n     */\n    this.target = null;\n\n    /**\n     * 浏览器的原始事件对象\n     *\n     * @member {Event}\n     */\n    this.originalEvent = null;\n\n    /**\n     * 在canvas内阻止事件冒泡\n     *\n     * @member {Boolean}\n     */\n    this.cancleBubble = false;\n\n    /**\n     * canvas视窗和页面坐标的兑换比例\n     *\n     * @member {Number}\n     */\n    this.ratio = 1;\n\n    /**\n     * 事件类型\n     *\n     * @member {String}\n     */\n    this.type = '';\n}\nInteractionData.prototype.clone = function() {\n    var evd = new InteractionData();\n    evd.originalEvent = this.originalEvent;\n    evd.ratio = this.ratio;\n\n    if (this.touches) {\n        evd.touches = [];\n        if (this.touches.length > 0) {\n            for (var i = 0; i < this.touches.length; i++) {\n                evd.touches[i] = {};\n                evd.touches[i].global = this.touches[i].global.clone();\n            }\n            evd.global = evd.touches[0].global;\n        }\n    } else {\n        evd.global = this.global.clone();\n    }\n    return evd;\n};\n\n/**\n * jcc2d的事件对象的类\n *\n * @class\n * @memberof JC\n */\nfunction Eventer() {\n    /**\n     * 标记当前对象是否为touchstart触发状态\n     *\n     * @member {Boolean}\n     * @private\n     */\n    // this.touchstarted = false;\n\n    /**\n     * 标记当前对象是否为mousedown触发状态\n     *\n     * @member {Boolean}\n     * @private\n     */\n    // this.mouseDowned = false;\n\n    /**\n     * 事件监听列表\n     *\n     * @member {Object}\n     * @private\n     */\n    this.listeners = {};\n}\n\n/**\n * 事件对象的事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nEventer.prototype.on = function(type, fn) {\n    this.listeners[type] = this.listeners[type] || [];\n    this.listeners[type].push(fn);\n};\n\n/**\n * 事件对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n */\nEventer.prototype.off = function(type, fn) {\n    var ears = this.listeners;\n    var cbs = ears[type];\n    var i = ears[type].length;\n    if (cbs && i > 0) {\n        if (fn) {\n            while (i--) {\n                if (cbs[i] === fn) {\n                    cbs.splice(i, 1);\n                }\n            }\n        } else {\n            cbs.length = 0;\n        }\n    }\n};\n\n/**\n * 事件对象的一次性事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nEventer.prototype.once = function(type, fn) {\n    var This = this,\n        cb = function(ev) {\n            if (fn) fn(ev);\n            This.off(type, cb);\n        };\n    this.on(type, cb);\n};\n\n/**\n * 事件对象的触发事件函数\n *\n * @param ev {JC.InteractionData} 事件类型\n */\nEventer.prototype.emit = function(type, ev) {\n    if (this.listeners === undefined) return;\n    var ears = this.listeners;\n    var cbs = ears[type];\n    if (cbs !== undefined) {\n        var length = cbs.length;\n        var i;\n        for (i = 0; i < length; i++) {\n            cbs[i].call(this, ev);\n        }\n    }\n};\n\n/* eslint no-cond-assign: \"off\" */\n\n\n/**\n * TWEEN 缓动时间运动函数集合\n *\n * ```js\n * dispay.fromTo({\n *   from: {x: 100},\n *   to: {x: 200},\n *   ease: 'linear' // 配置要调用的运动函数\n * })\n * ```\n * @namespace JC.TWEEN\n */\n\nvar TWEEN = {\n    /**\n     * 匀速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    linear: function (t, b, c, d){\n        return c*t/d + b;\n    },\n\n    /**\n     * 加速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    easeIn: function(t, b, c, d){\n        return c*(t/=d)*t + b;\n    },\n\n    /**\n     * 减速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    easeOut: function(t, b, c, d){\n        return -c *(t/=d)*(t-2) + b;\n    },\n\n    /**\n     * 先加速再减速运动函数\n     *\n     * @static\n     * @memberof JC.TWEEN\n     */\n    easeBoth: function(t, b, c, d){\n        if ((t/=d/2) < 1) {\n            return c/2*t*t + b;\n        }\n        return -c/2 * ((--t)*(t-2) - 1) + b;\n    },\n\n    /**\n     * 扩展运动函数\n     *\n     * ```js\n     * JC.TWEEN.extend({\n     *   elasticIn: function(t, b, c, d){....},\n     *   elasticOut: function(t, b, c, d){....},\n     *   ......\n     * })\n     * ```\n     * @static\n     * @memberof JC.TWEEN\n     */\n    extend: function(opts){\n        if(!opts)return;\n        for(var key in opts){\n            if(key!=='extend'&&opts[key])this[key]=opts[key];\n        }\n    }\n};\n\n/**\n * 动画对象的基本类型\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画配置信息\n */\n\nfunction Animate(opts) {\n    this.element = opts.element || {};\n    this.duration = opts.duration || 300;\n    this.living = true;\n\n    this.onCompelete = opts.onCompelete || null;\n    this.onUpdate = opts.onUpdate || null;\n\n    this.infinity = opts.infinity || false;\n    this.alternate = opts.alternate || false;\n    this.ease = opts.ease || 'easeBoth';\n    this.repeats = opts.repeats || 0;\n    this.delay = opts.delay || 0;\n    this.wait = opts.wait || 0;\n    this.delayCut = this.delay;\n    this.progress = 0;\n    this.direction = 1;\n\n    this.timeScale = opts.timeScale || 1;\n\n    this.paused = false;\n}\nAnimate.prototype._swapEase = function() {\n    var ease = this.ease;\n    if (ease.indexOf('In') > 0) {\n        ease = ease.replace('In', 'Out');\n    } else if (ease.indexOf('Out') > 0) {\n        ease = ease.replace('Out', 'In');\n    }\n    this.ease = ease;\n};\nAnimate.prototype.nextPose = function() {\n    var cache = {};\n    for (var i in this.to) {\n        cache[i] = TWEEN[this.ease](this.progress, this.from[i], this.to[i] - this.from[i], this.duration);\n        if (this.element[i] !== undefined) this.element[i] = cache[i];\n    }\n    return cache; //this.onUpdate\n};\nAnimate.prototype.pause = function() {\n    this.paused = true;\n};\nAnimate.prototype.start = function() {\n    this.paused = false;\n};\nAnimate.prototype.stop = function() {\n    this.progress = this.duration;\n};\nAnimate.prototype.cancle = function() {\n    this.living = false;\n};\n\nfunction _rt(val){\n    return Object.prototype.toString.call(val);\n}\n\n/**\n * UTILS 引擎工具箱\n *\n * @namespace JC.UTILS\n */\nvar UTILS = {\n    /**\n     * 简单拷贝纯数据的JSON对象\n     *\n     * @static\n     * @memberof JC.UTILS\n     * @param {JSON} json 待拷贝的纯数据JSON\n     * @return {JSON} 拷贝后的纯数据JSON\n     */\n    copyJSON: function(json){\n        return JSON.parse(JSON.stringify(json));\n    },\n\n    /**\n     * 将角度转化成弧度的乘法因子\n     *\n     * @static\n     * @memberof JC.UTILS\n     * @type {number}\n     */\n    DTR: Math.PI/180,\n\n    /**\n     * 将弧度转化成角度的乘法因子\n     *\n     * @static\n     * @memberof JC.UTILS\n     * @type {number}\n     */\n    RTD: 180/Math.PI,\n\n    /**\n     * 判断变量是否为数组类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Array} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isArray: (function(){\n        var ks = _rt([]);\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为对象类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Object} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isObject: (function(){\n        var ks = _rt({});\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为字符串类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {String} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isString: (function(){\n        var ks = _rt('s');\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为数字类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Number} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isNumber: (function(){\n        var ks = _rt(1);\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 判断变量是否为函数类型\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Function} variable 待判断的变量\n     * @return {Boolean} 判断的结果\n     */\n    isFunction: (function(){\n        var ks = _rt(function(){});\n        return function(object){\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 强化的随机数，可以随机产生给定区间内的数字、随机输出数字内的项\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Array | Number} min 当只传入一个变量时变量应该为数字，否则为所给定区间较小的数字\n     * @param {Number} max 所给定区间较大的数字\n     * @return {ArrayItem | Number} 返回数组中大一项或者给定区间内的数字\n     */\n    random: function(min, max){\n        if (this.isArray(min))\n            return min[~~(Math.random() * min.length)];\n        if (!this.isNumber(max))\n            max = min || 1, min = 0;\n        return min + Math.random() * (max - min);\n    },\n\n    /**\n     * 阿基米德求模\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Number} n 索引\n     * @param {Number} m 模\n     * @return {Number} 映射到模长内到索引\n     */\n    euclideanModulo: function(n, m){\n        return ((n % m) + m) % m;\n    },\n\n    /**\n     * 数字区间闭合，避免超出区间\n     *\n     * @static\n     * @method\n     * @memberof JC.UTILS\n     * @param {Number} x 待闭合到值\n     * @param {Number} a 闭合区间左边界\n     * @param {Number} b 闭合区间右边界\n     * @return {Number} 闭合后的值\n     */\n    clamp: function(x, a, b) {\n        return (x < a) ? a : ((x > b) ? b : x);\n    },\n};\n\n/**\n * Transition类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画所具备的特性\n */\n\nfunction Transition(opts) {\n    Animate.call(this, opts);\n\n    this.from = opts.from;\n    this.to = opts.to;\n\n}\nTransition.prototype = Object.create(Animate.prototype);\nTransition.prototype.update = function(snippet) {\n    if(this.wait>0){\n        this.wait -= Math.abs(snippet);\n        return;\n    }\n    if (this.paused || !this.living || this.delayCut>0){\n        if (this.delayCut>0) this.delayCut -= Math.abs(snippet);\n        return;\n    }\n\n    var progress = this.progress += this.direction * this.timeScale * snippet;\n    this.progress = UTILS.clamp(progress,0,this.duration);\n\n    var pose = this.nextPose();\n\n    if (this.onUpdate) this.onUpdate(pose, this.progress / this.duration);\n\n    if ((this.direction === -1 && progress <= 0) || (this.direction === 1 && progress >= this.duration)) {\n        if (this.repeats > 0 || this.infinity) {\n            if (this.repeats > 0) --this.repeats;\n            this.delayCut = this.delay;\n            if (this.alternate) {\n                this.direction *= -1;\n                this._swapEase();\n            } else {\n                this.progress = 0;\n            }\n        } else {\n            this.living = false;\n            if(this.onCompelete) this.onCompelete(pose);\n        }\n    }\n};\n\n/**\n * PathMotion类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画所具备的特性\n */\n\nfunction PathMotion(opts) {\n    Animate.call(this, opts);\n\n    this.points = opts.points;\n    this.attachTangent = opts.attachTangent || false;\n    this._cacheRotate = this.element.rotation;\n    var radian = this._cacheRotate * UTILS.DTR;\n    this._cacheVector = { x: 10 * Math.cos(radian), y: 10 * Math.sin(radian) };\n}\nPathMotion.prototype = Object.create(Animate.prototype);\nPathMotion.prototype.update = function(snippet) {\n    if(this.wait>0){\n        this.wait -= Math.abs(snippet);\n        return;\n    }\n    if (this.paused || !this.living || this.delayCut>0){\n        if (this.delayCut>0) this.delayCut -= Math.abs(snippet);\n        return;\n    }\n\n    this.progress += this.direction * this.timeScale * snippet;\n\n    var pose = this.nextPose();\n    if (this.onUpdate) this.onUpdate(pose, this.progress / this.duration);\n\n    if ((this.direction === -1 && this.progress <= 0) || (this.direction === 1 && this.progress >= this.duration)) {\n        if (this.repeats > 0 || this.infinity) {\n            if (this.repeats > 0) --this.repeats;\n            this.delayCut = this.delay;\n            if (this.alternate) {\n                this.direction *= -1;\n                this._swapEase();\n            } else {\n                this.progress = 0;\n            }\n        } else {\n            this.living = false;\n            if (this.onCompelete) this.onCompelete();\n        }\n    }\n};\nPathMotion.prototype.nextPose = function() {\n    var cache = {},\n        _rotate = 0,\n        t = TWEEN[this.ease](this.progress, 0, 1, this.duration),\n        pos = this.getPoint(t, this.points);\n\n    cache.x = pos.x;\n    cache.y = pos.y;\n    if (this.attachTangent) {\n        _rotate = this.decomposeRotate(t, pos);\n        cache.rotation = _rotate === false ? this.preDegree : _rotate;\n        cache.rotation += this._cacheRotate;\n        if (_rotate !== false) this.preDegree = _rotate;\n    }\n    this.element.setVal(cache);\n    return cache;\n};\nPathMotion.prototype.getPoint = function(t, points) {\n    var a = points,\n        len = a.length,\n        rT = 1 - t,\n        l = a.slice(0, len - 1),\n        r = a.slice(1),\n        oP = {};\n    if (len > 3) {\n        var oL = this.getPoint(t, l),\n            oR = this.getPoint(t, r);\n        oP.x = rT * oL.x + t * oR.x;\n        oP.y = rT * oL.y + t * oR.y;\n        return oP;\n    } else {\n        oP.x = rT * rT * points[0].x + 2 * t * rT * points[1].x + t * t * points[2].x;\n        oP.y = rT * rT * points[0].y + 2 * t * rT * points[1].y + t * t * points[2].y;\n        return oP;\n    }\n};\nPathMotion.prototype.decomposeRotate = function(t, pos) {\n    var p1 = pos || this.getPoint(t, this.points);\n    var p2 = this.getPoint(t + 0.01, this.points);\n    var vector = { x: p2.x - p1.x, y: p2.y - p1.y };\n\n    var nor = this._cacheVector.x * vector.y - vector.x * this._cacheVector.y;\n    var pi = nor > 0 ? 1 : -1;\n    var cos = (vector.x * this._cacheVector.x + vector.y * this._cacheVector.y) / (Math.sqrt(vector.x * vector.x + vector.y * vector.y) * Math.sqrt(this._cacheVector.x * this._cacheVector.x + this._cacheVector.y * this._cacheVector.y));\n    if (isNaN(cos)) return false;\n    return pi * Math.acos(cos) * UTILS.RTD;\n};\n\n/**\n * KeyFrames类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画配置信息\n */\nfunction KeyFrames(opts) {\n    Animate.call(this, opts);\n\n    this._keyframes = opts.keys;\n    this._keyIndex = 0;\n    this._direction = 1;\n    this._keyConfig = opts.keyConfig;\n\n    this.configKey();\n}\nKeyFrames.prototype = Object.create(Animate.prototype);\nKeyFrames.prototype.configKey = function() {\n    this.from = this._keyframes[this._keyIndex];\n    this._keyIndex += this._direction;\n    this.to = this._keyframes[this._keyIndex];\n    var config = this._keyConfig[Math.min(this._keyIndex, this._keyIndex - this._direction)] || {};\n    this.ease = config.ease || this.ease;\n    this.duration = config.duration || this.duration;\n    this.progress = 0;\n};\nKeyFrames.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.progress += this.timeScale * snippet;\n\n    if (this.progress < this.duration) {\n        if (this.progress < 0) return;\n        var pose = this.nextPose();\n        if (this.onUpdate) this.onUpdate(pose, this.progress / this.duration, this._keyIndex);\n    } else {\n        this.element.setVal(this.to);\n        if (this.onUpdate) this.onUpdate(this.to, 1, this._keyIndex);\n        if (this._keyIndex < this._keyframes.length - 1 && this._keyIndex > 0) {\n            this.configKey();\n        } else {\n            if (this.repeats > 0 || this.infinity) {\n                if (this.repeats > 0) --this.repeats;\n                if (this.alternate) {\n                    this._direction *= -1;\n                } else {\n                    this._keyIndex = 0;\n                }\n                this.configKey();\n            } else {\n                this.living = false;\n                if (this.onCompelete) this.onCompelete();\n            }\n        }\n    }\n};\n\n/**\n * Animation类型动画对象\n *\n * @class\n * @memberof JC\n */\nfunction Animation(element) {\n    this.element = element;\n    // this.start = false;\n    this.animates = [];\n}\nAnimation.prototype.update = function(snippet) {\n    for (var i = 0; i < this.animates.length; i++) {\n        if (!this.animates[i].living) this.animates.splice(i, 1);\n        if (this.animates[i]) this.animates[i].update(snippet);\n    }\n};\nAnimation.prototype.fromTo = function(opts, clear) {\n    this.element.setVal(opts.from);\n    opts.element = this.element;\n    return this._addMove(new Transition(opts), clear);\n};\nAnimation.prototype.to = function(opts, clear) {\n    opts.from = {};\n    for (var i in opts.to) {\n        opts.from[i] = this.element[i];\n    }\n    opts.element = this.element;\n    return this._addMove(new Transition(opts), clear);\n};\nAnimation.prototype.motion = function(opts, clear) {\n    opts.element = this.element;\n    return this._addMove(new PathMotion(opts), clear);\n};\nAnimation.prototype.keyFrames = function(opts, clear) {\n    opts.element = this.element;\n    return this._addMove(new KeyFrames(opts), clear);\n};\nAnimation.prototype._addMove = function(animate, clear) {\n    if (clear) this.clear();\n    this.animates.push(animate);\n    return animate;\n};\nAnimation.prototype.clear = function() {\n    this.animates.length = 0;\n};\n\n/**\n * 图片纹理类\n *\n * @class\n * @memberof JC\n * @param {string | Image} img 图片url或者图片对象.\n * @extends JC.Eventer\n */\nfunction Texture(img) {\n    Eventer.call(this);\n    this.texture = null;\n    this.width = 0;\n    this.height = 0;\n    this.loaded = false;\n\n    this.load(img);\n\n}\nTexture.prototype = Object.create(Eventer.prototype);\n\n/**\n * 尝试加载图片\n *\n * @static\n * @param {string | Image} img 图片url或者图片对象.\n * @private\n */\nTexture.prototype.load = function(img) {\n    var This = this;\n    if (typeof img === 'string') {\n        this.texture = new Image();\n        this.texture.crossOrigin = '';\n        this.texture.src = img;\n        this.texture.onload = function() {\n            This.loaded = true;\n            This.emit('load');\n        };\n        this.texture.onerror = function() {\n            This.emit('error');\n        };\n        this.on('load', function() {\n            This.width = This.texture.width;\n            This.height = This.texture.height;\n        });\n    }\n    if (img instanceof Image && img.width * img.height > 0) {\n        this.texture = img;\n        this.width = img.width;\n        this.height = img.height;\n    }\n};\n\n\n\n\n/**\n * 图片资源加载器\n *\n * @class\n * @namespace JC.Loader\n * @extends JC.Eventer\n */\nfunction Loader() {\n    Eventer.call(this);\n    this.textures = {};\n    this._total = 0;\n    this._failed = 0;\n    this._received = 0;\n}\nLoader.prototype = Object.create(Eventer.prototype);\n\n/**\n * 开始加载资源\n *\n * ```js\n * var loadBox = new JC.Loader();\n * loadBox.load({\n *     aaa: 'img/xxx.png',\n *     bbb: 'img/yyy.png',\n *     ccc: 'img/zzz.png'\n * });\n * ```\n *\n * @memberof JC.Loader\n * @param {object} srcMap 配置了key－value的json格式数据\n * @return {JC.Loader} 返回本实例对象\n */\nLoader.prototype.load = function(srcMap) {\n    var This = this;\n    this._total = 0;\n    this._failed = 0;\n    this._received = 0;\n    for (var src in srcMap) {\n        this._total++;\n        this.textures[src] = new Texture(srcMap[src]);\n        bind(this.textures[src]);\n    }\n\n    function bind(texture) {\n        texture.on('load', function() {\n            This._received++;\n            This.emit('update');\n            if (This._received + This._failed >= This._total) This.emit('compelete');\n        });\n        texture.on('error', function() {\n            This._failed++;\n            This.emit('update');\n            if (This._received + This._failed >= This._total) This.emit('compelete');\n        });\n    }\n    return this;\n};\n\n/**\n * 从纹理图片盒子里面通过id获取纹理图片\n *\n * ```js\n * var texture = loadBox.getById('id');\n * ```\n *\n * @memberof JC.Loader\n * @param {string} id 之前加载时配置的key值\n * @return {JC.Texture} 包装出来的JC.Texture对象\n */\nLoader.prototype.getById = function(id) {\n    return this.textures[id];\n};\n\n/**\n * 获取资源加载的进度\n *\n * @member progress\n * @property progress {number} 0至1之间的值\n * @memberof JC.Loader\n */\nObject.defineProperty(Texture.prototype, 'progress', {\n    get: function() {\n        return this._total === 0 ? 1 : (this._received + this._failed) / this._total;\n    }\n});\n\n\n\n/**\n * 资源加载工具\n *\n * @function\n * @memberof JC\n * @param srcMap {object} key-src map\n * @return {JC.Loader}\n */\nvar loaderUtil = function(srcMap) {\n    return new Loader().load(srcMap);\n};\n\n/**\n * 矩形类\n *\n * @class\n * @memberof JC\n * @param x {number} 左上角的x坐标\n * @param y {number} 左上角的y坐标\n * @param width {number} 矩形的宽度\n * @param height {number} 矩形的高度\n */\nfunction Rectangle(x, y, width, height)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.width = width || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.height = height || 0;\n}\n\n/**\n * 空矩形对象\n *\n * @static\n * @constant\n */\nRectangle.EMPTY = new Rectangle(0, 0, 0, 0);\n\n\n/**\n * 克隆一个与该举行对象同样属性的矩形\n *\n * @return {PIXI.Rectangle} 克隆出的矩形\n */\nRectangle.prototype.clone = function ()\n{\n    return new Rectangle(this.x, this.y, this.width, this.height);\n};\n\n/**\n * 检查坐标点是否在矩形区域内\n *\n * @param x {number} 坐标点的x轴位置\n * @param y {number} 坐标点的y轴位置\n * @return {boolean} 坐标点是否在矩形区域内\n */\nRectangle.prototype.contains = function (x, y)\n{\n    if (this.width <= 0 || this.height <= 0)\n    {\n        return false;\n    }\n\n    if (x >= this.x && x < this.x + this.width)\n    {\n        if (y >= this.y && y < this.y + this.height)\n        {\n            return true;\n        }\n    }\n\n    return false;\n};\n\n/**\n * @class\n * @memberof JC\n * @param points {JC.Point[]|number[]|...JC.Point|...number} 坐标点数组，可以是JC.Point类型的数组项数组，也可以是连续两个数分别代表x、y坐标的数组。\n *\n *\n *\n *\n */\nfunction Polygon(points_) {\n    var points = points_;\n\n    if (!UTILS.isArray(points)) {\n        points = new Array(arguments.length);\n\n        for (var a = 0; a < points.length; ++a) {\n            points[a] = arguments[a];\n        }\n    }\n\n    if (points[0] instanceof Point) {\n        var p = [];\n        for (var i = 0, il = points.length; i < il; i++) {\n            p.push(points[i].x, points[i].y);\n        }\n\n        points = p;\n    }\n\n    this.closed = true;\n\n    this.points = points;\n}\n\n/**\n * 克隆一个属性相同的多边型对象\n *\n * @return {PIXI.Polygon} 克隆的对象\n */\nPolygon.prototype.clone = function ()\n{\n    return new Polygon(this.points.slice());\n};\n\n/**\n * 检查坐标点是否在多边形内部\n *\n * @param x {number} 坐标点的x轴坐标\n * @param y {number} 坐标点的y轴坐标\n * @return {boolean} 是否在多边形内部\n */\nPolygon.prototype.contains = function (x, y)\n{\n    var inside = false;\n\n    var length = this.points.length / 2;\n\n    for (var i = 0, j = length - 1; i < length; j = i++)\n    {\n        var xi = this.points[i * 2], yi = this.points[i * 2 + 1],\n            xj = this.points[j * 2], yj = this.points[j * 2 + 1],\n            intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n\n        if (intersect)\n        {\n            inside = !inside;\n        }\n    }\n\n    return inside;\n};\n\n/**\n * 圆形对象\n *\n * @class\n * @memberof JC\n * @param x {number} x轴的坐标\n * @param y {number} y轴的坐标\n * @param radius {number} 圆的半径\n */\nfunction Circle(x, y, radius)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.radius = radius || 0;\n}\n\n/**\n * 克隆一个该圆对象\n *\n * @return {PIXI.Circle} 克隆出来的圆对象\n */\nCircle.prototype.clone = function ()\n{\n    return new Circle(this.x, this.y, this.radius);\n};\n\n/**\n * 检测坐标点是否在园内\n *\n * @param x {number} 坐标点的x轴坐标\n * @param y {number} 坐标点的y轴坐标\n * @return {boolean} 坐标点是否在园内\n */\nCircle.prototype.contains = function (x, y)\n{\n    if (this.radius <= 0)\n    {\n        return false;\n    }\n\n    var dx = (this.x - x),\n        dy = (this.y - y),\n        r2 = this.radius * this.radius;\n\n    dx *= dx;\n    dy *= dy;\n\n    return (dx + dy <= r2);\n};\n\n/**\n* 返回对象所占的矩形区域\n*\n* @return {PIXI.Rectangle} 矩形对象\n*/\nCircle.prototype.getBounds = function ()\n{\n    return new Rectangle(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);\n};\n\n/**\n * 椭圆对象\n *\n * @class\n * @memberof JC\n * @param x {number} x轴的坐标\n * @param y {number} y轴的坐标\n * @param width {number} 椭圆的宽度\n * @param height {number} 椭圆的高度\n */\nfunction Ellipse(x, y, width, height)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.width = width || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.height = height || 0;\n}\n\n/**\n * 克隆一个该椭圆对象\n *\n * @return {PIXI.Ellipse} 克隆出来的椭圆对象\n */\nEllipse.prototype.clone = function ()\n{\n    return new Ellipse(this.x, this.y, this.width, this.height);\n};\n\n/**\n * 检测坐标点是否在椭园内\n *\n * @param x {number} 坐标点的x轴坐标\n * @param y {number} 坐标点的y轴坐标\n * @return {boolean} 坐标点是否在椭园内\n */\nEllipse.prototype.contains = function (x, y)\n{\n    if (this.width <= 0 || this.height <= 0)\n    {\n        return false;\n    }\n\n    //normalize the coords to an ellipse with center 0,0\n    var normx = ((x - this.x) / this.width),\n        normy = ((y - this.y) / this.height);\n\n    normx *= normx;\n    normy *= normy;\n\n    return (normx + normy <= 1);\n};\n\n/**\n * 返回对象所占的矩形区域\n *\n * @return {PIXI.Rectangle} 矩形对象\n */\nEllipse.prototype.getBounds = function ()\n{\n    return new Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);\n};\n\n/**\n * 矩阵对象，用来描述和记录对象的tansform 状态信息\n *\n * @class\n * @memberof JC\n */\nfunction Matrix(){\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n}\n\n/**\n * 从数组设置一个矩阵\n *\n * @param array {number[]}\n */\nMatrix.prototype.fromArray = function(array){\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n};\n\n/**\n * 将对象的数据以数组的形式导出\n *\n * @param transpose {boolean} 是否对矩阵进行转置\n * @return {number[]} 返回数组\n */\nMatrix.prototype.toArray = function(transpose){\n    if(!this.array) this.array = new Float32Array(9);\n    var array = this.array;\n\n    if(transpose){\n        array[0] = this.a;\n        array[1] = this.b;\n        array[2] = 0;\n        array[3] = this.c;\n        array[4] = this.d;\n        array[5] = 0;\n        array[6] = this.tx;\n        array[7] = this.ty;\n        array[8] = 1;\n    }else{\n        array[0] = this.a;\n        array[1] = this.c;\n        array[2] = this.tx;\n        array[3] = this.b;\n        array[4] = this.d;\n        array[5] = this.ty;\n        array[6] = 0;\n        array[7] = 0;\n        array[8] = 1;\n    }\n    return array;\n};\n\n/**\n * 将坐标点与矩阵左乘\n *\n * @param pos {object} 原始点\n * @param newPos {object} 变换之后的点\n * @return {object} 返回数组\n */\nMatrix.prototype.apply = function(pos, newPos){\n    newPos = newPos || {};\n    newPos.x = this.a * pos.x + this.c * pos.y + this.tx;\n    newPos.y = this.b * pos.x + this.d * pos.y + this.ty;\n    return newPos;\n};\n/**\n * 将坐标点与转置矩阵左乘\n *\n * @param pos {object} 原始点\n * @param newPos {object} 变换之后的点\n * @return {object} 变换之后的点\n */\nMatrix.prototype.applyInverse = function(pos, newPos){\n    var id = 1 / (this.a * this.d + this.c * -this.b);\n    newPos.x = this.d * id * pos.x + -this.c * id * pos.y + (this.ty * this.c - this.tx * this.d) * id;\n    newPos.y = this.a * id * pos.y + -this.b * id * pos.x + (-this.ty * this.a + this.tx * this.b) * id;\n    return newPos;\n};\n/**\n * 位移操作\n *\n * @return {this}\n */\nMatrix.prototype.translate = function(x, y){\n    this.tx += x;\n    this.ty += y;\n    return this;\n};\n/**\n * 缩放操作\n *\n * @return {this}\n */\nMatrix.prototype.scale = function(x, y){\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n};\n/**\n * 旋转操作\n *\n * @return {this}\n */\nMatrix.prototype.rotate = function(angle){\n    var cos = Math.cos( angle );\n    var sin = Math.sin( angle );\n    var a1 = this.a;\n    var c1 = this.c;\n    var tx1 = this.tx;\n    this.a = a1 * cos-this.b * sin;\n    this.b = a1 * sin+this.b * cos;\n    this.c = c1 * cos-this.d * sin;\n    this.d = c1 * sin+this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n};\n/**\n * 矩阵相乘\n *\n * @return {this}\n */\nMatrix.prototype.append = function(matrix){\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n    this.a  = matrix.a * a1 + matrix.b * c1;\n    this.b  = matrix.a * b1 + matrix.b * d1;\n    this.c  = matrix.c * a1 + matrix.d * c1;\n    this.d  = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n};\n/**\n * 单位矩阵\n *\n * @return {this}\n */\nMatrix.prototype.identity = function(){\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n};\n/**\n * 快速设置矩阵各个分量\n *\n * @return {this}\n */\nMatrix.prototype.setTransform = function (x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY)\n{\n    var a, b, c, d, sr, cr, sy, nsx; // cy, cx,\n\n    sr  = Math.sin(rotation);\n    cr  = Math.cos(rotation);\n    // cy  = Math.cos(skewY);\n    sy  = Math.tan(skewY);\n    nsx = Math.tan(skewX);\n    // cx  =  Math.cos(skewX);\n\n    a  =  cr * scaleX;\n    b  =  sr * scaleX;\n    c  = -sr * scaleY;\n    d  =  cr * scaleY;\n\n    this.a  = a + sy * c;\n    this.b  = b + sy * d;\n    this.c  = nsx * a + c;\n    this.d  = nsx * b + d;\n\n    this.tx = x + ( pivotX * a + pivotY * c );\n    this.ty = y + ( pivotX * b + pivotY * d );\n\n    return this;\n};\nvar IDENTITY = new Matrix();\nvar TEMP_MATRIX = new Matrix();\n\n/**\n * 显示对象的基类，继承至Eventer\n *\n * @class\n * @extends JC.Eventer\n * @memberof JC\n */\nfunction DisplayObject() {\n    Eventer.call(this);\n    /**\n     * 标记渲染对象是否就绪\n     *\n     * @member {Boolean}\n     * @private\n     */\n    this._ready = true;\n\n    /**\n     * 控制渲染对象是否显示\n     *\n     * @member {Boolean}\n     */\n    this.visible = true;\n\n    /**\n     * 世界透明度\n     *\n     * @member {Number}\n     * @private\n     */\n    this.worldAlpha = 1;\n\n    /**\n     * 控制渲染对象的透明度\n     *\n     * @member {Number}\n     */\n    this.alpha = 1;\n\n    /**\n     * 控制渲染对象的x轴的缩放\n     *\n     * @member {Number}\n     */\n    this.scaleX = 1;\n\n    /**\n     * 控制渲染对象的y轴的缩放\n     *\n     * @member {Number}\n     */\n    this.scaleY = 1;\n\n    /**\n     * 控制渲染对象的x轴的斜切\n     *\n     * @member {Number}\n     */\n    this.skewX = 0;\n\n    /**\n     * 控制渲染对象的y轴的斜切\n     *\n     * @member {Number}\n     */\n    this.skewY = 0;\n\n    /**\n     * 控制渲染对象的旋转角度\n     *\n     * @member {Number}\n     */\n    this.rotation = 0;\n    this.rotationCache = 0;\n    this._sr = 0;\n    this._cr = 1;\n\n    /**\n     * 控制渲染对象的x位置\n     *\n     * @member {Number}\n     */\n    this.x = 0;\n\n    /**\n     * 控制渲染对象的y位置\n     *\n     * @member {Number}\n     */\n    this.y = 0;\n\n    /**\n     * 控制渲染对象的相对本身x轴位置的进一步偏移，将会影响旋转中心点\n     *\n     * @member {Number}\n     */\n    this.pivotX = 0;\n\n    /**\n     * 控制渲染对象的相对本身y轴位置的进一步偏移，将会影响旋转中心点\n     *\n     * @member {Number}\n     */\n    this.pivotY = 0;\n\n    /**\n     * 对象的遮罩层\n     *\n     * @member {JC.Graphics}\n     */\n    this.mask = null;\n\n    /**\n     * 当前对象的直接父级\n     *\n     * @member {JC.Container}\n     * @private\n     */\n    this.parent = null;\n\n    /**\n     * 当前对象所应用的矩阵状态\n     *\n     * @member {JC.Matrix}\n     * @private\n     */\n    this.worldTransform = new Matrix();\n\n    /**\n     * 当前对象的事件管家\n     *\n     * @member {JC.Eventer}\n     * @private\n     */\n    // this.event = new Eventer();\n\n    /**\n     * 当前对象是否穿透自身的事件监测\n     *\n     * @member {Boolean}\n     */\n    this.passEvent = false;\n\n    /**\n     * 当前对象的事件监测边界\n     *\n     * @member {JC.Shape}\n     * @private\n     */\n    this.bound = null;\n\n\n    /**\n     * 当前对象的动画管家\n     *\n     * @member {Array}\n     * @private\n     */\n    this.Animation = new Animation(this);\n\n\n    /**\n     * 标记当前对象是否为touchstart触发状态\n     *\n     * @member {Boolean}\n     * @private\n     */\n    this._touchstarted = false;\n\n    /**\n     * 标记当前对象是否为mousedown触发状态\n     *\n     * @member {Boolean}\n     * @private\n     */\n    this._mousedowned = false;\n\n    /**\n     * 渲染对象是否具备光标样式，例如 cursor\n     *\n     * @member {Boolean}\n     */\n    this.buttonMode = false;\n\n    /**\n     * 当渲染对象是按钮时所具备的光标样式\n     *\n     * @member {Boolean}\n     */\n    this.cursor = 'pointer';\n}\nDisplayObject.prototype = Object.create(Eventer.prototype);\n\n/**\n * 对渲染对象进行x、y轴同时缩放\n *\n * @member {number}\n * @name scale\n * @memberof JC.DisplayObject#\n */\nObject.defineProperty(DisplayObject.prototype, 'scale', {\n    get: function() {\n        return this.scaleX;\n    },\n    set: function(scale) {\n        this.scaleX = this.scaleY = scale;\n    }\n});\n\n/**\n * fromTo动画，指定动画的启始位置和结束位置\n *\n * ```js\n * dispay.fromTo({\n *   from: {x: 100},\n *   to: {x: 200},\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param [opts] {object} 动画配置参数\n * @param [opts.from] {json} json格式，设置对象的起始位置和起始姿态等\n * @param [opts.to] {json} json格式，设置对象的结束位置和结束姿态等\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.fromTo = function(opts, clear) {\n    return this.Animation.fromTo(opts, clear);\n};\n\n/**\n * to动画，物体当前位置为动画的启始位置，只需制定动画的结束位置\n *\n * ```js\n * dispay.to({\n *   to: {x: 200},\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param [opts] {object} 动画配置参数\n * @param [opts.to] {json} json格式，设置对象的结束位置和结束姿态等\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.to = function(opts, clear) {\n    return this.Animation.to(opts, clear);\n};\n\n/**\n * motion动画，让物体按照设定好的曲线运动\n *\n * ```js\n * dispay.motion({\n *   points: [{x: 0,y: 0}, {x: 30,y: 20}, {x: -50,y: -40}, {x: 50,y: 90}], // path路径，数组首尾的分别为贝塞尔曲线的起始点和结束点，其余为控制点\n *   attachTangent: true, // 物体是否捕获切线方向\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){}, // 动画更新回调\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n * @param [opts] {object} 动画配置参数\n * @param [opts.points] {Array} path路径，数组首尾的分别为贝塞尔曲线的起始点和结束点，其余为控制点\n * @param [opts.attachTangent] {Boolean} 物体是否捕获切线方向\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.motion = function(opts, clear) {\n    return this.Animation.motion(opts, clear);\n};\n\n/**\n * keyFrames动画，设置物体动画的keyframe，可以为相邻的两个keyFrames之前配置差值时间及时间函数\n *\n * ```js\n * dispay.keyFrames({\n *   keys: [{x:-100,y:-200,rotation:0},{x:100,y:-200,rotation:-180},{x:-100,y:200,rotation:90}],\n *   keyConfig: [{ease:'elasticIn',duration: 1000},{ease:'backIn',duration: 1000}],\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param [opts] {object} 动画配置参数\n * @param [opts.keys] {json} 配置关键帧的位置、姿态\n * @param [opts.keyConfig] {json} 相邻两个关键帧之间的动画运动配置\n * @param [opts.ease] {String} 执行动画使用的缓动函数 默认值为 easeBoth\n * @param [opts.repeats] {Number} 设置动画执行完成后再重复多少次，优先级没有infinity高\n * @param [opts.infinity] {Boolean} 设置动画无限次执行，优先级高于repeats\n * @param [opts.alternate] {Boolean} 设置动画是否偶数次回返\n * @param [opts.duration] {Number} 设置动画执行时间 默认 300ms\n * @param [opts.onUpdate] {Function} 设置动画更新时的回调函数\n * @param [opts.onCompelete] {Function} 设置动画结束时的回调函数，如果infinity为true该事件将不会触发\n * @param clear {Boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.keyFrames = function(opts, clear) {\n    return this.Animation.keyFrames(opts, clear);\n};\n\n/**\n * 检查对象是否可见\n *\n * @method isVisible\n * @private\n */\nDisplayObject.prototype.isVisible = function() {\n    return !!(this.visible && this.alpha > 0 && this.scaleX * this.scaleY !== 0);\n};\n\n/**\n * 移除对象上的遮罩\n *\n */\nDisplayObject.prototype.removeMask = function() {\n    this.mask = null;\n};\n\n/**\n * 设置对象上的属性值\n *\n * @method setVal\n * @private\n */\nDisplayObject.prototype.setVal = function(vals) {\n    if (vals === undefined) return;\n    for (var key in vals) {\n        if (this[key] === undefined) {\n            continue;\n        } else {\n            this[key] = vals[key];\n        }\n    }\n};\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateTransform\n * @private\n */\nDisplayObject.prototype.updateTransform = function() {\n    var pt = this.parent.worldTransform;\n    var wt = this.worldTransform;\n\n    var a, b, c, d, tx, ty;\n\n    if (this.skewX || this.skewY) {\n\n        TEMP_MATRIX.setTransform(\n            this.x,\n            this.y,\n            this.pivotX,\n            this.pivotY,\n            this.scaleX,\n            this.scaleY,\n            this.rotation * UTILS.DTR,\n            this.skewX * UTILS.DTR,\n            this.skewY * UTILS.DTR\n        );\n\n        wt.a = TEMP_MATRIX.a * pt.a + TEMP_MATRIX.b * pt.c;\n        wt.b = TEMP_MATRIX.a * pt.b + TEMP_MATRIX.b * pt.d;\n        wt.c = TEMP_MATRIX.c * pt.a + TEMP_MATRIX.d * pt.c;\n        wt.d = TEMP_MATRIX.c * pt.b + TEMP_MATRIX.d * pt.d;\n        wt.tx = TEMP_MATRIX.tx * pt.a + TEMP_MATRIX.ty * pt.c + pt.tx;\n        wt.ty = TEMP_MATRIX.tx * pt.b + TEMP_MATRIX.ty * pt.d + pt.ty;\n    } else {\n        if (this.rotation % 360) {\n            if (this.rotation !== this.rotationCache) {\n                this.rotationCache = this.rotation;\n                this._sr = Math.sin(this.rotation * UTILS.DTR);\n                this._cr = Math.cos(this.rotation * UTILS.DTR);\n            }\n\n            a = this._cr * this.scaleX;\n            b = this._sr * this.scaleX;\n            c = -this._sr * this.scaleY;\n            d = this._cr * this.scaleY;\n            tx = this.x;\n            ty = this.y;\n\n            if (this.pivotX || this.pivotY) {\n                tx -= this.pivotX * a + this.pivotY * c;\n                ty -= this.pivotX * b + this.pivotY * d;\n            }\n            wt.a = a * pt.a + b * pt.c;\n            wt.b = a * pt.b + b * pt.d;\n            wt.c = c * pt.a + d * pt.c;\n            wt.d = c * pt.b + d * pt.d;\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n        } else {\n            a = this.scaleX;\n            d = this.scaleY;\n\n            tx = this.x - this.pivotX * a;\n            ty = this.y - this.pivotY * d;\n\n            wt.a = a * pt.a;\n            wt.b = a * pt.b;\n            wt.c = d * pt.c;\n            wt.d = d * pt.d;\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n        }\n    }\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n};\n\n/**\n * 更新对象本身的动画\n *\n * @method updateAnimation\n * @private\n */\nDisplayObject.prototype.updateAnimation = function(snippet) {\n    this.Animation.update(snippet);\n};\n\n/**\n * 设置矩阵和透明度到当前绘图上下文\n *\n * @method setTransform\n * @private\n */\nDisplayObject.prototype.setTransform = function(ctx) {\n    var matrix = this.worldTransform;\n    ctx.globalAlpha = this.worldAlpha;\n    ctx.setTransform(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n};\n\n/**\n * 获取物体相对于canvas世界坐标系的坐标位置\n *\n * @return {object}\n */\nDisplayObject.prototype.getGlobalPos = function() {\n    return { x: this.worldTransform.tx, y: this.worldTransform.ty };\n};\n\n/**\n * 显示对象的事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\n// DisplayObject.prototype.on = function(type, fn) {\n//     this.event.on(type, fn);\n// };\n\n/**\n * 显示对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n */\n// DisplayObject.prototype.off = function(type, fn) {\n//     this.event.off(type, fn);\n// };\n\n/**\n * 显示对象的一次性事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\n// DisplayObject.prototype.once = function(type, fn) {\n//     this.event.once(type, fn);\n// };\n\n/**\n * 设置显示对象的监测区域\n *\n * @param shape {JC.Polygon|JC.Rectangle} JC内置形状类型的实例\n * @param needless {boolean} 当该值为true，当且仅当this.bound为空时才会更新点击区域。默认为false，总是更新点击区域。\n * @return {Array}\n */\nDisplayObject.prototype.setBound = function(shape, needless) {\n    if (this.bound !== null && needless) return;\n    this.bound = shape;\n};\n\n/**\n * 监测坐标点是否在多变性内\n *\n * @method contains\n * @private\n */\nDisplayObject.prototype.contains = function (global) {\n    if (this.bound === null) return false;\n    var point = new Point();\n    this.worldTransform.applyInverse(global, point);\n    return this.bound && this.bound.contains(point.x, point.y);\n};\n\n// import { Point } from '../math/Point';\n\n/**\n * 显示对象容器，继承至DisplayObject\n *\n * ```js\n * var container = new JC.Container();\n * container.addChilds(sprite);\n * ```\n *\n * @class\n * @extends JC.DisplayObject\n * @memberof JC\n */\nfunction Container() {\n    DisplayObject.call(this);\n\n    /**\n     * 渲染对象的列表\n     *\n     * @member {Array}\n     */\n    this.childs = [];\n\n    /**\n     * 自身及后代动画的缩放比例\n     *\n     * @member {Number}\n     */\n    this.timeScale = 1;\n\n    /**\n     * 是否暂停自身的动画\n     *\n     * @member {Boolean}\n     */\n    this.paused = false;\n}\nContainer.prototype = Object.create(DisplayObject.prototype);\n\n/**\n * 向容器添加一个物体\n *\n * ```js\n * container.adds(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param object {JC.Container}\n * @return {JC.Container}\n */\nContainer.prototype.adds = function(object) {\n    if (arguments.length > 1) {\n        for (var i = 0; i < arguments.length; i++) {\n            this.adds(arguments[i]);\n        }\n        return this;\n    }\n    if (object === this) {\n        console.error('adds: object can\\'t be added as a child of itself.', object);\n        return this;\n    }\n    if ((object && object instanceof Container)) {\n        if (object.parent !== null) {\n            object.parent.remove(object);\n        }\n        object.parent = this;\n        this.childs.push(object);\n    } else {\n        console.error('adds: object not an instance of Container', object);\n    }\n    return this;\n};\n\n/**\n * 从容器移除一个物体\n *\n * ```js\n * container.remove(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param object {JC.Container}\n * @return {JC.Container}\n */\nContainer.prototype.remove = function(object) {\n    if (arguments.length > 1) {\n        for (var i = 0; i < arguments.length; i++) {\n            this.remove(arguments[i]);\n        }\n    }\n    var index = this.childs.indexOf(object);\n    if (index !== -1) {\n        object.parent = null;\n        this.childs.splice(index, 1);\n    }\n};\n\n/**\n * 更新自身的透明度可矩阵姿态更新，并触发后代同步更新\n *\n * @method updatePosture\n * @private\n */\nContainer.prototype.updatePosture = function(snippet) {\n    if (!this._ready) return;\n    snippet = this.timeScale * snippet;\n    if (!this.paused) this.updateAnimation(snippet);\n    this.updateTransform();\n    // if (this.childs.length > 0) this.updateChilds(snippet);\n    for (var i = 0, l = this.childs.length; i < l; i++) {\n        var child = this.childs[i];\n        child.updatePosture(snippet);\n    }\n};\n\n/**\n * 调用后代的姿态更新函数\n *\n * @method updateChilds\n * @private\n */\n// Container.prototype.updateChilds = function(snippet) {\n//     for (var i = 0, l = this.childs.length; i < l; i++) {\n//         var cd = this.childs[i];\n//         cd.updatePosture(snippet);\n//     }\n// };\n\n/**\n * 渲染自己并触发后代渲染\n *\n * @method render\n * @private\n */\nContainer.prototype.render = function(ctx) {\n    ctx.save();\n    this.setTransform(ctx);\n    if (this.mask) this.mask.render(ctx);\n    this.renderMe(ctx);\n    // if (this.childs.length > 0) this.renderChilds(ctx);\n    for (var i = 0, l = this.childs.length; i < l; i++) {\n        var child = this.childs[i];\n        if (!child.isVisible() || !child._ready) continue;\n        child.render(ctx);\n    }\n    ctx.restore();\n};\n\n/**\n * 渲染自己\n *\n * @method renderMe\n * @private\n */\nContainer.prototype.renderMe = function() {\n    return true;\n};\n\n/**\n * 调用后代的渲染\n *\n * @method renderChilds\n * @private\n */\n// Container.prototype.renderChilds = function(ctx) {\n//     for (var i = 0, l = this.childs.length; i < l; i++) {\n//         var cd = this.childs[i];\n//         if (!cd.isVisible() || !cd._ready) continue;\n//         cd.render(ctx);\n//     }\n// };\n\n/**\n * 通知分发事件到自身及后代\n *\n * @method noticeEvent\n * @private\n */\n// Container.prototype.noticeEvent = function(ev) {\n//     var i = this.childs.length - 1;\n//     while (i >= 0) {\n//         var child = this.childs[i];\n//         if (child.visible) {\n//             child.noticeEvent(ev);\n//             if (ev.target) break;\n//         }\n//         i--;\n//     }\n//     this.upEvent(ev);\n// };\n\n/**\n * 分发事件到自身后对自身做事件检查\n *\n * @method upEvent\n * @private\n */\n// Container.prototype.upEvent = function(ev) {\n//     if (!this._ready) return;\n//     if (ev.target || (!this.passEvent && this.hitTest(ev))) {\n//         if (!ev.cancleBubble || ev.target === this) {\n//             if (!(this.event.listeners[ev.type] && this.event.listeners[ev.type].length > 0)) return;\n//             this.event.emit(ev);\n//         }\n//     }\n// };\n\n/**\n * 碰撞监测及事件处理\n *\n * @method hitTest\n * @private\n */\n// Container.prototype.hitTest = function(ev) {\n//     if (ev.type === 'touchmove' || ev.type === 'touchend' || ev.type === 'mousemove' || ev.type === 'mouseup') {\n//         var re = this.event.touchstarted;\n//         if (re) ev.target = this;\n//         if (ev.type === 'touchend' || ev.type === 'mouseup') this.event.touchstarted = false;\n//         return re;\n//     }\n//     if (this.hitTestMe(ev)) {\n//         ev.target = this;\n//         if (ev.type === 'touchstart' || ev.type === 'mousedown') this.event.touchstarted = true;\n//         return true;\n//     }\n//     return false;\n// };\n\n/**\n * 对自身的事件监测区域做碰撞监测\n *\n * @method hitTest\n * @private\n */\n// Container.prototype.hitTestMe = function(ev) {\n//     if (this.bound === null) return false;\n//     var point = new Point();\n//     this.worldTransform.applyInverse(ev.global, point);\n//     return this.bound.contains(point.x, point.y);\n// };\n\n/**\n * 暂停自身的动画进度\n *\n *\n */\nContainer.prototype.pause = function() {\n    this.paused = true;\n};\n\n/**\n * 恢复自身的动画进度\n *\n *\n */\nContainer.prototype.start = function() {\n    this.paused = false;\n};\n\n/**\n * 取消自身的所有动画\n *\n *\n */\nContainer.prototype.cancle = function() {\n    this.Animator.clear();\n};\n\n/**\n * MovieClip类型动画对象\n *\n * @class\n * @memberof JC\n * @param [element] {object} 动画对象 内部传入\n * @param [opts] {object} 动画配置信息 内部传入\n */\nfunction MovieClip(element, opts) {\n    this.element = element;\n    this.living = false;\n\n    this.onCompelete = null;\n    // this.onUpdate = null;\n\n    this.infinity = false;\n    this.alternate = false;\n    this.repeats = 0;\n\n    this.animations = opts.animations || {};\n\n    this.index = 0;\n    this.direction = 1;\n    this.frames = [];\n    this.sy = opts.sy || 0;\n    this.sx = opts.sx || 0;\n    this.fillMode = 0;\n    this.fps = 16;\n\n    this.paused = false;\n\n    this.pt = 0;\n    this.nt = 0;\n}\nMovieClip.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.nt += snippet;\n    if (this.nt - this.pt < this.interval) return;\n    this.pt = this.nt;\n    var i = this.index + this.direction;\n    if (i < this.frames.length && i >= 0) {\n        this.index = i;\n        // Do you need this handler???\n        // this.onUpdate&&this.onUpdate(this.index);\n    } else {\n        if (this.repeats > 0 || this.infinity) {\n            if (this.repeats > 0) --this.repeats;\n            if (this.alternate) {\n                this.direction *= -1;\n                this.index += this.direction;\n            } else {\n                this.direction = 1;\n                this.index = 0;\n            }\n            // Do you need this handler???\n            // this.onUpdate&&this.onUpdate(this.index);\n        } else {\n            this.living = false;\n            this.index = this.fillMode;\n            if (this.onCompelete) this.onCompelete();\n            if (this.next) this.next();\n        }\n    }\n};\nMovieClip.prototype.getFramePos = function() {\n    var pos = {\n        x: this.sx,\n        y: this.sy\n    };\n    var cf = this.frames[this.index];\n    if (cf > 0) {\n        var row = this.element._textureW / this.element.width >> 0;\n        var lintRow = this.sx / this.element.width >> 0;\n        var lintCol = this.sy / this.element.height >> 0;\n        var mCol = lintCol + (lintRow + cf) / row >> 0;\n        var mRow = (lintRow + cf) % row;\n        pos.x = mRow * this.element.width;\n        pos.y = mCol * this.element.height;\n    }\n    return pos;\n};\nMovieClip.prototype.playMovie = function(opts) {\n    this.next = null;\n    var movie = this.format(opts.movie);\n    if (!UTILS.isArray(movie)) return;\n    this.frames = movie;\n    this.index = 0;\n    this.direction = 1;\n    this.fillMode = opts.fillMode || 0;\n    this.fps = opts.fps || this.fps;\n    this.infinity = opts.infinity || false;\n    this.alternate = opts.alternate || false;\n    this.repeats = opts.repeats || 0;\n    this.living = true;\n    this.onCompelete = opts.onCompelete || null;\n};\nMovieClip.prototype.format = function(movie) {\n    if (UTILS.isString(movie)) {\n        var config = this.animations[movie];\n        if (config) {\n            return this.format(config);\n        } else {\n            console.warn(\n                '%c JC.MovieClip warn %c: you didn\\`t config %c' + movie + '%c in animations ',\n                'color: #f98165; background: #80a89e',\n                'color: #80a89e; background: #cad9d5;',\n                'color: #f98165; background: #cad9d5',\n                'color: #80a89e; background: #cad9d5'\n            );\n            return false;\n        }\n    } else if (UTILS.isArray(movie)) {\n        return movie;\n    } else if (UTILS.isObject(movie)) {\n        var arr = [];\n        for (var i = movie.start; i <= movie.end; i++) {\n            arr.push(i);\n        }\n        if (movie.next && this.animations[movie.next]) {\n            var This = this;\n            var conf = {};\n            if(UTILS.isString(movie.next) && this.animations[movie.next]){\n                conf.movie = movie.next;\n                conf.infinity = true;\n            } else if(UTILS.isObject(movie.next)) {\n                conf = movie.next;\n            }\n            if (UTILS.isString(conf.movie)) {\n                this.next = function() {\n                    This.playMovie(conf);\n                };\n            }\n        }\n        return arr;\n    }\n};\nMovieClip.prototype.pause = function() {\n    this.paused = true;\n};\nMovieClip.prototype.start = function() {\n    this.paused = false;\n};\nMovieClip.prototype.cancle = function() {\n    this.living = false;\n};\nObject.defineProperty(MovieClip.prototype, 'interval', {\n    get: function() {\n        return this.fps > 0 ? 1000 / this.fps >> 0 : 16;\n    }\n});\n\n/**\n * 位图精灵图，继承至Container\n *\n * ```js\n * var loadBox = JC.loaderUtil({\n *    frames: './images/frames.png'\n * });\n * var sprite = new JC.Sprite({\n *      texture: loadBox.getById('frames'),\n *      width: 165,\n *      height: 292,\n *      count: 38,\n *      sx: 0,\n *      sy: 0,\n *      animations: {\n *          fall: {start: 0,end: 4,next: 'stand'},\n *          fly: {start: 5,end: 9,next: 'stand'},\n *          stand: {start: 10,end: 39},\n *          walk: {start: 40,end: 59,next: 'stand'}\n *      }\n * });\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Sprite(opts){\n    Container.call( this );\n\n    this.texture = opts.texture;\n    if(this.texture.loaded){\n        this.upTexture(opts);\n    }else{\n        var This = this;\n        this._ready = false;\n        this.texture.on('load',function(){\n            This.upTexture(opts);\n            This._ready = true;\n        });\n    }\n\n    this.MovieClip = new MovieClip(this,opts);\n\n}\nSprite.prototype = Object.create( Container.prototype );\n\n/**\n * 更新纹理对象\n *\n * @method upTexture\n * @private\n */\nSprite.prototype.upTexture = function(opts){\n    this._textureW = opts.texture.width;\n    this._textureH = opts.texture.height;\n    this.width = opts.width||this._textureW;\n    this.height = opts.height||this._textureH;\n    this.regX = this.width>>1;\n    this.regY = this.height>>1;\n    this.setBound(new Rectangle(-this.regX, -this.regY, this.width, this.height),true);\n};\n\n/**\n * 更新对象的动画姿态\n *\n * @method upAnimation\n * @private\n */\nSprite.prototype.updateAnimation = function(snippet){\n    this.Animation.update(snippet);\n    this.MovieClip.update(snippet);\n};\n\n/**\n * 播放逐帧动画\n *\n */\nSprite.prototype.playMovie = function(opts){\n    this.MovieClip.playMovie(opts);\n};\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nSprite.prototype.renderMe = function (ctx){\n    if (!this._ready) return;\n    var pos = this.MovieClip.getFramePos();\n    ctx.drawImage(this.texture.texture, pos.x, pos.y, this.width, this.height, -this.regX, -this.regY, this.width, this.height);\n};\n\n/**\n * 形状对象，继承至Container\n *\n *\n * ```js\n * var graphics = new JC.Graphics();\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Graphics(){\n    Container.call( this );\n    this.cacheCanvas = null;\n}\nGraphics.prototype = Object.create( Container.prototype );\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nGraphics.prototype.renderMe = function (ctx){\n    if(!this.draw)return;\n    if(this.cached||this.cache){\n        if(this.cache){\n            this.cacheCanvas = this.cacheCanvas||document.createElement('canvas');\n            this.width = this.cacheCanvas.width = this.session.width;\n            this.height = this.cacheCanvas.height = this.session.height;\n            this._ctx = this.cacheCanvas.getContext('2d');\n            this._ctx.clearRect(0,0,this.width,this.height);\n            this._ctx.save();\n            this._ctx.setTransform(1,0,0,1,this.session.center.x,this.session.center.y);\n            this._drawBack(this._ctx);\n            this._ctx.restore();\n            this.cached = true;\n            this.cache = false;\n        }\n        this.cacheCanvas&&ctx.drawImage(this.cacheCanvas, 0, 0, this.width, this.height, -this.session.center.x, -this.session.center.x, this.width, this.height);\n    }else{\n        this._drawBack(ctx);\n    }\n};\nGraphics.prototype._drawBack = function (ctx){\n    if(typeof this.draw === 'function'){\n        this.draw(ctx);\n    }else if(typeof this.draw === 'object' && typeof this.draw.render === 'function'){\n        this.draw.render(ctx);\n    }\n};\n/**\n * 图形绘制挂载函数\n *\n *```js\n *  var cacheMap = new JC.Graphics();  // 创建形状绘制对象\n *\n *  cacheMap.drawCall(function(ctx){\n *      for(var i = 50;i>0;i--){\n *          ctx.strokeStyle = COLOURS[i%COLOURS.length];\n *          ctx.beginPath();\n *          ctx.arc( 0, 0, i, 0, Math.PI*2 );\n *          ctx.stroke();\n *      }\n *  },{\n *      cache: true,\n *      session: {center: {x: 50,y: 50},width:100,height:100}\n *  });\n * ```\n *\n * @param fn {function}\n * @param opts {object}\n */\nGraphics.prototype.drawCall = function(fn,opts){\n    if(fn===undefined)return;\n    opts = opts||{};\n    this.cache = opts.cache||false;\n    this.cached = false;\n    this.session = opts.session||{center: {x: 0,y: 0},width:100,height:100};\n    this.draw = fn||null;\n};\n\n/**\n * 文本，继承至Container\n *\n *\n * ```js\n * var text = new JC.Text('JC jcc2d canvas renderer','bold 36px Arial','#f00');\n * ```\n *\n * @class\n * @extends JC.Container\n * @memberof JC\n */\nfunction Text(text,font,color){\n    Container.call( this );\n    this.text = text.toString();\n    this.font = font || 'bold 12px Arial';\n    this.color = color || '#000000';\n\n    this.textAlign = 'center'; // start left center end right\n    this.textBaseline = 'middle'; // top bottom middle alphabetic hanging\n\n\n    this.outline = 0;\n    this.lineWidth = 1;\n\n    this.US = false; // use stroke\n    this.UF = true; // use fill\n\n    // ctx.measureText(str) 返回指定文本的宽度\n}\nText.prototype = Object.create( Container.prototype );\n\n/**\n * 更新对象本身的矩阵姿态以及透明度\n *\n * @method updateMe\n * @private\n */\nText.prototype.renderMe = function(ctx){\n    ctx.font = this.font;\n    ctx.textAlign = this.textAlign;\n    ctx.textBaseline = this.textBaseline;\n    if(this.UF){\n        ctx.fillStyle = this.color;\n        ctx.fillText(this.text,0,0);\n    }\n    if(this.US){\n        ctx.lineWidth = this.lineWidth;\n        ctx.strokeStyle = this.color;\n        ctx.strokeText(this.text,0,0);\n    }\n};\n\nfunction InteractionManager(stage) {\n    Eventer.call(this);\n    this.stage = stage;\n\n    this.canvas = this.stage.canvas;\n\n    this.autoPreventDefault = true;\n    this.strictMode = false;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.processMouseUp = this.processMouseUp.bind(this);\n\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.processMouseMove = this.processMouseMove.bind(this);\n\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.processMouseDown = this.processMouseDown.bind(this);\n\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.processTouchStart = this.processTouchStart.bind(this);\n\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.processTouchEnd = this.processTouchEnd.bind(this);\n\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.processTouchMove = this.processTouchMove.bind(this);\n\n    this.onMouseOut = this.onMouseOut.bind(this);\n    this.processMouseOverOut = this.processMouseOverOut.bind(this);\n\n    this.onMouseOver = this.onMouseOver.bind(this);\n\n    this.defaultCursorStyle = 'inherit';\n\n    this.currentCursorStyle = 'inherit';\n\n}\nInteractionManager.prototype = Object.create(Eventer.prototype);\n\nInteractionManager.prototype.addEvents = function() {\n    if (!this.canvas || this.eventsAdded) {\n        return;\n    }\n\n    window.document.addEventListener('mousemove', this.onMouseMove, true);\n    this.canvas.addEventListener('mousedown', this.onMouseDown, true);\n    this.canvas.addEventListener('click', this.onMouseDown, true);\n    this.canvas.addEventListener('mouseout', this.onMouseOut, true);\n    this.canvas.addEventListener('mouseover', this.onMouseOver, true);\n\n    this.canvas.addEventListener('touchstart', this.onTouchStart, true);\n    this.canvas.addEventListener('touchend', this.onTouchEnd, true);\n    this.canvas.addEventListener('touchmove', this.onTouchMove, true);\n\n    window.addEventListener('mouseup', this.onMouseUp, true);\n\n    this.eventsAdded = true;\n};\n\nInteractionManager.prototype.removeEvents = function() {\n    if (!this.canvas) {\n        return;\n    }\n\n    window.document.removeEventListener('mousemove', this.onMouseMove, true);\n    this.canvas.removeEventListener('mousedown', this.onMouseDown, true);\n    this.canvas.removeEventListener('click', this.onMouseDown, true);\n    this.canvas.removeEventListener('mouseout',  this.onMouseOut, true);\n    this.canvas.removeEventListener('mouseover', this.onMouseOver, true);\n\n    this.canvas.removeEventListener('touchstart', this.onTouchStart, true);\n    this.canvas.removeEventListener('touchend',  this.onTouchEnd, true);\n    this.canvas.removeEventListener('touchmove', this.onTouchMove, true);\n\n    window.removeEventListener('mouseup',  this.onMouseUp, true);\n\n    this.eventsAdded = false;\n};\n\nInteractionManager.prototype.onMouseMove = function(event) {\n    var eventd = this.fixCoord(event);\n\n    this.cursor = this.defaultCursorStyle;\n    this.processInteractive(this.stage, eventd, this.processMouseMove, true);\n\n    if (this.currentCursorStyle !== this.cursor) {\n        this.currentCursorStyle = this.cursor;\n        this.canvas.style.cursor = this.cursor;\n    }\n};\n\nInteractionManager.prototype.processMouseMove = function(displayObject, event, hit) {\n    this.processMouseOverOut(displayObject, event, hit);\n    if (hit) {\n        this.dispatchEvent(displayObject, 'mousemove', event);\n    }\n};\n\nInteractionManager.prototype.processMouseOverOut = function(displayObject, event, hit) {\n    var eventd = event.clone();\n    if (hit) {\n        if (!displayObject._over) {\n            displayObject._over = true;\n            this.dispatchEvent(displayObject, 'mouseover', eventd);\n        }\n        if (displayObject.buttonMode) {\n            this.cursor = displayObject.cursor;\n        }\n    } else {\n        if (displayObject._over) {\n            displayObject._over = false;\n            this.dispatchEvent(displayObject, 'mouseout', eventd);\n        }\n    }\n};\n\nInteractionManager.prototype.onMouseDown = function(event) {\n    if (this.autoPreventDefault) {\n        event.preventDefault();\n    }\n    var eventd = this.fixCoord(event);\n    this.processInteractive(this.stage, eventd, this.processMouseDown, true);\n};\n\nInteractionManager.prototype.processMouseDown = function(displayObject, event, hit) {\n    if (hit) {\n        // displayObject._mousedowned = true;\n        this.dispatchEvent(displayObject, event.type, event);\n    }\n};\n\nInteractionManager.prototype.onMouseUp = function(event) {\n    // if (this.autoPreventDefault) {\n    //     event.preventDefault();\n    // }\n    var eventd = this.fixCoord(event);\n    this.processInteractive(this.stage, eventd, this.processMouseUp, true);\n};\n\nInteractionManager.prototype.processMouseUp = function(displayObject, event, hit) {\n    if (hit) {\n        // displayObject._mousedowned = false;\n        this.dispatchEvent(displayObject, event.type, event);\n    }\n};\n\nInteractionManager.prototype.onMouseOut = function(event) {\n    var eventd = this.fixCoord(event);\n\n    this.processInteractive(this.stage, eventd, this.processMouseOverOut, false);\n\n    this.emit('mouseout', event);\n};\n\nInteractionManager.prototype.onMouseOver = function(event) {\n    this.emit('mouseover', event);\n};\n\nInteractionManager.prototype.onTouchStart = function(event) {\n    // if (this.autoPreventDefault) {\n    //     event.preventDefault();\n    // }\n    // console.log(event);\n    var eventd = this.fixCoord(event);\n    this.processInteractive(this.stage, eventd, this.processTouchStart, true);\n};\n\nInteractionManager.prototype.processTouchStart = function(displayObject, event, hit) {\n    if (hit) {\n        displayObject._touchstarted = true;\n        this.dispatchEvent(displayObject, 'touchstart', event);\n    }\n};\n\nInteractionManager.prototype.onTouchEnd = function(event) {\n    // if (this.autoPreventDefault) {\n    //     event.preventDefault();\n    // }\n    var eventd = this.fixCoord(event);\n    this.processInteractive(this.stage, eventd, this.processTouchEnd, this.strictMode);\n};\n\nInteractionManager.prototype.processTouchEnd = function(displayObject, event) {\n    if (displayObject._touchstarted) {\n        displayObject._touchstarted = false;\n        this.dispatchEvent(displayObject, 'touchend', event);\n    }\n};\n\nInteractionManager.prototype.onTouchMove = function(event) {\n    if (this.autoPreventDefault) {\n        event.preventDefault();\n    }\n    var eventd = this.fixCoord(event);\n    this.processInteractive(this.stage, eventd, this.processTouchMove, this.strictMode);\n};\n\nInteractionManager.prototype.processTouchMove = function(displayObject, event, hit) {\n    if ((!this.strictMode && displayObject._touchstarted) || hit) {\n        this.dispatchEvent(displayObject, 'touchmove', event);\n    }\n};\n\nInteractionManager.prototype.processInteractive = function(object, event, func, hitTest) {\n    function process(object, event, func, shouldHit) {\n        var childs = object.childs;\n        var hit = false;\n        var i = childs.length - 1;\n        while (i >= 0) {\n            var cchilds = childs[i--];\n            hit = false;\n            if (cchilds.passEvent) continue;\n            if (cchilds.childs.length > 0) {\n                if (process(cchilds, event, func, shouldHit)) {\n                    shouldHit = false;\n                    hit = true;\n                }\n            }\n            if (shouldHit && !hit) {\n                hit = cchilds.contains(event.global);\n                if (hit) {\n                    event.target = cchilds;\n                    shouldHit = false;\n                }\n            }\n            func(cchilds, event, hit);\n        }\n        return hit;\n    }\n    process(object, event, func, hitTest);\n};\n\nInteractionManager.prototype.dispatchEvent = function(displayObject, eventString, event) {\n    if (!event.cancleBubble) {\n        event.target = displayObject;\n        event.type = eventString;\n\n        displayObject.emit(eventString, event);\n\n        var type = 'on' + eventString;\n        if (displayObject[type]) {\n            displayObject[type](event);\n        }\n    }\n};\n\nInteractionManager.prototype.fixCoord = function(event) {\n    var eventd = new InteractionData(),\n        offset = this.getPos(this.canvas);\n    eventd.originalEvent = event;\n    eventd.type = event.type;\n\n    eventd.ratio = this.canvas.width / this.canvas.offsetWidth;\n    if (event.touches) {\n        eventd.touches = [];\n        if (event.touches.length > 0) {\n            for (var i = 0; i < event.touches.length; i++) {\n                eventd.touches[i] = {};\n                eventd.touches[i].global = new Point(\n                    (event.touches[i].pageX - offset.x) * eventd.ratio,\n                    (event.touches[i].pageY - offset.y) * eventd.ratio\n                );\n            }\n            eventd.global = eventd.touches[0].global;\n        }\n    } else {\n        eventd.global.x = (event.pageX - offset.x) * eventd.ratio;\n        eventd.global.y = (event.pageY - offset.y) * eventd.ratio;\n    }\n    return eventd;\n};\n\nInteractionManager.prototype.getPos = function(obj) {\n    var pos = new Point();\n    if (obj.offsetParent) {\n        var p = this.getPos(obj.offsetParent);\n        pos.x = obj.offsetLeft + p.x;\n        pos.y = obj.offsetTop + p.y;\n    } else {\n        pos.x = obj.offsetLeft;\n        pos.y = obj.offsetTop;\n    }\n    return pos;\n};\n\n/**\n * 舞台对象，继承至Eventer\n *\n *\n * ```js\n * var stage = new JC.Stage('demo_canvas','#fff');\n * ```\n *\n * @class\n * @extends JC.Eventer\n * @memberof JC\n */\nfunction Stage(canvas, bgColor) {\n    Eventer.call(this);\n\n    /**\n     * 场景的canvas的dom\n     *\n     * @member {CANVAS}\n     */\n    this.canvas = UTILS.isString(canvas) ? document.getElementById(canvas) : canvas;\n\n    /**\n     * 场景的canvas的绘图环境\n     *\n     * @member {context2d}\n     */\n    this.ctx = this.canvas.getContext('2d');\n    this.canvas.style.backgroundColor = bgColor || 'transparent';\n\n    /**\n     * 渲染对象的列表\n     *\n     * @member {Array}\n     */\n    this.childs = [];\n\n    /**\n     * 场景是否自动清除上一帧的像素内容\n     *\n     * @member {Boolean}\n     */\n    this.autoClear = true;\n\n    /**\n     * 是否在每一帧绘制之前自动更新场景内所有物体的状态\n     *\n     * @member {Boolean}\n     */\n    this.autoUpdate = true;\n\n    /**\n     * 场景是否应用style控制宽高\n     *\n     * @member {Boolean}\n     */\n    this.autoStyle = false;\n\n    /**\n     * canvas的宽度\n     *\n     * @member {Number}\n     */\n    this.width = this.canvas.width;\n\n    /**\n     * canvas的高度\n     *\n     * @member {Number}\n     */\n    this.height = this.canvas.height;\n\n    /**\n     * 上一次绘制的时间点\n     *\n     * @member {Number}\n     * @private\n     */\n    this.pt = null;\n\n    /**\n     * 本次渲染经历的时间片段长度\n     *\n     * @member {Number}\n     * @private\n     */\n    this.snippet = 0;\n\n\n    /**\n     * 平均渲染经历的时间片段长度\n     *\n     * @member {Number}\n     * @private\n     */\n    this.averageSnippet = 0;\n\n    /**\n     * 渲染的瞬时帧率，仅在enableFPS为true时才可用\n     *\n     * @member {Number}\n     */\n    this.fps = 0;\n\n    /**\n     * 渲染到目前为止的平均帧率，仅在enableFPS为true时才可用\n     *\n     * @member {Number}\n     */\n    this.averageFps = 0;\n\n    /**\n     * 渲染总花费时间，除去被中断、被暂停等时间\n     *\n     * @member {Number}\n     * @private\n     */\n    this._takeTime = 0;\n\n    /**\n     * 渲染总次数\n     *\n     * @member {Number}\n     * @private\n     */\n    this._renderTimes = 0;\n\n    /**\n     * 是否记录渲染性能\n     *\n     * @member {Boolean}\n     */\n    this.enableFPS = true;\n\n    /**\n     * 自身及后代动画的缩放比例\n     *\n     * @member {Number}\n     */\n    this.timeScale = 1;\n\n    /**\n     * 当前对象所应用的矩阵状态\n     *\n     * @member {JC.Matrix}\n     * @private\n     */\n    this.worldTransform = new Matrix();\n\n    /**\n     * 根层级的透明参数\n     *\n     * @member {Number}\n     * @private\n     */\n    this.worldAlpha = 1;\n\n\n    this.interactionManager = new InteractionManager(this);\n\n    this._interactive = false;\n\n\n    this.interactiveOnChange = function() {\n        if (this.interactive) {\n            this.interactionManager.addEvents();\n        } else {\n            this.interactionManager.removeEvents();\n        }\n    };\n\n    /**\n     * 设置canvas是否可交互\n     *\n     * @member {Boolean}\n     */\n    this.interactive = true;\n}\nStage.prototype = Object.create(Eventer.prototype);\n\n/**\n * 对渲染对象进行x、y轴同时缩放\n *\n * @member {Boolean}\n * @name interactive\n * @memberof JC.InteractionManager#\n */\nObject.defineProperty(Stage.prototype, 'interactive', {\n    get: function() {\n        return this._interactive;\n    },\n    set: function(value) {\n        if (this._interactive !== value) {\n            this._interactive = value;\n            this.interactiveOnChange();\n        }\n    }\n});\n\n/**\n * 向容器添加一个物体\n *\n * ```js\n * stage.adds(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param object {JC.Container}\n * @return {JC.Container}\n */\nStage.prototype.adds = function(object) {\n    if (arguments.length > 1) {\n        for (var i = 0; i < arguments.length; i++) {\n            this.adds(arguments[i]);\n        }\n        return this;\n    }\n    if (object === this) {\n        console.error('adds: object can\\'t be added as a child of itself.', object);\n        return this;\n    }\n    if ((object && object instanceof Container)) {\n        if (object.parent !== null) {\n            object.parent.remove(object);\n        }\n        object.parent = this;\n        this.childs.push(object);\n    } else {\n        console.error('adds: object not an instance of Container', object);\n    }\n    return this;\n};\n\n/**\n * 从容器移除一个物体\n *\n * ```js\n * stage.remove(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param object {JC.Container}\n * @return {JC.Container}\n */\nStage.prototype.remove = function(object) {\n    if (arguments.length > 1) {\n        for (var i = 0; i < arguments.length; i++) {\n            this.remove(arguments[i]);\n        }\n    }\n    var index = this.childs.indexOf(object);\n    if (index !== -1) {\n        object.parent = null;\n        this.childs.splice(index, 1);\n    }\n};\n\n/**\n * 舞台尺寸设置\n *\n *\n * @param w {number} canvas的width值\n * @param h {number} canvas的height值\n * @param sw {number} canvas的style.width值，需将舞台属性autoStyle设置为true\n * @param sh {number} canvas的style.height值，需将舞台属性autoStyle设置为true\n */\nStage.prototype.resize = function(w, h, sw, sh) {\n    this.width = this.canvas.width = w;\n    this.height = this.canvas.height = h;\n    if (this.autoStyle && sw && sh) {\n        this.canvas.style.width = sw + 'px';\n        this.canvas.style.height = sh + 'px';\n    }\n};\n\n/**\n * 渲染舞台内的所有可见渲染对象\n *\n *\n */\nStage.prototype.render = function() {\n    this.emit('prerender');\n\n    this.timeline();\n\n    if (this.autoUpdate) this.update();\n\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    if (this.autoClear) this.ctx.clearRect(0, 0, this.width, this.height);\n\n    for (var i = 0, l = this.childs.length; i < l; i++) {\n        var child = this.childs[i];\n        if (!child.isVisible() || !child._ready) continue;\n        child.render(this.ctx);\n    }\n\n    this.emit('postrender');\n};\n\n/**\n * 更新场景内物体状态\n *\n *\n */\nStage.prototype.update = function() {\n    this.updatePosture(this.timeScale * this.snippet);\n};\n\n/**\n * 引擎的时间轴\n *\n * @method timeline\n * @private\n */\nStage.prototype.timeline = function() {\n    this.snippet = Date.now() - this.pt;\n    if (this.pt === null || this.snippet > 200) {\n        this.pt = Date.now();\n        this.snippet = Date.now() - this.pt;\n    }\n\n    if(this.enableFPS){\n        this._renderTimes++;\n        this._takeTime += Math.max(15, this.snippet);\n        this.fps = 1000 / Math.max(15, this.snippet) >> 0;\n        this.averageFps = this._takeTime / this._renderTimes >> 0;\n    }\n\n    this.pt += this.snippet;\n};\n\n/**\n * 更新场景内物体的姿态\n *\n *\n * @method updatePosture\n * @private\n */\nStage.prototype.updatePosture = function(snippet) {\n    for (var i = 0, l = this.childs.length; i < l; i++) {\n        var child = this.childs[i];\n        child.updatePosture(snippet);\n    }\n};\n\nexports.TWEEN = TWEEN;\nexports.UTILS = UTILS;\nexports.Texture = Texture;\nexports.Loader = Loader;\nexports.loaderUtil = loaderUtil;\nexports.Point = Point;\nexports.Rectangle = Rectangle;\nexports.Polygon = Polygon;\nexports.Circle = Circle;\nexports.Ellipse = Ellipse;\nexports.Matrix = Matrix;\nexports.IDENTITY = IDENTITY;\nexports.TEMP_MATRIX = TEMP_MATRIX;\nexports.DisplayObject = DisplayObject;\nexports.Container = Container;\nexports.Sprite = Sprite;\nexports.Graphics = Graphics;\nexports.Text = Text;\nexports.Stage = Stage;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=jcc2d.js.map\n"]}