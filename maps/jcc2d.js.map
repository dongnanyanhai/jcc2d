{"version":3,"sources":["RAF.js","jcc2d.js","loader.js","tween.js"],"names":["lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","RAF","requestAnimFrame","noop","Matrix","this","a","b","c","d","tx","ty","Animate","MST","MAT","fx","complete","moving","infinity","alternate","repeats","DisplayObject","call","visible","worldAlpha","alpha","scaleX","scaleY","skewX","skewY","rotation","rotationCache","_sr","_cr","y","pivotX","pivotY","mask","parent","worldTransform","Container","JC","cds","Sprite","opts","image","_imageW","width","_imageH","height","regX","regY","_cF","count","sH","sW","loop","repeatF","preTime","now","interval","Graphics","cacheCanvas","Text","text","font","color","Stage","bgColor","canvas","document","getElementById","ctx","getContext","style","backgroundColor","autoClear","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","DTR","PI","prototype","fromArray","array","toArray","transpose","JC2D","Float32Array","apply","pos","newPos","applyInverse","translate","scale","rotate","angle","cos","sin","a1","c1","tx1","append","matrix","b1","d1","identity","identityMatrix","moveTween","MATR","attr","time","MATRC","i","manager","nextPose","setVal","TWEEN","Object","create","constructor","isVisible","removeMask","vals","undefined","key","updateMe","pt","wt","updateTransform","setTransform","globalAlpha","addChilds","cd","l","arguments","removeChilds","push","splice","updateChilds","render","save","renderMe","renderChilds","restore","getFrameInfor","obj","drawImage","upFS","canFrames","ok","onEnd","goFrames","end","cached","cache","createElement","session","_ctx","clearRect","draw","drawCall","fn","fillStyle","fillText","resize","w","h","exports","module","define","amd","ImagesLoad","sprite","OKNum","errNum","totalNum","imagesLoad","This","img","Image","onload","imagesLoaded","onerror","src","getResult","easeBoth","t","extend"],"mappings":"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","file":"../modules/jcc2d.js","sourcesContent":["(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function(callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n\n    window.RAF = window.requestAnimFrame = window.requestAnimationFrame;\n})();","(function() {\n\n\twindow.JC = window.JC||{};\n\n\tJC.DTR = Math.PI/180;\n\n\tfunction noop(){}\n\n    function Matrix(){\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n    }\n    JC.Matrix = Matrix;\n    Matrix.prototype.fromArray = function(array){\n        this.a = array[0];\n        this.b = array[1];\n        this.c = array[3];\n        this.d = array[4];\n        this.tx = array[2];\n        this.ty = array[5];\n    };\n    Matrix.prototype.toArray = function(transpose){\n        if(!this.array) this.array = new JC2D.Float32Array(9);\n        var array = this.array;\n\n        if(transpose){\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        }else{\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n        return array;\n    };\n    Matrix.prototype.apply = function(pos, newPos){\n        newPos = newPos || {};\n        newPos.x = this.a * pos.x + this.c * pos.y + this.tx;\n        newPos.y = this.b * pos.x + this.d * pos.y + this.ty;\n        return newPos;\n    };\n    Matrix.prototype.applyInverse = function(pos, newPos){\n        var id = 1 / (this.a * this.d + this.c * -this.b);\n        newPos.x = this.d * id * pos.x + -this.c * id * pos.y + (this.ty * this.c - this.tx * this.d) * id;\n        newPos.y = this.a * id * pos.y + -this.b * id * pos.x + (-this.ty * this.a + this.tx * this.b) * id;\n        return newPos;\n    };\n    Matrix.prototype.translate = function(x, y){\n        this.tx += x;\n        this.ty += y;\n        return this;\n    };\n    Matrix.prototype.scale = function(x, y){\n        this.a *= x;\n        this.d *= y;\n        this.c *= x;\n        this.b *= y;\n        this.tx *= x;\n        this.ty *= y;\n        return this;\n    };\n    Matrix.prototype.rotate = function(angle){\n        var cos = Math.cos( angle );\n        var sin = Math.sin( angle );\n        var a1 = this.a;\n        var c1 = this.c;\n        var tx1 = this.tx;\n        this.a = a1 * cos-this.b * sin;\n        this.b = a1 * sin+this.b * cos;\n        this.c = c1 * cos-this.d * sin;\n        this.d = c1 * sin+this.d * cos;\n        this.tx = tx1 * cos - this.ty * sin;\n        this.ty = tx1 * sin + this.ty * cos;\n        return this;\n    };\n    Matrix.prototype.append = function(matrix){\n        var a1 = this.a;\n        var b1 = this.b;\n        var c1 = this.c;\n        var d1 = this.d;\n        this.a  = matrix.a * a1 + matrix.b * c1;\n        this.b  = matrix.a * b1 + matrix.b * d1;\n        this.c  = matrix.c * a1 + matrix.d * c1;\n        this.d  = matrix.c * b1 + matrix.d * d1;\n        this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n        this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n        return this;\n    };\n    Matrix.prototype.identity = function(){\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n        return this;\n    };\n\tJC.identityMatrix = new Matrix();\n\n\tfunction Animate(){\n\t\tthis.MST = 0;\n\t\tthis.MAT = 300;\n\t\tthis.fx = 'easeBoth';\n\t\tthis.complete = noop;\n\t\tthis.moving = false;\n\t\tthis.infinity = false;\n\t\tthis.alternate = false;\n\t\tthis.repeats = 0;\n\t}\n\tAnimate.prototype.moveTween = function(opts){\n\t\tthis.MST = Date.now();\n\t\tthis.MATR = opts.attr||this.MATR;\n\t\tthis.MAT = opts.time||this.MAT;\n\t\tthis.fx = opts.fx||this.fx;\n\t\tthis.complete = opts.complete||this.complete;\n\t\tthis.infinity = opts.infinity||this.infinity;\n\t\tthis.alternate = opts.alternate||this.alternate;\n\t\tthis.repeats = opts.repeats||this.repeats;\n\t\tthis.moving = true;\n\t\tthis.MATRC = {};\n\t\tfor(var i in this.MATR){\n\t\t\tthis.MATRC[i] = this[i];\n\t\t}\n\t};\n\tAnimate.prototype.manager = function(){\n\t\tif(!this.moving)return;\n\t\tvar now = Date.now();\n\t\tif(now < this.MST+this.MAT){\n\t\t\tthis.nextPose();\n\t\t}else{\n\t\t\tthis.setVal(this.MATR);\n\t\t\tif(this.repeats>0||this.infinity){\n\t\t\t\tthis.repeats>0&&--this.repeats;\n\t\t\t\tif(this.alternate){\n\t\t\t\t\tthis.moveTween({attr: this.MATRC});\n\t\t\t\t}else{\n\t\t\t\t\tthis.setVal(this.MATRC);\n\t\t\t\t\tthis.moveTween({attr: this.MATR});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.moving = false;\n\t\t\t\tthis.complete();\n\t\t\t\tif(now>this.MST)this.complete = noop;\n\t\t\t}\n\t\t}\n\t};\n\tAnimate.prototype.nextPose = function(){\n\t\tvar now=Date.now()-this.MST;\n\t\tfor(var i in this.MATR){\n\t\t\tthis[i] = JC.TWEEN[this.fx]( now , this.MATRC[i] , this.MATR[i] - this.MATRC[i] , this.MAT );\n\t\t}\n\t};\n\n\tfunction DisplayObject(){\n    \tAnimate.call( this );\n\t\tthis.visible = true;\n\t\tthis.worldAlpha = 1;\n\t\tthis.alpha = 1;\n\n\t\tthis.scaleX = 1;\n\t\tthis.scaleY = 1;\n\n\t\tthis.skewX = 0;\n\t\tthis.skewY = 0;\n\n\t\tthis.rotation = 0;\n\t\tthis.rotationCache = 0;\n\t    this._sr = 0;\n\t    this._cr = 1;\n\t\t\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\t\n\t\tthis.pivotX = 0;\n\t\tthis.pivotY = 0;\n\n\t\tthis.mask = noop;\n\n    \tthis.parent = null;\n\t\tthis.worldTransform = new Matrix();\n\t}\n    JC.DisplayObject = DisplayObject;\n    DisplayObject.prototype = Object.create( Animate.prototype );\n    DisplayObject.prototype.constructor = JC.DisplayObject;\n\tDisplayObject.prototype.isVisible = function(){\n\t\treturn !!(this.visible && this.alpha>0 && this.scaleX*this.scaleY>0);\n\t};\n\tDisplayObject.prototype.removeMask = function(){\n\t\tthis.mask = noop;\n\t};\n\tDisplayObject.prototype.setVal = function(vals){\n\t\tif(vals===undefined)return;\n\t\tfor(var key in vals){\n\t\t\tif(this[key]===undefined){\n\t\t\t\tcontinue;\n\t\t\t}else{\n\t\t\t\tthis[key] = vals[key];\n\t\t\t}\n\t\t}\n\t};\n\tDisplayObject.prototype.updateMe = function(){\n\t    var pt = this.parent.worldTransform;\n\t    var wt = this.worldTransform;\n\n\t    var a, b, c, d, tx, ty;\n\n\t    if(this.rotation % 360){\n\t        if(this.rotation !== this.rotationCache){\n\t            this.rotationCache = this.rotation;\n\t            this._sr = Math.sin(this.rotation*JC.DTR);\n\t            this._cr = Math.cos(this.rotation*JC.DTR);\n\t        }\n\n\t        a  =  this._cr * this.scaleX;\n\t        b  =  this._sr * this.scaleX;\n\t        c  = -this._sr * this.scaleY;\n\t        d  =  this._cr * this.scaleY;\n\t        tx =  this.x;\n\t        ty =  this.y;\n\n\t        if(this.pivotX || this.pivotY){\n\t            tx -= this.pivotX * a + this.pivotY * c;\n\t            ty -= this.pivotX * b + this.pivotY * d;\n\t        }\n\t        wt.a  = a  * pt.a + b  * pt.c;\n\t        wt.b  = a  * pt.b + b  * pt.d;\n\t        wt.c  = c  * pt.a + d  * pt.c;\n\t        wt.d  = c  * pt.b + d  * pt.d;\n\t        wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n\t        wt.ty = tx * pt.b + ty * pt.d + pt.ty; \n\t    }else{\n\t        a  = this.scaleX;\n\t        d  = this.scaleY;\n\n\t        tx = this.x - this.pivotX * a;\n\t        ty = this.y - this.pivotY * d;\n\n\t        wt.a  = a  * pt.a;\n\t        wt.b  = a  * pt.b;\n\t        wt.c  = d  * pt.c;\n\t        wt.d  = d  * pt.d;\n\t        wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n\t        wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n\t    }\n\t    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n\t};\n\tDisplayObject.prototype.updateTransform = function(){\n\t\tthis.manager();\n\t\tthis.updateMe();\n\t};\n\tDisplayObject.prototype.setTransform = function(ctx){\n\t\tvar matrix = this.worldTransform;\n\t\tctx.globalAlpha = this.worldAlpha;\n\t\tctx.setTransform(matrix.a,matrix.b,matrix.c,matrix.d,matrix.tx,matrix.ty);\n\t};\n\n\n    function Container(){\n    \tJC.DisplayObject.call( this );\n        this.cds = [];\n    }\n    JC.Container = Container;\n    Container.prototype = Object.create( JC.DisplayObject.prototype );\n    Container.prototype.constructor = JC.Container;\n    Container.prototype.addChilds = function (cd){\n        if(cd === undefined)return cd;\n        var l = arguments.length;\n        if(l > 1){\n            for (var i=0; i<l; i++) { this.addChilds(arguments[i]); }\n            return arguments[l-1];\n        }\n        if(cd.parent){ cd.parent.removeChilds(cd); }\n        cd.parent = this;\n        this.cds.push(cd);\n        return cd;\n    };\n    Container.prototype.removeChilds = function (){\n        var l = arguments.length;\n        if(l > 1){\n            for (var i=0; i<l; i++) { this.removeChilds(arguments[i]); }\n        }else if(l===1){\n            for(var a=0;a<this.cds.length;a++){\n                if(this.cds[a]===arguments[0]){\n                    this.cds[a].parent = null;\n                    this.cds.splice(a,1);\n                    a--;\n                }\n            }\n        }\n    };\n    Container.prototype.updateTransform = function (){\n\t\tthis.manager();\n\t\tthis.updateMe();\n\t\tthis.cds.length>0&&this.updateChilds();\n    };\n    Container.prototype.updateChilds = function (){\n        for (var i=0,l=this.cds.length; i<l; i++) {\n            var cd = this.cds[i];\n            cd.updateTransform();\n        }\n    };\n    Container.prototype.render = function (ctx){\n\t\tctx.save();\n\t\tthis.setTransform(ctx);\n\t\tthis.mask(ctx);\n\t\tthis.renderMe(ctx);\n\t\tthis.cds.length>0&&this.renderChilds(ctx);\n\t\tctx.restore();\n    };\n    Container.prototype.renderMe = function (){\n        return true;\n    };\n    Container.prototype.renderChilds = function (ctx){\n        for (var i=0,l=this.cds.length; i<l; i++) {\n            var cd = this.cds[i];\n            if (!cd.isVisible())continue;\n            cd.render(ctx);\n        }\n    };\n\n    function Sprite(opts){\n    \tJC.Container.call( this );\n        this.image = opts.image;\n        this._imageW = this.image.width;\n        this._imageH = this.image.height;\n        this.width = opts.width||this._imageW;\n        this.height = opts.height||this._imageH;\n        this.regX = .5*this.width;\n        this.regY = .5*this.height;\n        this._cF = 0;\n        this.count = opts.count||1;\n        this.sH = opts.sH||0;\n        this.sW = opts.sW||0;\n        this.loop = false;\n        this.repeatF = 0;\n        this.preTime = Date.now();\n        this.interval = 60;\n    }\n    JC.Sprite = Sprite;\n    Sprite.prototype = Object.create( JC.Container.prototype );\n    Sprite.prototype.constructor = JC.Sprite;\n    Sprite.prototype.getFrameInfor = function(){\n        var obj = {\n                x: this.sW,\n                y: this.sH\n            };\n        if(this._cF>0){\n            obj.x = this.sW + this._cF*this.width;\n        }\n        return obj;\n    };\n    Sprite.prototype.renderMe = function (ctx){\n        var obj = this.getFrameInfor();\n        ctx.drawImage(this.image, obj.x, obj.y, this.width, this.height, -this.regX, -this.regY, this.width, this.height);\n        this.upFS();\n    };\n    Sprite.prototype.upFS = function (){\n        if(!this.canFrames)return;\n        var time = Date.now(),\n            ok = time-this.preTime>this.interval;\n        if(ok){\n            this._cF++;\n            this.preTime = time;\n        }\n        if(this._cF>=this.count){\n            if(this.repeatF<0){\n                this.canFrames = false;\n                this.onEnd();\n            }\n            this._cF = 0;\n            if(!this.loop)this.repeatF--;\n        }\n    };\n    Sprite.prototype.goFrames = function (opts){\n        if(this.count<=1)return;\n        this.canFrames = true;\n        this.loop = opts.loop||false;\n        this.repeatF = opts.repeatF||0;\n        this.onEnd = opts.end||noop;\n        this.preTime = Date.now();\n        this._cF = 0;\n    };\n\n    /** TODO: drawTriangles a mesh frame \n\t *  can have perspective effect\n\t *\n\t *\n     */\n\tfunction Strip(){}\n\n\n\n\tfunction Graphics(){\n    \tJC.Container.call( this );\n    \tthis.cacheCanvas = null;\n\t}\n\tJC.Graphics = Graphics;\n\tGraphics.prototype = Object.create( JC.Container.prototype );\n\tGraphics.prototype.constructor = JC.Graphics;\n    Graphics.prototype.renderMe = function (ctx){\n    \tif(this.cached&&!!this.cacheCanvas){\n    \t\tif(this.cache){\n    \t\t\tthis.cacheCanvas = this.cacheCanvas||document.createElement('canvas');\n    \t\t\tthis.width = this.cacheCanvas.width = this.session.width;\n    \t\t\tthis.height = this.cacheCanvas.height = this.session.height;\n    \t\t\tthis._ctx = this.cacheCanvas.getContext(\"2d\");\n    \t\t\tthis._ctx.clearRect(0,0,this.width,this.height);\n\t        \tthis.draw(this._ctx);\n\t        \tthis.cached = true;\n\t        \tthis.cache = false;\n    \t\t}\n    \t\tthis.cacheCanvas&&ctx.drawImage(this.cacheCanvas, 0, 0, this.width, this.height, 0, 0, this.width, this.height);\n    \t}else{\n\t        this.draw(ctx);\n    \t}\n    };\n\tGraphics.prototype.drawCall = function(fn,opts){\n\t\tif(typeof fn !=='function')return;\n\t\tthis.cache = opts.cache||false;\n\t\tthis.cached = false;\n\t\tthis.session = opts.session||{width:100,height:100};\n\t\tthis.draw = fn||noop;\n\t};\n\n\n\n\tfunction Text(text,font,color){\n    \tJC.Container.call( this );\n\t\tthis.text = text;\n\t\tthis.font = font;\n\t\tthis.color = color;\n\t}\n\tJC.Text = Text;\n\tText.prototype = Object.create( JC.Container.prototype );\n\tText.prototype.constructor = JC.Text;\n\tText.prototype.renderMe = function(ctx){\n\t\tctx.fillStyle = this.color;\n\t\tctx.font=this.font;\n\t\tctx.fillText(this.text,0,0);\n\t};\n\n\n\n    function Stage(id,bgColor){\n    \tJC.Container.call( this );\n        this.canvas = document.getElementById(id);\n        this.ctx = this.canvas.getContext('2d');\n        this.cds = [];\n        this.canvas.style.backgroundColor = bgColor || \"transparent\";\n        this.autoClear = true;\n        this.width = this.canvas.width;\n        this.height = this.canvas.height;\n\n\n\t    if(\"imageSmoothingEnabled\" in this.ctx)\n\t        this.ctx.imageSmoothingEnabled = true;\n\t    else if(\"webkitImageSmoothingEnabled\" in this.ctx)\n\t        this.ctx.webkitImageSmoothingEnabled = true;\n\t    else if(\"mozImageSmoothingEnabled\" in this.ctx)\n\t        this.ctx.mozImageSmoothingEnabled = true;\n\t    else if(\"oImageSmoothingEnabled\" in this.ctx)\n\t        this.ctx.oImageSmoothingEnabled = true;\n    }\n    JC.Stage = Stage;\n    Stage.prototype = Object.create( JC.Container.prototype );\n    Stage.prototype.constructor = JC.Stage;\n    Stage.prototype.resize = function (w,h){\n        this.width = this.canvas.width = w;\n        this.height = this.canvas.height = h;\n    };\n    Stage.prototype.render = function (){\n        this.updateChilds();\n        this.renderChilds();\n    };\n    Stage.prototype.renderChilds = function (){\n    \tthis.ctx.setTransform(1,0,0,1,0,0);\n        if(this.autoClear)this.ctx.clearRect(0,0,this.width,this.height);\n        \n        for (var i=0,l=this.cds.length; i<l; i++) {\n            var cd = this.cds[i];\n            if (!cd.isVisible())continue;\n            cd.render(this.ctx);\n        }\n    };\n\n\n\tif (typeof exports !== 'undefined') {\n\t    if (typeof module !== 'undefined' && module.exports) {\n\t        exports = module.exports = JC;\n\t    }\n\t    exports.JC = JC;\n\t} else if (typeof define !== 'undefined' && define.amd) {\n\t    define(JC);\n\t}\n\n})();","(function(){\n\twindow.JC = window.JC||{};\n\tfunction ImagesLoad(opts){\n\t\tthis.sprite = {};\n\t\tthis.OKNum = 0;\n\t\tthis.errNum = 0;\n\t\tthis.totalNum = 0;\n\t\tthis.imagesLoad(opts);\n\t}\n\tImagesLoad.prototype.imagesLoad = function (opts){\n\t\tvar This = this;\n\t\tfor(var img in opts){\n\t\t\tthis.sprite[img] = new Image();\n\t\t\tthis.totalNum++;\n\t\t\tthis.sprite[img].onload = function (){\n\t\t\t\tThis.OKNum++;\n\t\t\t\tif(This.OKNum>=This.totalNum){\n\t\t\t\t\tThis.imagesLoaded();\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.sprite[img].onerror = function (){\n\t\t\t\tThis.errNum++;\n\t\t\t};\n\t\t\tthis.sprite[img].src = opts[img];\n\t\t}\n\t};\n\tImagesLoad.prototype.imagesLoaded = null;\n\tImagesLoad.prototype.getResult = function (id){\n\t\treturn this.sprite[id];\n\t};\n\tJC.ImagesLoad = ImagesLoad;\n\t/* 结束 纹理预加载 */\n})();","(function() {\n\n\twindow.JC = window.JC||{};\n\n\tJC.TWEEN = {\n\t\teaseBoth: function(t, b, c, d){  //加速减速曲线\n\t\t\tif ((t/=d/2) < 1) {\n\t\t\t\treturn c/2*t*t + b;\n\t\t\t}\n\t\t\treturn -c/2 * ((--t)*(t-2) - 1) + b;\n\t\t},\n\t\textend: function(opts){\n\t\t\tif(!opts)return;\n\t\t\tfor(var key in opts){\n\t\t\t\tif(key!=='extend'&&opts[key])this[key]=opts[key];\n\t\t\t}\n\t\t}\n\t};\n\n})();"]}