{"version":3,"sources":["RAF.js","jcc2d.js","loader.js","tween.js"],"names":["lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","RAF","requestAnimFrame","noop","Matrix","this","a","b","c","d","tx","ty","Animate","MST","MAT","fx","complete","moving","infinity","alternate","repeats","DisplayObject","call","visible","worldAlpha","alpha","scaleX","scaleY","skewX","skewY","rotation","rotationCache","_sr","_cr","y","pivotX","pivotY","mask","parent","worldTransform","Container","JC","cds","Sprite","opts","image","_imageW","width","_imageH","height","regX","regY","_cF","count","sH","sW","loop","repeatF","preTime","now","interval","Graphics","cacheCanvas","Text","text","font","color","textAlign","textBaseline","outline","lineWidth","US","UF","Stage","bgColor","canvas","document","getElementById","ctx","getContext","style","backgroundColor","autoClear","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","DTR","PI","prototype","fromArray","array","toArray","transpose","JC2D","Float32Array","apply","pos","newPos","applyInverse","translate","scale","rotate","angle","cos","sin","a1","c1","tx1","append","matrix","b1","d1","identity","identityMatrix","moveTween","MATR","attr","time","MATRC","i","manager","nextPose","setVal","TWEEN","Object","create","constructor","isVisible","removeMask","vals","undefined","key","updateMe","pt","wt","updateTransform","setTransform","globalAlpha","addChilds","cd","l","arguments","removeChilds","push","splice","updateChilds","render","save","renderMe","renderChilds","restore","getFramePos","obj","row","lintRow","lintCol","mCol","mRow","drawImage","upFS","canFrames","ok","onEnd","goFrames","end","cached","cache","createElement","session","_ctx","clearRect","center","draw","drawCall","fn","fillStyle","fillText","strokeStyle","strokeText","resize","w","h","exports","module","define","amd","ImagesLoad","sprite","OKNum","errNum","totalNum","imagesLoad","This","img","Image","onload","imagesLoaded","onerror","src","getResult","easeBoth","t","extend"],"mappings":"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","file":"../modules/jcc2d.js","sourcesContent":["(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function(callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n\n    window.RAF = window.requestAnimFrame = window.requestAnimationFrame;\n})();","(function() {\n\n\twindow.JC = window.JC||{};\n\n\tJC.DTR = Math.PI/180;\n\n\tfunction noop(){}\n\n    function Matrix(){\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n    }\n    JC.Matrix = Matrix;\n    Matrix.prototype.fromArray = function(array){\n        this.a = array[0];\n        this.b = array[1];\n        this.c = array[3];\n        this.d = array[4];\n        this.tx = array[2];\n        this.ty = array[5];\n    };\n    Matrix.prototype.toArray = function(transpose){\n        if(!this.array) this.array = new JC2D.Float32Array(9);\n        var array = this.array;\n\n        if(transpose){\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        }else{\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n        return array;\n    };\n    Matrix.prototype.apply = function(pos, newPos){\n        newPos = newPos || {};\n        newPos.x = this.a * pos.x + this.c * pos.y + this.tx;\n        newPos.y = this.b * pos.x + this.d * pos.y + this.ty;\n        return newPos;\n    };\n    Matrix.prototype.applyInverse = function(pos, newPos){\n        var id = 1 / (this.a * this.d + this.c * -this.b);\n        newPos.x = this.d * id * pos.x + -this.c * id * pos.y + (this.ty * this.c - this.tx * this.d) * id;\n        newPos.y = this.a * id * pos.y + -this.b * id * pos.x + (-this.ty * this.a + this.tx * this.b) * id;\n        return newPos;\n    };\n    Matrix.prototype.translate = function(x, y){\n        this.tx += x;\n        this.ty += y;\n        return this;\n    };\n    Matrix.prototype.scale = function(x, y){\n        this.a *= x;\n        this.d *= y;\n        this.c *= x;\n        this.b *= y;\n        this.tx *= x;\n        this.ty *= y;\n        return this;\n    };\n    Matrix.prototype.rotate = function(angle){\n        var cos = Math.cos( angle );\n        var sin = Math.sin( angle );\n        var a1 = this.a;\n        var c1 = this.c;\n        var tx1 = this.tx;\n        this.a = a1 * cos-this.b * sin;\n        this.b = a1 * sin+this.b * cos;\n        this.c = c1 * cos-this.d * sin;\n        this.d = c1 * sin+this.d * cos;\n        this.tx = tx1 * cos - this.ty * sin;\n        this.ty = tx1 * sin + this.ty * cos;\n        return this;\n    };\n    Matrix.prototype.append = function(matrix){\n        var a1 = this.a;\n        var b1 = this.b;\n        var c1 = this.c;\n        var d1 = this.d;\n        this.a  = matrix.a * a1 + matrix.b * c1;\n        this.b  = matrix.a * b1 + matrix.b * d1;\n        this.c  = matrix.c * a1 + matrix.d * c1;\n        this.d  = matrix.c * b1 + matrix.d * d1;\n        this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n        this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n        return this;\n    };\n    Matrix.prototype.identity = function(){\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n        return this;\n    };\n\tJC.identityMatrix = new Matrix();\n\n\tfunction Animate(){\n\t\tthis.MST = 0;\n\t\tthis.MAT = 300;\n\t\tthis.fx = 'easeBoth';\n\t\tthis.complete = noop;\n\t\tthis.moving = false;\n\t\tthis.infinity = false;\n\t\tthis.alternate = false;\n\t\tthis.repeats = 0;\n\t}\n\tAnimate.prototype.moveTween = function(opts){\n\t\tthis.MST = Date.now();\n\t\tthis.MATR = opts.attr||this.MATR;\n\t\tthis.MAT = opts.time||this.MAT;\n\t\tthis.fx = opts.fx||this.fx;\n\t\tthis.complete = opts.complete||this.complete;\n\t\tthis.infinity = opts.infinity||this.infinity;\n\t\tthis.alternate = opts.alternate||this.alternate;\n\t\tthis.repeats = opts.repeats||this.repeats;\n\t\tthis.moving = true;\n\t\tthis.MATRC = {};\n\t\tfor(var i in this.MATR){\n\t\t\tthis.MATRC[i] = this[i];\n\t\t}\n\t};\n\tAnimate.prototype.manager = function(){\n\t\tif(!this.moving)return;\n\t\tvar now = Date.now();\n\t\tif(now < this.MST+this.MAT){\n\t\t\tthis.nextPose();\n\t\t}else{\n\t\t\tthis.setVal(this.MATR);\n\t\t\tif(this.repeats>0||this.infinity){\n\t\t\t\tthis.repeats>0&&--this.repeats;\n\t\t\t\tif(this.alternate){\n\t\t\t\t\tthis.moveTween({attr: this.MATRC});\n\t\t\t\t}else{\n\t\t\t\t\tthis.setVal(this.MATRC);\n\t\t\t\t\tthis.moveTween({attr: this.MATR});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.moving = false;\n\t\t\t\tthis.complete();\n\t\t\t\tif(now>this.MST)this.complete = noop;\n\t\t\t}\n\t\t}\n\t};\n\tAnimate.prototype.nextPose = function(){\n\t\tvar now=Date.now()-this.MST;\n\t\tfor(var i in this.MATR){\n\t\t\tthis[i] = JC.TWEEN[this.fx]( now , this.MATRC[i] , this.MATR[i] - this.MATRC[i] , this.MAT );\n\t\t}\n\t};\n\n\tfunction DisplayObject(){\n    \tAnimate.call( this );\n\t\tthis.visible = true;\n\t\tthis.worldAlpha = 1;\n\t\tthis.alpha = 1;\n\n\t\tthis.scaleX = 1;\n\t\tthis.scaleY = 1;\n\n\t\tthis.skewX = 0;\n\t\tthis.skewY = 0;\n\n\t\tthis.rotation = 0;\n\t\tthis.rotationCache = 0;\n\t    this._sr = 0;\n\t    this._cr = 1;\n\t\t\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\t\n\t\tthis.pivotX = 0;\n\t\tthis.pivotY = 0;\n\n\t\tthis.mask = noop;\n\n    \tthis.parent = null;\n\t\tthis.worldTransform = new Matrix();\n\t}\n    JC.DisplayObject = DisplayObject;\n    DisplayObject.prototype = Object.create( Animate.prototype );\n    DisplayObject.prototype.constructor = JC.DisplayObject;\n\tDisplayObject.prototype.isVisible = function(){\n\t\treturn !!(this.visible && this.alpha>0 && this.scaleX*this.scaleY>0);\n\t};\n\tDisplayObject.prototype.removeMask = function(){\n\t\tthis.mask = noop;\n\t};\n\tDisplayObject.prototype.setVal = function(vals){\n\t\tif(vals===undefined)return;\n\t\tfor(var key in vals){\n\t\t\tif(this[key]===undefined){\n\t\t\t\tcontinue;\n\t\t\t}else{\n\t\t\t\tthis[key] = vals[key];\n\t\t\t}\n\t\t}\n\t};\n\tDisplayObject.prototype.updateMe = function(){\n\t    var pt = this.parent.worldTransform;\n\t    var wt = this.worldTransform;\n\n\t    var a, b, c, d, tx, ty;\n\n\t    if(this.rotation % 360){\n\t        if(this.rotation !== this.rotationCache){\n\t            this.rotationCache = this.rotation;\n\t            this._sr = Math.sin(this.rotation*JC.DTR);\n\t            this._cr = Math.cos(this.rotation*JC.DTR);\n\t        }\n\n\t        a  =  this._cr * this.scaleX;\n\t        b  =  this._sr * this.scaleX;\n\t        c  = -this._sr * this.scaleY;\n\t        d  =  this._cr * this.scaleY;\n\t        tx =  this.x;\n\t        ty =  this.y;\n\n\t        if(this.pivotX || this.pivotY){\n\t            tx -= this.pivotX * a + this.pivotY * c;\n\t            ty -= this.pivotX * b + this.pivotY * d;\n\t        }\n\t        wt.a  = a  * pt.a + b  * pt.c;\n\t        wt.b  = a  * pt.b + b  * pt.d;\n\t        wt.c  = c  * pt.a + d  * pt.c;\n\t        wt.d  = c  * pt.b + d  * pt.d;\n\t        wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n\t        wt.ty = tx * pt.b + ty * pt.d + pt.ty; \n\t    }else{\n\t        a  = this.scaleX;\n\t        d  = this.scaleY;\n\n\t        tx = this.x - this.pivotX * a;\n\t        ty = this.y - this.pivotY * d;\n\n\t        wt.a  = a  * pt.a;\n\t        wt.b  = a  * pt.b;\n\t        wt.c  = d  * pt.c;\n\t        wt.d  = d  * pt.d;\n\t        wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n\t        wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n\t    }\n\t    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n\t};\n\tDisplayObject.prototype.updateTransform = function(){\n\t\tthis.manager();\n\t\tthis.updateMe();\n\t};\n\tDisplayObject.prototype.setTransform = function(ctx){\n\t\tvar matrix = this.worldTransform;\n\t\tctx.globalAlpha = this.worldAlpha;\n\t\tctx.setTransform(matrix.a,matrix.b,matrix.c,matrix.d,matrix.tx,matrix.ty);\n\t};\n\n\n    function Container(){\n    \tJC.DisplayObject.call( this );\n        this.cds = [];\n    }\n    JC.Container = Container;\n    Container.prototype = Object.create( JC.DisplayObject.prototype );\n    Container.prototype.constructor = JC.Container;\n    Container.prototype.addChilds = function (cd){\n        if(cd === undefined)return cd;\n        var l = arguments.length;\n        if(l > 1){\n            for (var i=0; i<l; i++) { this.addChilds(arguments[i]); }\n            return arguments[l-1];\n        }\n        if(cd.parent){ cd.parent.removeChilds(cd); }\n        cd.parent = this;\n        this.cds.push(cd);\n        return cd;\n    };\n    Container.prototype.removeChilds = function (){\n        var l = arguments.length;\n        if(l > 1){\n            for (var i=0; i<l; i++) { this.removeChilds(arguments[i]); }\n        }else if(l===1){\n            for(var a=0;a<this.cds.length;a++){\n                if(this.cds[a]===arguments[0]){\n                    this.cds[a].parent = null;\n                    this.cds.splice(a,1);\n                    a--;\n                }\n            }\n        }\n    };\n    Container.prototype.updateTransform = function (){\n\t\tthis.manager();\n\t\tthis.updateMe();\n\t\tthis.cds.length>0&&this.updateChilds();\n    };\n    Container.prototype.updateChilds = function (){\n        for (var i=0,l=this.cds.length; i<l; i++) {\n            var cd = this.cds[i];\n            cd.updateTransform();\n        }\n    };\n    Container.prototype.render = function (ctx){\n\t\tctx.save();\n\t\tthis.setTransform(ctx);\n\t\tthis.mask(ctx);\n\t\tthis.renderMe(ctx);\n\t\tthis.cds.length>0&&this.renderChilds(ctx);\n\t\tctx.restore();\n    };\n    Container.prototype.renderMe = function (){\n        return true;\n    };\n    Container.prototype.renderChilds = function (ctx){\n        for (var i=0,l=this.cds.length; i<l; i++) {\n            var cd = this.cds[i];\n            if (!cd.isVisible())continue;\n            cd.render(ctx);\n        }\n    };\n\n    function Sprite(opts){\n    \tJC.Container.call( this );\n        this.image = opts.image;\n        this._imageW = this.image.width;\n        this._imageH = this.image.height;\n        this.width = opts.width||this._imageW;\n        this.height = opts.height||this._imageH;\n        this.regX = this.width>>1;\n        this.regY = this.height>>1;\n        this._cF = 0;\n        this.count = opts.count||1;\n        this.sH = opts.sH||0;\n        this.sW = opts.sW||0;\n        this.loop = false;\n        this.repeatF = 0;\n        this.preTime = Date.now();\n        this.interval = 60;\n    }\n    JC.Sprite = Sprite;\n    Sprite.prototype = Object.create( JC.Container.prototype );\n    Sprite.prototype.constructor = JC.Sprite;\n    Sprite.prototype.getFramePos = function(){\n        var obj = {\n                x: this.sW,\n                y: this.sH\n            };\n        if(this._cF>0){\n            var row = this._imageW/this.width >> 0;\n            var lintRow = this.sW/this.width >> 0;\n            var lintCol = this.sH/this.height >> 0;\n            var mCol = lintCol+(lintRow+this._cF)/row >> 0;\n            var mRow = (lintRow+this._cF)%row;\n            obj.x = mRow*this.width;\n            obj.y = mCol*this.height;\n        }\n        return obj;\n    };\n    Sprite.prototype.renderMe = function (ctx){\n        var obj = this.getFramePos();\n        ctx.drawImage(this.image, obj.x, obj.y, this.width, this.height, -this.regX, -this.regY, this.width, this.height);\n        this.upFS();\n    };\n    Sprite.prototype.upFS = function (){\n        if(!this.canFrames)return;\n        var time = Date.now(),\n            ok = time-this.preTime>this.interval;\n        if(ok){\n            this._cF++;\n            this.preTime = time;\n        }\n        if(this._cF>=this.count){\n            if(this.repeatF<=0&&!this.loop){\n                this.canFrames = false;\n                this.onEnd();\n            }\n            this._cF = 0;\n            if(!this.loop)this.repeatF--;\n        }\n    };\n    Sprite.prototype.goFrames = function (opts){\n        if(this.count<=1)return;\n        this.canFrames = true;\n        this.loop = opts.loop||false;\n        this.repeatF = opts.repeatF||0;\n        this.onEnd = opts.end||noop;\n        this.preTime = Date.now();\n        this._cF = 0;\n    };\n\n    /** TODO: drawTriangles a mesh frame \n\t *  can have perspective effect\n\t *\n\t *\n     */\n\tfunction Strip(){}\n\n\n\n\tfunction Graphics(){\n    \tJC.Container.call( this );\n    \tthis.cacheCanvas = null;\n\t}\n\tJC.Graphics = Graphics;\n\tGraphics.prototype = Object.create( JC.Container.prototype );\n\tGraphics.prototype.constructor = JC.Graphics;\n    Graphics.prototype.renderMe = function (ctx){\n    \tif(this.cached||this.cache){\n    \t\tif(this.cache){\n    \t\t\tthis.cacheCanvas = this.cacheCanvas||document.createElement('canvas');\n    \t\t\tthis.width = this.cacheCanvas.width = this.session.width;\n    \t\t\tthis.height = this.cacheCanvas.height = this.session.height;\n    \t\t\tthis._ctx = this.cacheCanvas.getContext(\"2d\");\n                this._ctx.clearRect(0,0,this.width,this.height);\n                this._ctx.save();\n                this._ctx.setTransform(1,0,0,1,this.session.center.x,this.session.center.y);\n\t        \tthis.draw(this._ctx);\n                this._ctx.restore();\n\t        \tthis.cached = true;\n\t        \tthis.cache = false;\n    \t\t}\n    \t\tthis.cacheCanvas&&ctx.drawImage(this.cacheCanvas, 0, 0, this.width, this.height, -this.session.center.x, -this.session.center.x, this.width, this.height);\n    \t}else{\n\t        this.draw(ctx);\n    \t}\n    };\n\tGraphics.prototype.drawCall = function(fn,opts){\n\t\tif(typeof fn !=='function')return;\n        opts = opts||{};\n\t\tthis.cache = opts.cache||false;\n\t\tthis.cached = false;\n\t\tthis.session = opts.session||{center: {x: 0,y: 0},width:100,height:100};\n\t\tthis.draw = fn||noop;\n\t};\n\n\n\n\tfunction Text(text,font,color){\n    \tJC.Container.call( this );\n\t\tthis.text = text;\n\t\tthis.font = font;\n\t\tthis.color = color;\n\n        this.textAlign = \"center\"; // start left center end right\n        this.textBaseline = \"middle\"; // top bottom middle alphabetic hanging\n\n\n        this.outline = 0;\n        this.lineWidth = 1;\n\n        this.US = false; // use stroke\n        this.UF = true; // use fill\n\n        // ctx.measureText(str) 返回指定文本的宽度\n\t}\n\tJC.Text = Text;\n\tText.prototype = Object.create( JC.Container.prototype );\n\tText.prototype.constructor = JC.Text;\n\tText.prototype.renderMe = function(ctx){\n        ctx.font = this.font;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        if(this.UF){\n            ctx.fillStyle = this.color;\n            ctx.fillText(this.text,0,0);\n        }\n        if(this.US){\n            ctx.lineWidth = this.lineWidth;\n            ctx.strokeStyle = this.color;\n            ctx.strokeText(this.text,0,0);\n        }\n\t};\n\n\n\n    function Stage(id,bgColor){\n    \tJC.Container.call( this );\n        this.canvas = document.getElementById(id);\n        this.ctx = this.canvas.getContext('2d');\n        this.cds = [];\n        this.canvas.style.backgroundColor = bgColor || \"transparent\";\n        this.autoClear = true;\n        this.width = this.canvas.width;\n        this.height = this.canvas.height;\n\n        if(\"imageSmoothingEnabled\" in this.ctx)\n            this.ctx.imageSmoothingEnabled = true;\n        else if(\"webkitImageSmoothingEnabled\" in this.ctx)\n            this.ctx.webkitImageSmoothingEnabled = true;\n        else if(\"mozImageSmoothingEnabled\" in this.ctx)\n            this.ctx.mozImageSmoothingEnabled = true;\n        else if(\"oImageSmoothingEnabled\" in this.ctx)\n            this.ctx.oImageSmoothingEnabled = true;\n\n    }\n    JC.Stage = Stage;\n    Stage.prototype = Object.create( JC.Container.prototype );\n    Stage.prototype.constructor = JC.Stage;\n    Stage.prototype.resize = function (w,h){\n        this.width = this.canvas.width = w;\n        this.height = this.canvas.height = h;\n    };\n    Stage.prototype.render = function (){\n        this.updateChilds();\n        this.renderChilds();\n    };\n    Stage.prototype.renderChilds = function (){\n    \tthis.ctx.setTransform(1,0,0,1,0,0);\n        if(this.autoClear)this.ctx.clearRect(0,0,this.width,this.height);\n        \n        for (var i=0,l=this.cds.length; i<l; i++) {\n            var cd = this.cds[i];\n            if (!cd.isVisible())continue;\n            cd.render(this.ctx);\n        }\n    };\n\n\n\tif (typeof exports !== 'undefined') {\n\t    if (typeof module !== 'undefined' && module.exports) {\n\t        exports = module.exports = JC;\n\t    }\n\t    exports.JC = JC;\n\t} else if (typeof define !== 'undefined' && define.amd) {\n\t    define(JC);\n\t}\n\n})();","(function(){\n\twindow.JC = window.JC||{};\n\tfunction ImagesLoad(opts){\n\t\tthis.sprite = {};\n\t\tthis.OKNum = 0;\n\t\tthis.errNum = 0;\n\t\tthis.totalNum = 0;\n\t\tthis.imagesLoad(opts);\n\t}\n\tImagesLoad.prototype.imagesLoad = function (opts){\n\t\tvar This = this;\n\t\tfor(var img in opts){\n\t\t\tthis.sprite[img] = new Image();\n\t\t\tthis.totalNum++;\n\t\t\tthis.sprite[img].onload = function (){\n\t\t\t\tThis.OKNum++;\n\t\t\t\tif(This.OKNum>=This.totalNum){\n\t\t\t\t\tThis.imagesLoaded();\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.sprite[img].onerror = function (){\n\t\t\t\tThis.errNum++;\n\t\t\t};\n\t\t\tthis.sprite[img].src = opts[img];\n\t\t}\n\t};\n\tImagesLoad.prototype.imagesLoaded = null;\n\tImagesLoad.prototype.getResult = function (id){\n\t\treturn this.sprite[id];\n\t};\n\tJC.ImagesLoad = ImagesLoad;\n\t/* 结束 纹理预加载 */\n})();","(function() {\n\n\twindow.JC = window.JC||{};\n\n\tJC.TWEEN = {\n\t\teaseBoth: function(t, b, c, d){  //加速减速曲线\n\t\t\tif ((t/=d/2) < 1) {\n\t\t\t\treturn c/2*t*t + b;\n\t\t\t}\n\t\t\treturn -c/2 * ((--t)*(t-2) - 1) + b;\n\t\t},\n\t\textend: function(opts){\n\t\t\tif(!opts)return;\n\t\t\tfor(var key in opts){\n\t\t\t\tif(key!=='extend'&&opts[key])this[key]=opts[key];\n\t\t\t}\n\t\t}\n\t};\n\n})();"]}